[{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ErrorBoundary.class.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[379,392],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'errorInfo' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"errorInfo"},"fix":{"range":[391,413],"text":""},"desc":"Remove unused variable 'errorInfo'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Component, type ErrorInfo, type ReactNode } from 'react';\nimport {\n  AlertTriangle,\n  RefreshCw,\n  Home,\n  Bug,\n  Wifi,\n  WifiOff,\n  Clock,\n  Send,\n  CheckCircle,\n  XCircle,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  enableRetry?: boolean;\n  maxRetries?: number;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n  retryCount: number;\n  isRecovering: boolean;\n  errorId: string;\n  errorType: ErrorType;\n  recoverySuggestions: RecoverySuggestion[];\n  isOnline: boolean;\n  lastRetry: number | null;\n  autoRetry: boolean;\n}\n\ntype ErrorType =\n  | 'NETWORK_ERROR'\n  | 'AUTHENTICATION_ERROR'\n  | 'VALIDATION_ERROR'\n  | 'TIMEOUT_ERROR'\n  | 'UNKNOWN_ERROR';\n\ninterface RecoverySuggestion {\n  id: string;\n  title: string;\n  description: string;\n  action: () => void;\n  auto?: boolean;\n  icon?: ReactNode;\n}\n\ninterface ErrorReport {\n  id: string;\n  timestamp: number;\n  error: string;\n  stack?: string;\n  componentStack?: string;\n  userAgent: string;\n  url: string;\n  errorType: ErrorType;\n  retryCount: number;\n  isOnline: boolean;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  private autoRetryTimer: NodeJS.Timeout | null = null;\n  private maxRetries: number;\n  private retryDelay: number = 2000; // 2 seconds\n\n  constructor(props: Props) {\n    super(props);\n    this.maxRetries = props.maxRetries || 3;\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      retryCount: 0,\n      isRecovering: false,\n      errorId: '',\n      errorType: 'UNKNOWN_ERROR',\n      recoverySuggestions: [],\n      isOnline: navigator.onLine,\n      lastRetry: null,\n      autoRetry: true,\n    };\n\n    // Listen for online/offline events\n    window.addEventListener('online', this.handleOnlineChange);\n    window.addEventListener('offline', this.handleOnlineChange);\n  }\n\n  public static getDerivedStateFromError(error: Error): Partial<State> {\n    const errorId = `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const errorType = ErrorBoundary.categorizeError(error);\n\n    return {\n      hasError: true,\n      error,\n      errorId,\n      errorType,\n      isRecovering: false,\n    };\n  }\n\n  public override componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    const errorType = ErrorBoundary.categorizeError(error);\n    const recoverySuggestions = this.generateRecoverySuggestions(\n      error,\n      errorType\n    );\n\n    this.setState({\n      error,\n      errorInfo,\n      errorType,\n      recoverySuggestions,\n    });\n\n    // Log error to console in development\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    // Send error report\n    this.reportError(error, errorInfo);\n\n    // Call custom error handler if provided\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n\n    // Attempt auto-recovery if enabled\n    if (this.props.enableRetry !== false && this.state.autoRetry) {\n      this.attemptAutoRecovery(error, errorType);\n    }\n  }\n\n  public override componentWillUnmount() {\n    if (this.autoRetryTimer) {\n      clearTimeout(this.autoRetryTimer);\n    }\n    window.removeEventListener('online', this.handleOnlineChange);\n    window.removeEventListener('offline', this.handleOnlineChange);\n  }\n\n  private static categorizeError(error: Error): ErrorType {\n    const message = error.message.toLowerCase();\n    const stack = error.stack?.toLowerCase() || '';\n\n    if (\n      message.includes('network') ||\n      message.includes('fetch') ||\n      message.includes('connection') ||\n      stack.includes('fetch')\n    ) {\n      return 'NETWORK_ERROR';\n    }\n\n    if (\n      message.includes('unauthorized') ||\n      message.includes('authentication') ||\n      message.includes('login') ||\n      message.includes('token')\n    ) {\n      return 'AUTHENTICATION_ERROR';\n    }\n\n    if (\n      message.includes('validation') ||\n      message.includes('invalid') ||\n      message.includes('required') ||\n      message.includes('format')\n    ) {\n      return 'VALIDATION_ERROR';\n    }\n\n    if (\n      message.includes('timeout') ||\n      message.includes('timeout') ||\n      stack.includes('timeout')\n    ) {\n      return 'TIMEOUT_ERROR';\n    }\n\n    return 'UNKNOWN_ERROR';\n  }\n\n  private generateRecoverySuggestions(\n    _error: Error,\n    errorType: ErrorType\n  ): RecoverySuggestion[] {\n    const suggestions: RecoverySuggestion[] = [];\n\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        suggestions.push({\n          id: 'check_connection',\n          title: 'Check Internet Connection',\n          description: 'Verify your internet connection is working properly',\n          action: this.checkConnection,\n          icon: <Wifi className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        suggestions.push({\n          id: 'refresh_page',\n          title: 'Refresh Page',\n          description: 'Reload the page to restore connection',\n          action: this.refreshPage,\n          icon: <RefreshCw className=\"h-4 w-4\" />,\n          auto: true,\n        });\n        break;\n\n      case 'AUTHENTICATION_ERROR':\n        suggestions.push({\n          id: 'relogin',\n          title: 'Sign In Again',\n          description: 'Your session may have expired. Please sign in again.',\n          action: this.handleReauthentication,\n          icon: <CheckCircle className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        break;\n\n      case 'VALIDATION_ERROR':\n        suggestions.push({\n          id: 'check_input',\n          title: 'Check Input Data',\n          description: 'Please verify your input and try again',\n          action: this.handleReset,\n          icon: <AlertTriangle className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        break;\n\n      case 'TIMEOUT_ERROR':\n        suggestions.push({\n          id: 'retry_later',\n          title: 'Try Again',\n          description: 'The operation timed out. Please try again.',\n          action: this.handleRetry,\n          icon: <Clock className=\"h-4 w-4\" />,\n          auto: true,\n        });\n        break;\n\n      default:\n        suggestions.push({\n          id: 'refresh_page',\n          title: 'Refresh Page',\n          description: 'Reload the page to clear temporary issues',\n          action: this.refreshPage,\n          icon: <RefreshCw className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        suggestions.push({\n          id: 'report_bug',\n          title: 'Report Issue',\n          description: 'Send an error report to help us fix this issue',\n          action: this.sendDetailedReport,\n          icon: <Send className=\"h-4 w-4\" />,\n          auto: false,\n        });\n    }\n\n    return suggestions;\n  }\n\n  private attemptAutoRecovery = (_error: Error, _errorType: ErrorType) => {\n    // DISABLED: Auto-recovery causing infinite reloads\n    // The automatic page refresh creates a cycle of failures\n    // Users should manually click retry instead\n    return;\n  };\n\n  private reportError = async (error: Error, errorInfo: ErrorInfo) => {\n    try {\n      const report: ErrorReport = {\n        id: this.state.errorId,\n        timestamp: Date.now(),\n        error: error.message,\n        ...(error.stack && { stack: error.stack }),\n        ...(errorInfo.componentStack && {\n          componentStack: errorInfo.componentStack,\n        }),\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        errorType: this.state.errorType,\n        retryCount: this.state.retryCount,\n        isOnline: navigator.onLine,\n      };\n\n      // Store error in localStorage for debugging\n      const existingErrors = JSON.parse(\n        localStorage.getItem('clms_error_reports') || '[]'\n      );\n      existingErrors.push(report);\n      localStorage.setItem(\n        'clms_error_reports',\n        JSON.stringify(existingErrors.slice(-10))\n      ); // Keep last 10 errors\n\n      // Keep only last 50 errors\n      if (existingErrors.length > 50) {\n        existingErrors.splice(0, existingErrors.length - 50);\n      }\n\n      localStorage.setItem(\n        'clms_error_reports',\n        JSON.stringify(existingErrors)\n      );\n\n      // Send to backend if online (disabled - endpoint doesn't exist)\n      // TODO: Enable when /api/errors/report endpoint is implemented\n      // if (navigator.onLine) {\n      //   await fetch('/api/errors/report', {\n      //     method: 'POST',\n      //     headers: { 'Content-Type': 'application/json' },\n      //     body: JSON.stringify(report),\n      //   }).catch(() => {\n      //     // Ignore errors when reporting errors to avoid infinite loops\n      //   });\n      // }\n    } catch (reportingError) {\n      console.error('Failed to report error:', reportingError);\n    }\n  };\n\n  private handleOnlineChange = () => {\n    const isOnline = navigator.onLine;\n    this.setState({ isOnline });\n\n    // If we came back online and have a network error, try auto-recovery\n    if (\n      isOnline &&\n      this.state.hasError &&\n      this.state.errorType === 'NETWORK_ERROR'\n    ) {\n      this.handleRetry();\n    }\n  };\n\n  private handleRetry = () => {\n    if (this.state.retryCount >= this.maxRetries) {\n      this.setState({ autoRetry: false });\n      return;\n    }\n\n    this.setState({\n      retryCount: this.state.retryCount + 1,\n      lastRetry: Date.now(),\n      isRecovering: true,\n    });\n\n    // Clear any existing auto-retry timer\n    if (this.autoRetryTimer) {\n      clearTimeout(this.autoRetryTimer);\n      this.autoRetryTimer = null;\n    }\n\n    // Attempt recovery by resetting error state\n    setTimeout(() => {\n      this.handleReset();\n    }, 1000);\n  };\n\n  private handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      retryCount: 0,\n      isRecovering: false,\n      errorId: '',\n      errorType: 'UNKNOWN_ERROR',\n      recoverySuggestions: [],\n      lastRetry: null,\n      autoRetry: true,\n    });\n\n    // Clear any existing timer\n    if (this.autoRetryTimer) {\n      clearTimeout(this.autoRetryTimer);\n      this.autoRetryTimer = null;\n    }\n  };\n\n  private handleGoHome = () => {\n    window.location.href = '/';\n  };\n\n  private refreshPage = () => {\n    window.location.reload();\n  };\n\n  private checkConnection = () => {\n    // Simple connection check\n    if (!navigator.onLine) {\n      alert('You appear to be offline. Please check your internet connection.');\n      return;\n    }\n\n    // Try to fetch a small resource to test connection\n    fetch(`${import.meta.env.VITE_API_URL}/health`, { method: 'HEAD' })\n      .then(() => {\n        alert('Connection is working. Refreshing the page...');\n        this.refreshPage();\n      })\n      .catch(() => {\n        alert('Connection test failed. Please check your internet connection.');\n      });\n  };\n\n  private handleReauthentication = () => {\n    // Clear auth data and redirect to login\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user_data');\n    window.location.href = '/login';\n  };\n\n  private sendDetailedReport = () => {\n    const report = {\n      errorId: this.state.errorId,\n      error: this.state.error?.message,\n      stack: this.state.error?.stack,\n      componentStack: this.state.errorInfo?.componentStack,\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      timestamp: new Date().toISOString(),\n    };\n\n    // Create email body\n    const emailBody = `\nError Report ID: ${report.errorId}\nTimestamp: ${report.timestamp}\nURL: ${report.url}\nError: ${report.error}\n\nComponent Stack:\n${report.componentStack || 'Not available'}\n\nFull Stack:\n${report.stack || 'Not available'}\n\nUser Agent: ${report.userAgent}\n    `.trim();\n\n    // Open email client with pre-filled report\n    const subject = encodeURIComponent(`CLMS Error Report - ${report.errorId}`);\n    const body = encodeURIComponent(emailBody);\n    window.open(`mailto:support@clms.com?subject=${subject}&body=${body}`);\n  };\n\n  private getErrorIcon = () => {\n    switch (this.state.errorType) {\n      case 'NETWORK_ERROR':\n        return this.state.isOnline ? (\n          <Wifi className=\"h-8 w-8\" />\n        ) : (\n          <WifiOff className=\"h-8 w-8\" />\n        );\n      case 'AUTHENTICATION_ERROR':\n        return <XCircle className=\"h-8 w-8\" />;\n      case 'VALIDATION_ERROR':\n        return <AlertTriangle className=\"h-8 w-8\" />;\n      case 'TIMEOUT_ERROR':\n        return <Clock className=\"h-8 w-8\" />;\n      default:\n        return <Bug className=\"h-8 w-8\" />;\n    }\n  };\n\n  private getErrorMessage = (): string => {\n    if (!this.state.error) {\n      return 'Unknown error';\n    }\n\n    // If error has a message property (API error object)\n    if (typeof this.state.error === 'object' && this.state.error.message) {\n      return this.state.error.message;\n    }\n\n    // If error is a string\n    if (typeof this.state.error === 'string') {\n      return this.state.error;\n    }\n\n    // Fallback to toString for Error objects\n    return this.state.error.toString();\n  };\n\n  public override render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-slate-50 to-blue-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 p-4\">\n          <div className=\"max-w-3xl w-full space-y-6\">\n            {/* Main Error Card */}\n            <Card className=\"bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden\">\n              {/* Header */}\n              <div\n                className={`bg-gradient-to-r p-6 ${\n                  this.state.errorType === 'NETWORK_ERROR'\n                    ? 'from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700'\n                    : this.state.errorType === 'AUTHENTICATION_ERROR'\n                      ? 'from-yellow-500 to-yellow-600 dark:from-yellow-600 dark:to-yellow-700'\n                      : this.state.errorType === 'VALIDATION_ERROR'\n                        ? 'from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700'\n                        : this.state.errorType === 'TIMEOUT_ERROR'\n                          ? 'from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700'\n                          : 'from-red-500 to-red-600 dark:from-red-600 dark:to-red-700'\n                }`}\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"bg-white/20 backdrop-blur-sm rounded-full p-3 text-white\">\n                    {this.getErrorIcon()}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h1 className=\"text-2xl font-bold text-white\">\n                      {this.state.errorType === 'NETWORK_ERROR' &&\n                        'Connection Error'}\n                      {this.state.errorType === 'AUTHENTICATION_ERROR' &&\n                        'Authentication Required'}\n                      {this.state.errorType === 'VALIDATION_ERROR' &&\n                        'Validation Error'}\n                      {this.state.errorType === 'TIMEOUT_ERROR' &&\n                        'Request Timeout'}\n                      {this.state.errorType === 'UNKNOWN_ERROR' &&\n                        'Something Went Wrong'}\n                    </h1>\n                    <p className=\"text-white/80 mt-1\">\n                      {this.state.errorType === 'NETWORK_ERROR' &&\n                        'Unable to connect to the server'}\n                      {this.state.errorType === 'AUTHENTICATION_ERROR' &&\n                        'Please sign in to continue'}\n                      {this.state.errorType === 'VALIDATION_ERROR' &&\n                        'Please check your input and try again'}\n                      {this.state.errorType === 'TIMEOUT_ERROR' &&\n                        'The request took too long to complete'}\n                      {this.state.errorType === 'UNKNOWN_ERROR' &&\n                        'The application encountered an unexpected error'}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {this.state.isOnline ? (\n                      <Wifi className=\"h-5 w-5 text-green-400\" />\n                    ) : (\n                      <WifiOff className=\"h-5 w-5 text-red-400\" />\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"p-6 space-y-6\">\n                {/* Auto-recovery status */}\n                {this.state.isRecovering && (\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <RefreshCw className=\"h-5 w-5 text-blue-600 dark:text-blue-400 animate-spin\" />\n                      <div>\n                        <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">\n                          Attempting Automatic Recovery\n                        </h3>\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                          Trying to resolve the issue automatically... (Attempt{' '}\n                          {this.state.retryCount + 1}/{this.maxRetries})\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Error Details */}\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <h2 className=\"text-sm font-semibold text-slate-900 dark:text-slate-100\">\n                      Error Details\n                    </h2>\n                    <span className=\"text-xs text-slate-500 dark:text-slate-400\">\n                      ID: {this.state.errorId}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-slate-700 dark:text-slate-300 font-mono break-all\">\n                    {this.getErrorMessage()}\n                  </p>\n                  {this.state.retryCount > 0 && (\n                    <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-2\">\n                      Retry attempts: {this.state.retryCount}/{this.maxRetries}\n                    </p>\n                  )}\n                </div>\n\n                {/* Recovery Suggestions */}\n                {this.state.recoverySuggestions.length > 0 && (\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-slate-900 dark:text-slate-100\">\n                      Suggested Actions\n                    </h3>\n                    <div className=\"grid gap-2\">\n                      {this.state.recoverySuggestions.map((suggestion) => (\n                        <Button\n                          key={suggestion.id}\n                          onClick={suggestion.action}\n                          variant=\"outline\"\n                          className=\"justify-start h-auto p-4 gap-3\"\n                          disabled={this.state.isRecovering}\n                        >\n                          {suggestion.icon}\n                          <div className=\"text-left\">\n                            <div className=\"font-medium\">\n                              {suggestion.title}\n                            </div>\n                            <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                              {suggestion.description}\n                            </div>\n                          </div>\n                        </Button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Development Info */}\n                {import.meta.env.DEV && this.state.errorInfo && (\n                  <details className=\"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700\">\n                    <summary className=\"text-sm font-semibold text-slate-900 dark:text-slate-100 cursor-pointer mb-2\">\n                      Stack Trace (Development Only)\n                    </summary>\n                    <pre className=\"text-xs text-slate-600 dark:text-slate-400 overflow-auto max-h-64 whitespace-pre-wrap font-mono\">\n                      {this.state.errorInfo.componentStack}\n                    </pre>\n                  </details>\n                )}\n\n                {/* Main Actions */}\n                <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-slate-200 dark:border-slate-700\">\n                  <Button\n                    onClick={this.handleRetry}\n                    className=\"flex-1 gap-2\"\n                    variant=\"default\"\n                    disabled={\n                      this.state.isRecovering ||\n                      this.state.retryCount >= this.maxRetries\n                    }\n                  >\n                    <RefreshCw className=\"h-4 w-4\" />\n                    {this.state.isRecovering\n                      ? 'Recovering...'\n                      : this.state.retryCount >= this.maxRetries\n                        ? 'Max Retries Reached'\n                        : 'Try Again'}\n                  </Button>\n                  <Button\n                    onClick={this.handleGoHome}\n                    className=\"flex-1 gap-2\"\n                    variant=\"outline\"\n                  >\n                    <Home className=\"h-4 w-4\" />\n                    Go to Dashboard\n                  </Button>\n                </div>\n\n                {/* Help Text */}\n                <div className=\"flex flex-col items-center gap-2 text-center\">\n                  <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    Error ID: {this.state.errorId}\n                  </p>\n                  <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    If this problem persists, please contact the system\n                    administrator\n                  </p>\n                </div>\n              </div>\n            </Card>\n\n            {/* Auto-retry disabled notice */}\n            {!this.state.autoRetry &&\n              this.state.retryCount >= this.maxRetries && (\n                <Card className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800\">\n                  <div className=\"p-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <AlertTriangle className=\"h-5 w-5 text-amber-600 dark:text-amber-400\" />\n                      <div>\n                        <h3 className=\"text-sm font-semibold text-amber-900 dark:text-amber-100\">\n                          Automatic Retry Disabled\n                        </h3>\n                        <p className=\"text-sm text-amber-700 dark:text-amber-300\">\n                          Maximum retry attempts reached. Please try one of the\n                          suggested actions above.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </Card>\n              )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ErrorBoundaryFallback.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":44,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[1135,1148],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'errorId' is defined but never used. Allowed unused args must match /^_/u.","line":44,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"errorId"},"fix":{"range":[1147,1164],"text":""},"desc":"Remove unused variable 'errorId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'errorType' is defined but never used. Allowed unused args must match /^_/u.","line":44,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"errorType"},"fix":{"range":[1164,1186],"text":""},"desc":"Remove unused variable 'errorType'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":339,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":339,"endColumn":22,"suggestions":[{"fix":{"range":[9764,9876],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ErrorBoundaryFallback - Functional fallback component for react-error-boundary\n * React 19 compatible with modern hooks and error handling patterns\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport type { FallbackProps } from 'react-error-boundary';\nimport {\n  AlertTriangle,\n  RefreshCw,\n  Home,\n  Bug,\n  Wifi,\n  WifiOff,\n  Clock,\n  Send,\n  CheckCircle,\n  XCircle,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport {\n  categorizeError,\n  generateErrorId,\n  reportApplicationError,\n  checkConnection,\n  handleReauthentication,\n  refreshPage,\n  goHome,\n  sendDetailedReport,\n  type ErrorType,\n  type RecoverySuggestion,\n} from '@/utils/error-utils';\n\n/**\n * Props for ErrorBoundaryFallback component extending react-error-boundary's FallbackProps\n */\ninterface ErrorBoundaryFallbackProps extends FallbackProps {\n  /** Maximum number of retry attempts before disabling auto-retry */\n  maxRetries?: number;\n  /** Enable/disable retry functionality */\n  enableRetry?: boolean;\n  /** Custom error handler callback */\n  onError?: (error: Error, errorId: string, errorType: ErrorType) => void;\n}\n\n/**\n * Functional ErrorBoundary fallback component with comprehensive error handling\n * Supports automatic recovery, retry logic, and detailed error reporting\n */\nexport function ErrorBoundaryFallback({\n  error,\n  resetErrorBoundary,\n  maxRetries = 3,\n  enableRetry = true,\n  onError,\n}: ErrorBoundaryFallbackProps) {\n  // State management using React hooks\n  const [retryCount, setRetryCount] = useState(0);\n  const [isRecovering, setIsRecovering] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [autoRetry, setAutoRetry] = useState(true);\n  // Remove unused lastRetry variable\n\n  // Memoized error categorization and ID generation\n  const errorType = useMemo(() => categorizeError(error), [error]);\n  const errorId = useMemo(() => generateErrorId(), [error]);\n\n  /**\n   * Handle online/offline status changes\n   */\n  const handleOnlineChange = useCallback(() => {\n    const online = navigator.onLine;\n    setIsOnline(online);\n\n    // Auto-retry network errors when coming back online\n    if (\n      online &&\n      errorType === 'NETWORK_ERROR' &&\n      autoRetry &&\n      retryCount < maxRetries\n    ) {\n      handleRetry();\n    }\n  }, [errorType, autoRetry, retryCount, maxRetries]);\n\n  /**\n   * Handle retry attempts with exponential backoff\n   */\n  const handleRetry = useCallback(() => {\n    if (retryCount >= maxRetries) {\n      setAutoRetry(false);\n      return;\n    }\n\n    setRetryCount((prev) => prev + 1);\n    setIsRecovering(true);\n\n    // Exponential backoff: 1s, 2s, 4s, etc.\n    const delay = Math.min(1000 * Math.pow(2, retryCount), 5000);\n\n    setTimeout(() => {\n      setIsRecovering(false);\n      resetErrorBoundary();\n    }, delay);\n  }, [retryCount, maxRetries, resetErrorBoundary]);\n\n  /**\n   * Handle manual reset\n   */\n  const handleReset = useCallback(() => {\n    setRetryCount(0);\n    setIsRecovering(false);\n    setAutoRetry(true);\n    resetErrorBoundary();\n  }, [resetErrorBoundary]);\n\n  /**\n   * Check connection and retry if successful\n   */\n  const handleCheckConnection = useCallback(async () => {\n    setIsRecovering(true);\n\n    try {\n      const isConnected = await checkConnection();\n      if (isConnected) {\n        handleRetry();\n      } else {\n        alert('Connection test failed. Please check your internet connection.');\n        setIsRecovering(false);\n      }\n    } catch {\n      alert(\n        'Unable to test connection. Please check your internet connection.'\n      );\n      setIsRecovering(false);\n    }\n  }, [handleRetry]);\n\n  /**\n   * Send detailed error report via email\n   */\n  const handleSendReport = useCallback(() => {\n    sendDetailedReport(errorId, error, null);\n  }, [errorId, error]);\n\n  /**\n   * Generate recovery suggestions based on error type\n   */\n  const recoverySuggestions = useMemo((): RecoverySuggestion[] => {\n    const suggestions: RecoverySuggestion[] = [];\n\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        suggestions.push({\n          id: 'check_connection',\n          title: 'Check Internet Connection',\n          description: 'Verify your internet connection is working properly',\n          action: handleCheckConnection,\n          icon: <Wifi className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        suggestions.push({\n          id: 'refresh_page',\n          title: 'Refresh Page',\n          description: 'Reload the page to restore connection',\n          action: refreshPage,\n          icon: <RefreshCw className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        break;\n\n      case 'AUTHENTICATION_ERROR':\n        suggestions.push({\n          id: 'relogin',\n          title: 'Sign In Again',\n          description: 'Your session may have expired. Please sign in again.',\n          action: handleReauthentication,\n          icon: <CheckCircle className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        break;\n\n      case 'VALIDATION_ERROR':\n        suggestions.push({\n          id: 'check_input',\n          title: 'Check Input Data',\n          description: 'Please verify your input and try again',\n          action: handleReset,\n          icon: <AlertTriangle className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        break;\n\n      case 'TIMEOUT_ERROR':\n        suggestions.push({\n          id: 'retry_later',\n          title: 'Try Again',\n          description: 'The operation timed out. Please try again.',\n          action: handleRetry,\n          icon: <Clock className=\"h-4 w-4\" />,\n          auto: true,\n        });\n        break;\n\n      default:\n        suggestions.push({\n          id: 'refresh_page',\n          title: 'Refresh Page',\n          description: 'Reload the page to clear temporary issues',\n          action: refreshPage,\n          icon: <RefreshCw className=\"h-4 w-4\" />,\n          auto: false,\n        });\n        suggestions.push({\n          id: 'report_bug',\n          title: 'Report Issue',\n          description: 'Send an error report to help us fix this issue',\n          action: handleSendReport,\n          icon: <Send className=\"h-4 w-4\" />,\n          auto: false,\n        });\n    }\n\n    return suggestions;\n  }, [\n    errorType,\n    handleCheckConnection,\n    handleRetry,\n    handleReset,\n    handleSendReport,\n  ]);\n\n  /**\n   * Get appropriate icon for error type\n   */\n  const getErrorIcon = useCallback(() => {\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        return isOnline ? (\n          <Wifi className=\"h-8 w-8\" />\n        ) : (\n          <WifiOff className=\"h-8 w-8\" />\n        );\n      case 'AUTHENTICATION_ERROR':\n        return <XCircle className=\"h-8 w-8\" />;\n      case 'VALIDATION_ERROR':\n        return <AlertTriangle className=\"h-8 w-8\" />;\n      case 'TIMEOUT_ERROR':\n        return <Clock className=\"h-8 w-8\" />;\n      default:\n        return <Bug className=\"h-8 w-8\" />;\n    }\n  }, [errorType, isOnline]);\n\n  /**\n   * Get error title based on type\n   */\n  const getErrorTitle = useCallback(() => {\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        return 'Connection Error';\n      case 'AUTHENTICATION_ERROR':\n        return 'Authentication Required';\n      case 'VALIDATION_ERROR':\n        return 'Validation Error';\n      case 'TIMEOUT_ERROR':\n        return 'Request Timeout';\n      default:\n        return 'Something Went Wrong';\n    }\n  }, [errorType]);\n\n  /**\n   * Get error description based on type\n   */\n  const getErrorDescription = useCallback(() => {\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        return 'Unable to connect to the server';\n      case 'AUTHENTICATION_ERROR':\n        return 'Please sign in to continue';\n      case 'VALIDATION_ERROR':\n        return 'Please check your input and try again';\n      case 'TIMEOUT_ERROR':\n        return 'The request took too long to complete';\n      default:\n        return 'The application encountered an unexpected error';\n    }\n  }, [errorType]);\n\n  /**\n   * Get gradient colors based on error type\n   */\n  const getGradientColors = useCallback(() => {\n    switch (errorType) {\n      case 'NETWORK_ERROR':\n        return 'from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700';\n      case 'AUTHENTICATION_ERROR':\n        return 'from-yellow-500 to-yellow-600 dark:from-yellow-600 dark:to-yellow-700';\n      case 'VALIDATION_ERROR':\n        return 'from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700';\n      case 'TIMEOUT_ERROR':\n        return 'from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700';\n      default:\n        return 'from-red-500 to-red-600 dark:from-red-600 dark:to-red-700';\n    }\n  }, [errorType]);\n\n  // Effect for setting up event listeners\n  useEffect(() => {\n    window.addEventListener('online', handleOnlineChange);\n    window.addEventListener('offline', handleOnlineChange);\n\n    return () => {\n      window.removeEventListener('online', handleOnlineChange);\n      window.removeEventListener('offline', handleOnlineChange);\n    };\n  }, [handleOnlineChange]);\n\n  // Effect for error reporting\n  useEffect(() => {\n    reportApplicationError(error, null, errorId, errorType, retryCount);\n\n    if (onError) {\n      onError(error, errorId, errorType);\n    }\n  }, [error, errorId, errorType, retryCount, onError]);\n\n  // Effect for automatic retry\n  useEffect(() => {\n    const autoRecoverySuggestions = recoverySuggestions.filter((s) => s.auto);\n\n    const suggestion = autoRecoverySuggestions[0];\n    if (suggestion && retryCount < maxRetries) {\n      const delay = Math.min(2000 * Math.pow(1.5, retryCount), 10000); // Progressive delay\n\n      const timer = setTimeout(() => {\n        console.debug(\n          `Auto-recovery attempt ${retryCount + 1}/${maxRetries}: ${suggestion.title}`\n        );\n        setIsRecovering(true);\n\n        try {\n          suggestion.action();\n        } catch (recoveryError) {\n          console.error('Auto-recovery failed:', recoveryError);\n        } finally {\n          setIsRecovering(false);\n        }\n      }, delay);\n\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [recoverySuggestions, autoRetry, retryCount, maxRetries, enableRetry]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-slate-50 to-blue-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 p-4\">\n      <div className=\"max-w-3xl w-full space-y-6\">\n        {/* Main Error Card */}\n        <Card className=\"bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden\">\n          {/* Header */}\n          <div className={`bg-gradient-to-r p-6 ${getGradientColors()}`}>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-full p-3 text-white\">\n                {getErrorIcon()}\n              </div>\n              <div className=\"flex-1\">\n                <h1 className=\"text-2xl font-bold text-white\">\n                  {getErrorTitle()}\n                </h1>\n                <p className=\"text-white/80 mt-1\">{getErrorDescription()}</p>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {isOnline ? (\n                  <Wifi className=\"h-5 w-5 text-green-400\" />\n                ) : (\n                  <WifiOff className=\"h-5 w-5 text-red-400\" />\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 space-y-6\">\n            {/* Auto-recovery status */}\n            {isRecovering && (\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                <div className=\"flex items-center gap-3\">\n                  <RefreshCw className=\"h-5 w-5 text-blue-600 dark:text-blue-400 animate-spin\" />\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">\n                      Attempting Automatic Recovery\n                    </h3>\n                    <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                      Trying to resolve the issue automatically... (Attempt{' '}\n                      {retryCount + 1}/{maxRetries})\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Error Details */}\n            <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h2 className=\"text-sm font-semibold text-slate-900 dark:text-slate-100\">\n                  Error Details\n                </h2>\n                <span className=\"text-xs text-slate-500 dark:text-slate-400\">\n                  ID: {errorId}\n                </span>\n              </div>\n              <p className=\"text-sm text-slate-700 dark:text-slate-300 font-mono break-all\">\n                {error.toString()}\n              </p>\n              {retryCount > 0 && (\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-2\">\n                  Retry attempts: {retryCount}/{maxRetries}\n                </p>\n              )}\n            </div>\n\n            {/* Recovery Suggestions */}\n            {recoverySuggestions.length > 0 && (\n              <div className=\"space-y-3\">\n                <h3 className=\"text-sm font-semibold text-slate-900 dark:text-slate-100\">\n                  Suggested Actions\n                </h3>\n                <div className=\"grid gap-2\">\n                  {recoverySuggestions.map((suggestion) => (\n                    <Button\n                      key={suggestion.id}\n                      onClick={suggestion.action}\n                      variant=\"outline\"\n                      className=\"justify-start h-auto p-4 gap-3\"\n                      disabled={isRecovering}\n                    >\n                      {suggestion.icon}\n                      <div className=\"text-left\">\n                        <div className=\"font-medium\">{suggestion.title}</div>\n                        <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n                          {suggestion.description}\n                        </div>\n                      </div>\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Development Info */}\n            {import.meta.env.DEV && error.stack && (\n              <details className=\"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700\">\n                <summary className=\"text-sm font-semibold text-slate-900 dark:text-slate-100 cursor-pointer mb-2\">\n                  Stack Trace (Development Only)\n                </summary>\n                <pre className=\"text-xs text-slate-600 dark:text-slate-400 overflow-auto max-h-64 whitespace-pre-wrap font-mono\">\n                  {error.stack}\n                </pre>\n              </details>\n            )}\n\n            {/* Main Actions */}\n            <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-slate-200 dark:border-slate-700\">\n              <Button\n                onClick={handleRetry}\n                className=\"flex-1 gap-2\"\n                variant=\"default\"\n                disabled={\n                  isRecovering || retryCount >= maxRetries || !enableRetry\n                }\n              >\n                <RefreshCw className=\"h-4 w-4\" />\n                {isRecovering\n                  ? 'Recovering...'\n                  : retryCount >= maxRetries\n                    ? 'Max Retries Reached'\n                    : 'Try Again'}\n              </Button>\n              <Button\n                onClick={goHome}\n                className=\"flex-1 gap-2\"\n                variant=\"outline\"\n              >\n                <Home className=\"h-4 w-4\" />\n                Go to Dashboard\n              </Button>\n            </div>\n\n            {/* Help Text */}\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                Error ID: {errorId}\n              </p>\n              <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                If this problem persists, please contact the system\n                administrator\n              </p>\n            </div>\n          </div>\n        </Card>\n\n        {/* Auto-retry disabled notice */}\n        {!autoRetry && retryCount >= maxRetries && (\n          <Card className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800\">\n            <div className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <AlertTriangle className=\"h-5 w-5 text-amber-600 dark:text-amber-400\" />\n                <div>\n                  <h3 className=\"text-sm font-semibold text-amber-900 dark:text-amber-100\">\n                    Automatic Retry Disabled\n                  </h3>\n                  <p className=\"text-sm text-amber-700 dark:text-amber-300\">\n                    Maximum retry attempts reached. Please try one of the\n                    suggested actions above.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ErrorBoundaryWrapper.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[1000,1013],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'errorInfo' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"errorInfo"},"fix":{"range":[1012,1040],"text":""},"desc":"Remove unused variable 'errorInfo'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'details' is defined but never used. Allowed unused args must match /^_/u.","line":32,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"details"},"fix":{"range":[1108,1277],"text":""},"desc":"Remove unused variable 'details'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":76,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":20,"suggestions":[{"fix":{"range":[2427,2475],"text":""},"messageId":"removeConsole","data":{"propertyName":"group"},"desc":"Remove the console.group()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":84,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":84,"endColumn":23,"suggestions":[{"fix":{"range":[2730,2749],"text":""},"messageId":"removeConsole","data":{"propertyName":"groupEnd"},"desc":"Remove the console.groupEnd()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":111,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":20,"suggestions":[{"fix":{"range":[3319,3387],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ErrorBoundaryWrapper - React 19 compatible functional error boundary\n * Replaces the class-based ErrorBoundary with react-error-boundary integration\n */\n\nimport React, { useCallback, type ReactNode, type ErrorInfo } from 'react';\nimport { ErrorBoundary, type FallbackProps } from 'react-error-boundary';\nimport { ErrorBoundaryFallback } from './ErrorBoundaryFallback';\nimport {\n  reportApplicationError,\n  categorizeError,\n  generateErrorId,\n  type ErrorType,\n} from '@/utils/error-utils';\n\n/**\n * Props for ErrorBoundaryWrapper component\n */\ninterface ErrorBoundaryWrapperProps {\n  /** Child components to wrap with error boundary */\n  children?: ReactNode;\n  /** Maximum number of retry attempts before disabling auto-retry */\n  maxRetries?: number;\n  /** Enable/disable retry functionality */\n  enableRetry?: boolean;\n  /** Custom fallback component (defaults to ErrorBoundaryFallback) */\n  fallback?: React.ComponentType<FallbackProps>;\n  /** Custom error handler callback */\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n  /** Custom reset handler callback */\n  onReset?: (\n    details:\n      | { reason: 'imperative-api' }\n      | {\n          reason: 'keys';\n          prev: unknown[] | undefined;\n          next: unknown[] | undefined;\n        }\n  ) => void;\n  /** Reset keys - when these change, the error boundary resets */\n  resetKeys?: unknown[];\n  /** Reset on props change */\n  resetOnPropsChange?: boolean;\n  /** Isolate error boundary (double-wrap for extra protection) */\n  isolate?: boolean;\n}\n\n/**\n * Enhanced ErrorBoundary wrapper with comprehensive error handling\n * Provides a functional interface over react-error-boundary with enhanced features\n */\nexport function ErrorBoundaryWrapper({\n  children,\n  maxRetries = 3,\n  enableRetry = true,\n  fallback: CustomFallback,\n  onError,\n  onReset,\n  resetKeys,\n  resetOnPropsChange: _resetOnPropsChange = true,\n  isolate = false,\n}: ErrorBoundaryWrapperProps) {\n  /**\n   * Enhanced error handler that maintains compatibility with react-error-boundary\n   */\n  const handleError = useCallback(\n    (error: Error, info: ErrorInfo) => {\n      // Generate error metadata\n      const errorId = generateErrorId();\n      const errorType = categorizeError(error);\n\n      // Report error using the centralized error reporting system\n      reportApplicationError(error, info, errorId, errorType, 0);\n\n      // Log error details for debugging\n      console.group(` ErrorBoundary: ${errorType}`);\n      console.error('Error:', error);\n      console.error('Error ID:', errorId);\n      console.error(\n        'Component Stack:',\n        info.componentStack || 'No component stack available'\n      );\n      console.error('Error Type:', errorType);\n      console.groupEnd();\n\n      // Call custom error handler if provided\n      if (onError) {\n        try {\n          onError(error, info);\n        } catch (handlerError) {\n          console.error('Error in custom error handler:', handlerError);\n        }\n      }\n    },\n    [onError]\n  );\n\n  /**\n   * Enhanced reset handler\n   */\n  const handleReset = useCallback(\n    (\n      details:\n        | { reason: 'imperative-api'; args: unknown[] }\n        | {\n            reason: 'keys';\n            prev: unknown[] | undefined;\n            next: unknown[] | undefined;\n          }\n    ) => {\n      console.debug(` ErrorBoundary Reset: ${details.reason}`, details);\n\n      // Call custom reset handler if provided\n      if (onReset) {\n        try {\n          // Convert the details to match our interface\n          const convertedDetails =\n            details.reason === 'imperative-api'\n              ? { reason: 'imperative-api' as const }\n              : {\n                  reason: 'keys' as const,\n                  prev: details.prev,\n                  next: details.next,\n                };\n          onReset(convertedDetails);\n        } catch (resetError) {\n          console.error('Error in custom reset handler:', resetError);\n        }\n      }\n    },\n    [onReset]\n  );\n\n  /**\n   * Fallback component renderer\n   */\n  const renderFallback = useCallback(\n    (props: FallbackProps) => {\n      const FallbackComponent = CustomFallback || ErrorBoundaryFallback;\n\n      // Create a wrapper for the onError prop to match ErrorBoundaryFallback's expected signature\n      const fallbackOnError = (\n        _error: Error,\n        _errorId: string,\n        _errorType: ErrorType\n      ) => {\n        // We don't need to do anything here as the error is already handled by handleError\n        // This is just to satisfy the ErrorBoundaryFallback component's interface\n      };\n\n      return (\n        <FallbackComponent\n          {...props}\n          maxRetries={maxRetries}\n          enableRetry={enableRetry}\n          onError={fallbackOnError}\n        />\n      );\n    },\n    [CustomFallback, maxRetries, enableRetry]\n  );\n\n  // If isolation is enabled, wrap in an additional error boundary\n  if (isolate) {\n    return (\n      <ErrorBoundary\n        FallbackComponent={renderFallback}\n        onError={handleError}\n        onReset={handleReset}\n        resetKeys={resetKeys || []}\n        // Note: react-error-boundary v6 does not support resetOnPropsChange; kept for wrapper API compatibility\n      >\n        <ErrorBoundary\n          FallbackComponent={renderFallback}\n          onError={handleError}\n          onReset={handleReset}\n          resetKeys={resetKeys || []}\n        >\n          {children}\n        </ErrorBoundary>\n      </ErrorBoundary>\n    );\n  }\n\n  return (\n    <ErrorBoundary\n      FallbackComponent={renderFallback}\n      onError={handleError}\n      onReset={handleReset}\n      resetKeys={resetKeys || []}\n      // Note: react-error-boundary v6 does not support resetOnPropsChange; kept for wrapper API compatibility\n    >\n      {children}\n    </ErrorBoundary>\n  );\n}\n\n/**\n * Higher-order component version for class component compatibility\n */\nexport function withErrorBoundary<P extends object>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps?: Omit<ErrorBoundaryWrapperProps, 'children'>\n) {\n  const WrappedComponent = React.forwardRef<unknown, P>((props, ref) => {\n    const componentProps = { ...props } as P & { ref?: unknown };\n    if (ref) {\n      componentProps.ref = ref;\n    }\n\n    return (\n      <ErrorBoundaryWrapper {...(errorBoundaryProps || {})}>\n        <Component {...componentProps} />\n      </ErrorBoundaryWrapper>\n    );\n  });\n\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n}\n\n/**\n * Hook for manual error boundary triggering\n */\nexport function useErrorBoundary() {\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const resetError = React.useCallback(() => {\n    setError(null);\n  }, []);\n\n  const captureError = React.useCallback((error: Error) => {\n    setError(error);\n  }, []);\n\n  React.useEffect(() => {\n    if (error) {\n      throw error;\n    }\n  }, [error]);\n\n  return {\n    captureError,\n    resetError,\n  };\n}\n\n// Export the ErrorBoundary from react-error-boundary for convenience\nexport { ErrorBoundary } from 'react-error-boundary';\n\n// Default export\nexport default ErrorBoundaryWrapper;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\FormError.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\FormField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\GlobalErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ImportData.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\Import\\EnhancedImportManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":527,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":527,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useRef } from 'react';\nimport Papa from 'papaparse';\nimport * as XLSX from 'xlsx';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport {\n  Upload,\n  CheckCircle,\n  AlertCircle,\n  Info,\n  Loader2,\n  FileText,\n  Users,\n  BookOpen,\n  Eye,\n  FileSpreadsheet,\n  FileDown,\n  ArrowRight,\n  ArrowLeft,\n  RefreshCw,\n  Database,\n  Zap,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport axios from 'axios';\nimport { getErrorMessage } from '@/utils/errorHandling';\n\nconst API_BASE_URL = `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/api`;\n\ninterface ImportResult {\n  success: boolean;\n  totalRecords: number;\n  importedRecords: number;\n  skippedRecords: number;\n  errorRecords: number;\n  errors: string[];\n}\n\ninterface FieldMapping {\n  source: string;\n  target: string;\n  required: boolean;\n}\n\ninterface PreviewData {\n  headers: string[];\n  rows: Record<string, unknown>[];\n  totalRows: number;\n}\n\nexport default function EnhancedImportManager() {\n  const [activeTab, setActiveTab] = useState('students');\n  const [file, setFile] = useState<File | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState<ImportResult | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [previewData, setPreviewData] = useState<PreviewData | null>(null);\n  const [fieldMapping, setFieldMapping] = useState<FieldMapping[]>([]);\n  const [importProgress, setImportProgress] = useState(0);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const parseFile = useCallback(\n    (\n      file: File\n    ): Promise<{\n      headers: string[];\n      rows: Record<string, unknown>[];\n      totalRows: number;\n    }> => {\n      return new Promise((resolve, reject) => {\n        const fileExtension = file.name.split('.').pop()?.toLowerCase();\n\n        if (fileExtension === 'csv') {\n          Papa.parse(file, {\n            header: true,\n            preview: 10,\n            complete: (results) => {\n              if (results.errors.length > 0) {\n                const firstError = results.errors[0];\n                reject(\n                  new Error(\n                    `CSV parsing error: ${firstError?.message || 'Unknown error'}`\n                  )\n                );\n              } else {\n                const headers = results.meta.fields || [];\n                const rows = results.data as Array<Record<string, unknown>>;\n                resolve({\n                  headers,\n                  rows: rows.slice(0, 10),\n                  totalRows: results.data.length,\n                });\n              }\n            },\n            error: (error) => reject(error),\n          });\n        } else if (['xlsx', 'xls'].includes(fileExtension || '')) {\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            try {\n              const result = e.target?.result;\n              if (!result) {\n                reject(new Error('Failed to read file'));\n                return;\n              }\n              const data = new Uint8Array(result as ArrayBuffer);\n              const workbook = XLSX.read(data, { type: 'array' });\n              const sheetName = workbook.SheetNames[0];\n              if (!sheetName) {\n                reject(new Error('No sheets found in Excel file'));\n                return;\n              }\n              const worksheet = workbook.Sheets[sheetName];\n              const jsonData: unknown[][] = XLSX.utils.sheet_to_json(\n                worksheet,\n                { header: 1 }\n              ) as unknown[][];\n\n              if (jsonData.length === 0) {\n                reject(new Error('Excel file is empty'));\n                return;\n              }\n\n              const headers = (jsonData[0] as string[]) || [];\n              const dataRows = jsonData.slice(1) as unknown[][];\n              const objectRows = dataRows.map((row: unknown[]) => {\n                const obj: Record<string, unknown> = {};\n                headers.forEach((header, index) => {\n                  obj[header] = row[index] || '';\n                });\n                return obj;\n              });\n\n              resolve({\n                headers,\n                rows: objectRows.slice(0, 10),\n                totalRows: dataRows.length,\n              });\n            } catch (error) {\n              reject(\n                new Error(\n                  `Excel parsing error: ${error instanceof Error ? error.message : 'Unknown error'}`\n                )\n              );\n            }\n          };\n          reader.readAsArrayBuffer(file);\n        } else {\n          reject(\n            new Error(\n              'Unsupported file format. Please use CSV, XLS, or XLSX files.'\n            )\n          );\n        }\n      });\n    },\n    []\n  );\n\n  const handleFileChange = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) {\n      return;\n    }\n\n    setFile(selectedFile);\n    setResult(null);\n    setPreviewData(null);\n    setFieldMapping([]);\n\n    try {\n      setLoading(true);\n      const data = await parseFile(selectedFile);\n      setPreviewData(data);\n\n      // Auto-detect field mapping based on headers\n      const detectedMapping = detectFieldMapping(data.headers, activeTab);\n      setFieldMapping(detectedMapping);\n      setShowPreview(true);\n    } catch (error) {\n      toast.error(`Failed to parse file: ${(error as Error).message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const detectFieldMapping = (\n    headers: string[],\n    type: string\n  ): FieldMapping[] => {\n    const mapping: FieldMapping[] = [];\n\n    if (type === 'students') {\n      // Map to recognize SHJCS SCANLOGS - SHJCS USERS.csv structure\n      const fieldMap: Record<string, { target: string; required: boolean }> = {\n        'user id': { target: 'student_id', required: true }, // User ID is the barcode!\n        surname: { target: 'last_name', required: true },\n        'first name': { target: 'first_name', required: true },\n        'grade level': { target: 'grade_level', required: false },\n        section: { target: 'section', required: false },\n        designation: { target: 'designation', required: false },\n        sex: { target: 'sex', required: false },\n        email: { target: 'email', required: false },\n        // Also support alternative column names\n        'student id': { target: 'student_id', required: true },\n        studentid: { target: 'student_id', required: true },\n        lastname: { target: 'last_name', required: true },\n        'last name': { target: 'last_name', required: true },\n        firstname: { target: 'first_name', required: true },\n        gradelevel: { target: 'grade_level', required: false },\n        grade: { target: 'grade_level', required: false },\n        barcode: { target: 'barcode', required: false },\n      };\n\n      headers.forEach((header) => {\n        const normalized = header.toLowerCase().trim();\n        const fieldConfig = fieldMap[normalized];\n\n        if (fieldConfig) {\n          mapping.push({\n            source: header, // Keep original header name\n            target: fieldConfig.target,\n            required: fieldConfig.required,\n          });\n        }\n      });\n\n      return mapping;\n    } else if (type === 'books') {\n      // Map to recognize SHJCS Bibliography - BOOK COLLECTIONS.csv structure\n      const fieldMap: Record<string, { target: string; required: boolean }> = {\n        barcode: { target: 'accession_no', required: true }, // This is the book barcode\n        title: { target: 'title', required: true },\n        author: { target: 'author', required: true },\n        'call number': { target: 'location', required: false },\n        isbn: { target: 'isbn', required: false },\n        year: { target: 'year', required: false },\n        edition: { target: 'edition', required: false },\n        publisher: { target: 'publisher', required: false },\n        publication: { target: 'publisher', required: false },\n        'collection code': { target: 'category', required: false },\n        'physical description': { target: 'pages', required: false },\n        price: { target: 'cost_price', required: false },\n        'note area': { target: 'remarks', required: false },\n        // Also support alternative column names\n        'accession no': { target: 'accession_no', required: true },\n        accessionno: { target: 'accession_no', required: true },\n        category: { target: 'category', required: false },\n      };\n\n      headers.forEach((header) => {\n        const normalized = header.toLowerCase().trim();\n        const fieldConfig = fieldMap[normalized];\n\n        if (fieldConfig) {\n          mapping.push({\n            source: header, // Keep original header name\n            target: fieldConfig.target,\n            required: fieldConfig.required,\n          });\n        }\n      });\n\n      return mapping;\n    }\n\n    return [];\n  };\n\n  const applyFieldMapping = (\n    rows: Record<string, unknown>[]\n  ): Record<string, unknown>[] => {\n    return rows.map((row) => {\n      const mapped: Record<string, unknown> = {};\n\n      fieldMapping.forEach((mapping) => {\n        const sourceValue = row[mapping.source];\n        if (sourceValue !== undefined && sourceValue !== '') {\n          mapped[mapping.target] = sourceValue;\n        }\n      });\n\n      // Special handling for name field\n      if (\n        mapped.name &&\n        !mapped.firstName &&\n        !mapped.lastName &&\n        typeof mapped.name === 'string'\n      ) {\n        const nameParts = mapped.name.split(',').map((p: string) => p.trim());\n        if (nameParts.length >= 2) {\n          mapped.lastName = nameParts[0];\n          mapped.firstName = nameParts[1];\n        } else if (nameParts.length === 1) {\n          const spaceParts = nameParts[0].split(' ');\n          if (spaceParts.length >= 2) {\n            mapped.firstName = spaceParts[0];\n            mapped.lastName = spaceParts.slice(1).join(' ');\n          } else {\n            mapped.firstName = nameParts[0];\n          }\n        }\n      }\n\n      return mapped;\n    });\n  };\n\n  const handleImport = async () => {\n    if (!file || !fieldMapping.length) {\n      toast.error('Please select a file and configure field mapping');\n      return;\n    }\n\n    const token = localStorage.getItem('clms_token');\n    if (!token) {\n      toast.error('Please login first to import data');\n      return;\n    }\n\n    setLoading(true);\n    setImportProgress(0);\n    setResult(null);\n\n    try {\n      // Parse the complete file\n      const completeData = await parseFile(file);\n      applyFieldMapping(completeData.rows);\n\n      const formData = new FormData();\n      formData.append('file', file);\n\n      let endpoint = '/import/students';\n      if (activeTab === 'books') {\n        endpoint = '/import/books/enhanced';\n        const headers = previewData?.headers || [];\n        const mappings = [] as {\n          sourceField: string;\n          targetField: string;\n          required?: boolean;\n        }[];\n        const pick = (label: string) =>\n          headers.find((h) => h.trim().toLowerCase() === label.toLowerCase());\n        const pushMap = (\n          src: string | undefined,\n          target: string,\n          required?: boolean\n        ) => {\n          if (src)\n            mappings.push({ sourceField: src, targetField: target, required });\n        };\n        pushMap(pick('Barcode'), 'accession_no', true);\n        pushMap(pick('Title'), 'title', true);\n        pushMap(pick('Author'), 'author', true);\n        pushMap(pick('ISBN'), 'isbn');\n        pushMap(pick('Publisher'), 'publisher');\n        pushMap(pick('Collection Code'), 'category');\n        pushMap(pick('Year'), 'year');\n        formData.append('fieldMappings', JSON.stringify(mappings));\n        formData.append('dryRun', 'false');\n      } else {\n        // students legacy import\n        formData.append('mapping', JSON.stringify(fieldMapping));\n      }\n\n      const response = await axios.post(\n        `${API_BASE_URL}${endpoint}` as string,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            Authorization: `Bearer ${token}`,\n          },\n          onUploadProgress: (progressEvent) => {\n            const progress = Math.round(\n              (progressEvent.loaded * 100) / progressEvent.total!\n            );\n            setImportProgress(progress);\n          },\n        }\n      );\n\n      setResult(response.data.data);\n      setFile(null);\n      setPreviewData(null);\n      setFieldMapping([]);\n      setShowPreview(false);\n\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n\n      toast.success(\n        `Import completed: ${response.data.data.importedRecords} ${activeTab} imported`\n      );\n    } catch (err: unknown) {\n      toast.error(getErrorMessage(err, 'Failed to import data'));\n    } finally {\n      setLoading(false);\n      setImportProgress(0);\n    }\n  };\n\n  const downloadTemplate = async (\n    type: 'students' | 'books',\n    format: 'csv' | 'xlsx'\n  ) => {\n    const token = localStorage.getItem('clms_token');\n    if (!token) {\n      toast.error('Please login first to download templates');\n      return;\n    }\n\n    try {\n      let data: string;\n      let filename: string;\n      let mimeType: string;\n\n      if (type === 'students') {\n        const headers = ['name', 'gradeLevel', 'section', 'email', 'phone'];\n        const sampleData = [\n          ['Doe, John', '10', 'A', 'john.doe@school.edu', '555-0123'],\n          ['Smith, Jane', '11', 'B', 'jane.smith@school.edu', '555-0124'],\n          ['Johnson, Mike', '9', 'A', 'mike.johnson@school.edu', '555-0125'],\n        ];\n\n        data = [headers, ...sampleData].map((row) => row.join(',')).join('\\n');\n        filename = `students-template.${format}`;\n        mimeType =\n          format === 'csv'\n            ? 'text/csv'\n            : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n\n        if (format === 'xlsx') {\n          const worksheet = XLSX.utils.aoa_to_sheet([headers, ...sampleData]);\n          const workbook = XLSX.utils.book_new();\n          XLSX.utils.book_append_sheet(workbook, worksheet, 'Students');\n          data = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\n        }\n      } else {\n        const headers = [\n          'accessionNo',\n          'title',\n          'author',\n          'isbn',\n          'category',\n          'publisher',\n          'year',\n        ];\n        const sampleData = [\n          [\n            'B001',\n            'To Kill a Mockingbird',\n            'Harper Lee',\n            '9780061120084',\n            'Fiction',\n            'J.B. Lippincott & Co.',\n            '1960',\n          ],\n          [\n            'B002',\n            '1984',\n            'George Orwell',\n            '9780451524935',\n            'Fiction',\n            'Secker & Warburg',\n            '1949',\n          ],\n          [\n            'B003',\n            'The Great Gatsby',\n            'F. Scott Fitzgerald',\n            '9780743273565',\n            'Fiction',\n            \"Charles Scribner's Sons\",\n            '1925',\n          ],\n        ];\n\n        data = [headers, ...sampleData].map((row) => row.join(',')).join('\\n');\n        filename = `books-template.${format}`;\n        mimeType =\n          format === 'csv'\n            ? 'text/csv'\n            : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n\n        if (format === 'xlsx') {\n          const worksheet = XLSX.utils.aoa_to_sheet([headers, ...sampleData]);\n          const workbook = XLSX.utils.book_new();\n          XLSX.utils.book_append_sheet(workbook, worksheet, 'Books');\n          data = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\n        }\n      }\n\n      const blob = new Blob([data], { type: mimeType });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n\n      toast.success(`${format.toUpperCase()} template downloaded`);\n    } catch (err) {\n      toast.error('Failed to download template');\n    }\n  };\n\n  const renderPreview = () => {\n    if (!previewData) {\n      return null;\n    }\n\n    return (\n      <Dialog open={showPreview} onOpenChange={setShowPreview}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Eye className=\"h-5 w-5\" />\n              File Preview - {file?.name}\n            </DialogTitle>\n            <DialogDescription>\n              Preview of first 10 rows from {previewData.totalRows} total\n              records\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            {/* File Info */}\n            <div className=\"flex items-center gap-4 p-4 bg-gray-50 rounded-lg\">\n              <FileText className=\"h-5 w-5 text-gray-600\" />\n              <div>\n                <p className=\"font-medium\">{file?.name}</p>\n                <p className=\"text-sm text-gray-600\">\n                  {previewData.totalRows} rows  {previewData.headers.length}{' '}\n                  columns\n                </p>\n              </div>\n            </div>\n\n            {/* Field Mapping */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base\">\n                  Field Mapping Configuration\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {fieldMapping.length === 0 ? (\n                    <Alert>\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertTitle>No fields detected</AlertTitle>\n                      <AlertDescription>\n                        Please ensure your file contains recognizable column\n                        headers.\n                      </AlertDescription>\n                    </Alert>\n                  ) : (\n                    fieldMapping.map((mapping, index) => (\n                      <div\n                        key={index}\n                        className=\"flex items-center gap-2 p-2 border rounded\"\n                      >\n                        <ArrowRight className=\"h-4 w-4 text-gray-400\" />\n                        <span className=\"font-mono text-sm bg-gray-100 px-2 py-1 rounded\">\n                          {mapping.source}\n                        </span>\n                        <span className=\"text-gray-500\"></span>\n                        <span className=\"font-mono text-sm bg-blue-100 px-2 py-1 rounded\">\n                          {mapping.target}\n                        </span>\n                        {mapping.required && (\n                          <Badge variant=\"destructive\" className=\"text-xs\">\n                            Required\n                          </Badge>\n                        )}\n                      </div>\n                    ))\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Data Preview */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base\">Data Preview</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"overflow-x-auto\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        {previewData.headers.map((header, index) => (\n                          <TableHead key={index} className=\"font-mono text-xs\">\n                            {header}\n                          </TableHead>\n                        ))}\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {previewData.rows.map((row, rowIndex) => (\n                        <TableRow key={rowIndex}>\n                          {previewData.headers.map((header, colIndex) => (\n                            <TableCell\n                              key={colIndex}\n                              className=\"font-mono text-xs\"\n                            >\n                              {String(\n                                (row as Record<string, unknown>)[header] ?? '-'\n                              )}\n                            </TableCell>\n                          ))}\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"flex gap-2 pt-4\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowPreview(false)}\n              className=\"flex-1\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back\n            </Button>\n            <Button\n              onClick={handleImport}\n              disabled={loading || fieldMapping.length === 0}\n              className=\"flex-1\"\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Importing...\n                </>\n              ) : (\n                <>\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Import {activeTab === 'students' ? 'Students' : 'Books'}\n                </>\n              )}\n            </Button>\n          </div>\n\n          {loading && (\n            <div className=\"space-y-2\">\n              <Progress value={importProgress} />\n              <p className=\"text-sm text-center text-gray-600\">\n                {importProgress}% complete\n              </p>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    );\n  };\n\n  const renderImportResult = () => {\n    if (!result) {\n      return null;\n    }\n\n    return (\n      <Card className=\"mt-6\">\n        <CardContent className=\"pt-6 space-y-4\">\n          <div className=\"flex items-center gap-2 text-lg font-semibold\">\n            <Database className=\"h-5 w-5\" />\n            Import Results\n          </div>\n\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <Badge variant=\"secondary\" className=\"justify-center py-2\">\n              <Info className=\"h-4 w-4 mr-1\" />\n              Total: {result.totalRecords}\n            </Badge>\n            <Badge className=\"justify-center py-2 bg-green-500 hover:bg-green-600\">\n              <CheckCircle className=\"h-4 w-4 mr-1\" />\n              Imported: {result.importedRecords}\n            </Badge>\n            <Badge\n              variant=\"outline\"\n              className=\"justify-center py-2 border-yellow-500 text-yellow-600\"\n            >\n              <AlertCircle className=\"h-4 w-4 mr-1\" />\n              Skipped: {result.skippedRecords}\n            </Badge>\n            <Badge variant=\"destructive\" className=\"justify-center py-2\">\n              <AlertCircle className=\"h-4 w-4 mr-1\" />\n              Errors: {result.errorRecords}\n            </Badge>\n          </div>\n\n          {result.errors.length > 0 && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>Error Details ({result.errors.length})</AlertTitle>\n              <AlertDescription>\n                <div className=\"mt-2 max-h-40 overflow-y-auto space-y-1\">\n                  {result.errors.slice(0, 10).map((error, index) => (\n                    <div key={index} className=\"text-sm\">\n                       {error}\n                    </div>\n                  ))}\n                  {result.errors.length > 10 && (\n                    <div className=\"text-sm italic\">\n                      ... and {result.errors.length - 10} more\n                    </div>\n                  )}\n                </div>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setResult(null)}\n              className=\"flex-1\"\n            >\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Import Another File\n            </Button>\n            <Button onClick={() => window.location.reload()} className=\"flex-1\">\n              <Zap className=\"h-4 w-4 mr-2\" />\n              Start Fresh\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-3xl font-bold tracking-tight\">\n          Enhanced Import Manager\n        </h2>\n        <p className=\"text-muted-foreground\">\n          Import students and books from CSV or Excel files with intelligent\n          field mapping\n        </p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full md:w-auto grid-cols-2\">\n          <TabsTrigger value=\"students\">\n            <Users className=\"h-4 w-4 mr-2\" />\n            Students\n          </TabsTrigger>\n          <TabsTrigger value=\"books\">\n            <BookOpen className=\"h-4 w-4 mr-2\" />\n            Books\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"students\" className=\"space-y-4 mt-6\">\n          <Alert>\n            <Info className=\"h-4 w-4\" />\n            <AlertTitle>Enhanced Student Import</AlertTitle>\n            <AlertDescription>\n              <strong>Supported formats:</strong> CSV, XLS, XLSX\n              <br />\n              <strong>Auto-detects:</strong> Name format, field mapping, data\n              types\n              <br />\n              <strong>Template formats:</strong> Standard (name, grade, section)\n              or Detailed (separate first/last names)\n            </AlertDescription>\n          </Alert>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileSpreadsheet className=\"h-5 w-5\" />\n                Import Configuration\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {/* Template Downloads */}\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Download Templates:</p>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => downloadTemplate('students', 'csv')}\n                  >\n                    <FileDown className=\"h-4 w-4 mr-2\" />\n                    CSV Template\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => downloadTemplate('students', 'xlsx')}\n                  >\n                    <FileDown className=\"h-4 w-4 mr-2\" />\n                    Excel Template\n                  </Button>\n                </div>\n              </div>\n\n              {/* File Upload */}\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Select File:</p>\n                <input\n                  ref={fileInputRef}\n                  accept=\".csv,.xlsx,.xls\"\n                  style={{ display: 'none' }}\n                  id=\"student-file-upload\"\n                  type=\"file\"\n                  onChange={handleFileChange}\n                />\n                <label htmlFor=\"student-file-upload\">\n                  <Button variant=\"secondary\" asChild disabled={loading}>\n                    <span className=\"cursor-pointer\">\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Select CSV or Excel File\n                    </span>\n                  </Button>\n                </label>\n                {file && (\n                  <p className=\"text-sm text-muted-foreground\">\n                    Selected: {file.name} ({(file.size / 1024).toFixed(1)} KB)\n                  </p>\n                )}\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => setShowPreview(true)}\n                  disabled={!file || !previewData}\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                >\n                  <Eye className=\"h-4 w-4 mr-2\" />\n                  Preview & Configure\n                </Button>\n                <Button\n                  onClick={handleImport}\n                  disabled={!file || !fieldMapping.length || loading}\n                  className=\"flex-1\"\n                >\n                  {loading ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Importing...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Import Students\n                    </>\n                  )}\n                </Button>\n              </div>\n\n              {loading && (\n                <div className=\"space-y-2\">\n                  <Progress value={importProgress} />\n                  <p className=\"text-sm text-center text-gray-600\">\n                    Processing: {importProgress}%\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {renderImportResult()}\n        </TabsContent>\n\n        <TabsContent value=\"books\" className=\"space-y-4 mt-6\">\n          <Alert>\n            <Info className=\"h-4 w-4\" />\n            <AlertTitle>Enhanced Book Import</AlertTitle>\n            <AlertDescription>\n              <strong>Supported formats:</strong> CSV, XLS, XLSX\n              <br />\n              <strong>Auto-detects:</strong> Field mapping, data types,\n              categories\n              <br />\n              <strong>Template formats:</strong> Basic (accession, title,\n              author) or Detailed (complete metadata)\n            </AlertDescription>\n          </Alert>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileSpreadsheet className=\"h-5 w-5\" />\n                Import Configuration\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {/* Template Downloads */}\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Download Templates:</p>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => downloadTemplate('books', 'csv')}\n                  >\n                    <FileDown className=\"h-4 w-4 mr-2\" />\n                    CSV Template\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => downloadTemplate('books', 'xlsx')}\n                  >\n                    <FileDown className=\"h-4 w-4 mr-2\" />\n                    Excel Template\n                  </Button>\n                </div>\n              </div>\n\n              {/* File Upload */}\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Select File:</p>\n                <input\n                  accept=\".csv,.xlsx,.xls\"\n                  style={{ display: 'none' }}\n                  id=\"book-file-upload\"\n                  type=\"file\"\n                  onChange={handleFileChange}\n                />\n                <label htmlFor=\"book-file-upload\">\n                  <Button variant=\"secondary\" asChild disabled={loading}>\n                    <span className=\"cursor-pointer\">\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Select CSV or Excel File\n                    </span>\n                  </Button>\n                </label>\n                {file && (\n                  <p className=\"text-sm text-muted-foreground\">\n                    Selected: {file.name} ({(file.size / 1024).toFixed(1)} KB)\n                  </p>\n                )}\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => setShowPreview(true)}\n                  disabled={!file || !previewData}\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                >\n                  <Eye className=\"h-4 w-4 mr-2\" />\n                  Preview & Configure\n                </Button>\n                <Button\n                  onClick={handleImport}\n                  disabled={!file || !fieldMapping.length || loading}\n                  className=\"flex-1\"\n                >\n                  {loading ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Importing...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Import Books\n                    </>\n                  )}\n                </Button>\n              </div>\n\n              {loading && (\n                <div className=\"space-y-2\">\n                  <Progress value={importProgress} />\n                  <p className=\"text-sm text-center text-gray-600\">\n                    Processing: {importProgress}%\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {renderImportResult()}\n        </TabsContent>\n      </Tabs>\n\n      {renderPreview()}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\LoadingStates.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\NotificationCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\NotificationPreferences.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\OptimizedLazyLoad.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":359,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":359,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":360,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":360,"endColumn":20,"suggestions":[{"fix":{"range":[9003,9055],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Suspense, lazy, type ComponentType } from 'react';\nimport { Loader2 } from 'lucide-react';\n\ninterface LazyLoadProps {\n  loader: () => Promise<{ default: ComponentType<Record<string, unknown>> }>;\n  fallback?: React.ReactNode;\n  error?: React.ReactNode;\n  delay?: number;\n  className?: string;\n}\n\ninterface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  message?: string;\n  className?: string;\n}\n\nexport function LoadingSpinner({\n  size = 'md',\n  message = 'Loading...',\n  className = '',\n}: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    md: 'w-6 h-6',\n    lg: 'w-8 h-8',\n  };\n\n  return (\n    <div className={`flex items-center justify-center p-4 ${className}`}>\n      <div className=\"flex flex-col items-center space-y-2\">\n        <Loader2 className={`animate-spin ${sizeClasses[size]} text-primary`} />\n        <span className=\"text-sm text-muted-foreground\">{message}</span>\n      </div>\n    </div>\n  );\n}\n\nexport function ErrorFallback({\n  message = 'Failed to load component',\n  onRetry,\n}: {\n  message?: string;\n  onRetry?: () => void;\n}) {\n  return (\n    <div className=\"flex items-center justify-center p-4\">\n      <div className=\"text-center\">\n        <div className=\"text-red-500 mb-2\"></div>\n        <p className=\"text-sm text-muted-foreground mb-2\">{message}</p>\n        {onRetry && (\n          <button\n            onClick={onRetry}\n            className=\"px-3 py-1 text-xs bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors\"\n          >\n            Retry\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nclass ErrorBoundary extends React.Component<\n  { children: React.ReactNode; fallback?: React.ReactNode },\n  { hasError: boolean; error?: Error }\n> {\n  constructor(props: {\n    children: React.ReactNode;\n    fallback?: React.ReactNode;\n  }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  override componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('LazyLoad Error Boundary:', error, errorInfo);\n  }\n\n  override render() {\n    if (this.state.hasError) {\n      const errorMessage = this.state.error?.message;\n      return (\n        this.props.fallback || (\n          <ErrorFallback {...(errorMessage && { message: errorMessage })} />\n        )\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport function OptimizedLazyLoad({\n  loader,\n  fallback,\n  error,\n  delay = 200,\n  className = '',\n}: LazyLoadProps) {\n  const LazyComponent = lazy(() => {\n    return loader().catch((err) => {\n      console.error('Failed to load component:', err);\n      const fallbackNode = React.isValidElement(error) ? (\n        error\n      ) : (\n        <ErrorFallback\n          message={\n            typeof error === 'string' ? error : 'Failed to load component'\n          }\n        />\n      );\n      return { default: () => fallbackNode };\n    });\n  });\n\n  const [showFallback, setShowFallback] = React.useState(false);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setShowFallback(true);\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [delay]);\n\n  const defaultFallback = (\n    <LoadingSpinner\n      size=\"lg\"\n      message=\"Loading component...\"\n      className={className}\n    />\n  );\n\n  const normalizedFallback = React.isValidElement(error) ? (\n    error\n  ) : error ? (\n    <ErrorFallback\n      message={typeof error === 'string' ? error : 'Failed to load component'}\n    />\n  ) : undefined;\n\n  return (\n    <ErrorBoundary fallback={normalizedFallback}>\n      <Suspense\n        fallback={\n          showFallback ? (\n            fallback || defaultFallback\n          ) : (\n            <div className={className} />\n          )\n        }\n      >\n        <LazyComponent />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n\n// Preload utilities\nexport function preloadComponent(\n  loader: () => Promise<{ default: ComponentType<Record<string, unknown>> }>\n) {\n  // Start loading the component in the background\n  loader().catch(() => {\n    // Ignore errors during preloading\n  });\n}\n\n// Intersection Observer for lazy loading\nexport function useIntersectionObserver(\n  ref: React.RefObject<Element | null>,\n  options: IntersectionObserverInit = {}\n) {\n  const [isIntersecting, setIsIntersecting] = React.useState(false);\n\n  React.useEffect(() => {\n    const element = ref.current;\n    if (!element) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry) {\n          setIsIntersecting(entry.isIntersecting);\n        }\n      },\n      {\n        threshold: 0.1,\n        rootMargin: '50px',\n        ...options,\n      }\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(element);\n    };\n  }, [ref, options.threshold, options.rootMargin]);\n\n  return isIntersecting;\n}\n\n// Hook for lazy loading components when they come into view\nexport function useLazyLoad(\n  loader: () => Promise<{ default: ComponentType<Record<string, unknown>> }>,\n  options: IntersectionObserverInit = {}\n) {\n  const [Component, setComponent] = React.useState<ComponentType<\n    Record<string, unknown>\n  > | null>(null);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const isIntersecting = useIntersectionObserver(ref, options);\n\n  React.useEffect(() => {\n    if (isIntersecting && !Component && !loading) {\n      setLoading(true);\n      loader()\n        .then(({ default: LoadedComponent }) => {\n          setComponent(() => LoadedComponent);\n          setError(null);\n        })\n        .catch((err) => {\n          setError(err);\n          setComponent(null);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }\n  }, [isIntersecting, loader, Component, loading]);\n\n  return { Component, loading, error, ref };\n}\n\n// Component for lazy loading with intersection observer\nexport function LazyLoadOnIntersection({\n  loader,\n  fallback,\n  error,\n  className = '',\n}: Omit<LazyLoadProps, 'delay'> & { className?: string }) {\n  const { Component, loading, error: loadError, ref } = useLazyLoad(loader);\n\n  if (loading) {\n    return (\n      <div ref={ref} className={className}>\n        {fallback || <LoadingSpinner size=\"md\" />}\n      </div>\n    );\n  }\n\n  if (loadError) {\n    return (\n      <div ref={ref} className={className}>\n        {error || <ErrorFallback message={loadError.message} />}\n      </div>\n    );\n  }\n\n  if (Component) {\n    return <Component />;\n  }\n\n  return <div ref={ref} className={className} />;\n}\n\n// Resource hint utilities\nexport function addPrefetchLink(href: string) {\n  const link = document.createElement('link');\n  link.rel = 'prefetch';\n  link.href = href;\n  document.head.appendChild(link);\n}\n\nexport function addPreloadLink(href: string, as: string) {\n  const link = document.createElement('link');\n  link.rel = 'preload';\n  link.href = href;\n  link.as = as;\n  document.head.appendChild(link);\n}\n\n// Image lazy loading component\nexport function LazyImage({\n  src,\n  alt,\n  className = '',\n  placeholder = '/placeholder.svg',\n  ...props\n}: React.ImgHTMLAttributes<HTMLImageElement> & { placeholder?: string }) {\n  const [isLoaded, setIsLoaded] = React.useState(false);\n  const [isInView, setIsInView] = React.useState(false);\n  const imgRef = React.useRef<HTMLImageElement>(null);\n\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry && entry.isIntersecting) {\n          setIsInView(true);\n          observer.disconnect();\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  return (\n    <div className={`relative ${className}`}>\n      <img\n        ref={imgRef}\n        src={isInView ? src : placeholder}\n        alt={alt}\n        className={`transition-opacity duration-300 ${\n          isLoaded ? 'opacity-100' : 'opacity-70'\n        } ${className}`}\n        onLoad={() => setIsLoaded(true)}\n        loading=\"lazy\"\n        {...props}\n      />\n    </div>\n  );\n}\n\n// Bundle size monitoring\nexport function useBundleSizeMonitor() {\n  const [bundleSize, setBundleSize] = React.useState<number | null>(null);\n\n  React.useEffect(() => {\n    // Monitor performance entries for bundle loading\n    const observer = new PerformanceObserver((list) => {\n      const entries = list.getEntries();\n      for (const entry of entries) {\n        if (entry.name.includes('chunk') || entry.name.includes('bundle')) {\n          const resource = entry as PerformanceResourceTiming;\n          if (resource.transferSize) {\n            setBundleSize((prev) => (prev || 0) + resource.transferSize);\n          }\n        }\n      }\n    });\n\n    try {\n      observer.observe({ entryTypes: ['resource'] });\n    } catch (error) {\n      console.debug('Performance observer not supported');\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  return bundleSize;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\PerformanceMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\RouteErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\SessionTimeoutWarning.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\SkeletonLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\SubmitButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\Toast.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_/u.","line":12,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[323,333],"text":""},"desc":"Remove unused variable 'id'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { X, CheckCircle, AlertTriangle, AlertCircle, Info } from 'lucide-react';\n\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\n\nexport interface ToastProps {\n  id: string;\n  type: ToastType;\n  title: string;\n  message: string;\n  duration?: number;\n  onClose: (id: string) => void;\n}\n\nconst Toast: React.FC<ToastProps> = ({\n  id,\n  type,\n  title,\n  message,\n  duration = 5000,\n  onClose,\n}) => {\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(() => {\n        onClose(id);\n      }, duration);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [id, duration, onClose]);\n\n  const getIcon = () => {\n    switch (type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5 text-green-600\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-600\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5 text-orange-600\" />;\n      case 'info':\n        return <Info className=\"w-5 h-5 text-blue-600\" />;\n      default:\n        return <Info className=\"w-5 h-5 text-blue-600\" />;\n    }\n  };\n\n  const getColors = () => {\n    switch (type) {\n      case 'success':\n        return 'bg-green-50 border-green-200';\n      case 'error':\n        return 'bg-red-50 border-red-200';\n      case 'warning':\n        return 'bg-orange-50 border-orange-200';\n      case 'info':\n        return 'bg-blue-50 border-blue-200';\n    }\n  };\n\n  return (\n    <div\n      className={`flex items-start gap-3 p-4 rounded-lg border ${getColors()} shadow-lg min-w-[320px] max-w-md animate-slide-in`}\n    >\n      <div className=\"flex-shrink-0 mt-0.5\">{getIcon()}</div>\n      <div className=\"flex-1 min-w-0\">\n        <h4 className=\"text-sm font-semibold text-gray-900\">{title}</h4>\n        <p className=\"mt-1 text-sm text-gray-600\">{message}</p>\n      </div>\n      <button\n        onClick={() => onClose(id)}\n        className=\"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\"\n      >\n        <X className=\"w-4 h-4\" />\n      </button>\n    </div>\n  );\n};\n\nexport default Toast;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\ToastContainer.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used. Allowed unused args must match /^_/u.","line":14,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[294,310],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[309,328],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[328,349],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'duration' is defined but never used. Allowed unused args must match /^_/u.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[349,372],"text":""},"desc":"Remove unused variable 'duration'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[398,412],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[411,428],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'duration' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[428,447],"text":""},"desc":"Remove unused variable 'duration'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[468,482],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[481,498],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'duration' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[498,517],"text":""},"desc":"Remove unused variable 'duration'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[540,554],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[553,570],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'duration' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[570,589],"text":""},"desc":"Remove unused variable 'duration'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[609,623],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[622,639],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'duration' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[639,658],"text":""},"desc":"Remove unused variable 'duration'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, createContext, useContext } from 'react';\nimport Toast, { type ToastType } from './Toast';\n\ninterface ToastData {\n  id: string;\n  type: ToastType;\n  title: string;\n  message: string;\n  duration?: number;\n}\n\ninterface ToastContextType {\n  showToast: (\n    type: ToastType,\n    title: string,\n    message: string,\n    duration?: number\n  ) => void;\n  success: (title: string, message: string, duration?: number) => void;\n  error: (title: string, message: string, duration?: number) => void;\n  warning: (title: string, message: string, duration?: number) => void;\n  info: (title: string, message: string, duration?: number) => void;\n}\n\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\nexport const ToastProvider: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => {\n  const [toasts, setToasts] = useState<ToastData[]>([]);\n\n  const showToast = useCallback(\n    (type: ToastType, title: string, message: string, duration = 5000) => {\n      const id = `toast-${Date.now()}-${Math.random()}`;\n      setToasts((prev) => [...prev, { id, type, title, message, duration }]);\n    },\n    []\n  );\n\n  const removeToast = useCallback((id: string) => {\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\n  }, []);\n\n  const success = useCallback(\n    (title: string, message: string, duration?: number) => {\n      showToast('success', title, message, duration);\n    },\n    [showToast]\n  );\n\n  const error = useCallback(\n    (title: string, message: string, duration?: number) => {\n      showToast('error', title, message, duration);\n    },\n    [showToast]\n  );\n\n  const warning = useCallback(\n    (title: string, message: string, duration?: number) => {\n      showToast('warning', title, message, duration);\n    },\n    [showToast]\n  );\n\n  const info = useCallback(\n    (title: string, message: string, duration?: number) => {\n      showToast('info', title, message, duration);\n    },\n    [showToast]\n  );\n\n  return (\n    <ToastContext.Provider value={{ showToast, success, error, warning, info }}>\n      {children}\n      <div className=\"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none\">\n        <div className=\"flex flex-col gap-2 pointer-events-auto\">\n          {toasts.map((toast) => (\n            <Toast\n              key={toast.id}\n              id={toast.id}\n              type={toast.type}\n              title={toast.title}\n              message={toast.message}\n              duration={toast.duration ?? 5000}\n              onClose={removeToast}\n            />\n          ))}\n        </div>\n      </div>\n    </ToastContext.Provider>\n  );\n};\n\nexport default ToastProvider;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\VersionBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\BookCirculationAnalytics.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[201,249],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[613,623],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[623,635],"text":""},"desc":"Remove unused variable 'Download'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Area,\n  AreaChart,\n} from 'recharts';\nimport {\n  BookOpen,\n  TrendingUp,\n  AlertTriangle,\n  CheckCircle,\n  Users,\n  Filter,\n  Download,\n} from 'lucide-react';\n\ninterface RawCategoryData {\n  category: string;\n  count: number;\n}\n\ninterface RawBookData {\n  id: string;\n  title: string;\n  author: string;\n  category: string;\n  circulationCount: number;\n  popularity: number;\n  availableCopies: number;\n  totalCopies: number;\n}\n\ninterface CirculationAnalyticsData {\n  circulationByCategory?: RawCategoryData[];\n  mostBorrowedBooks?: RawBookData[];\n  totalCirculation?: number;\n  overdueData?: {\n    overdueByCategory?: Array<{ category: string; count: number }>;\n  };\n  trends?: {\n    growthRate?: number;\n  };\n  circulation?: {\n    circulationRate?: number;\n    returnRate?: number;\n    overdueRate?: number;\n  };\n  overdueAnalysis?: {\n    overdueByCategory?: Array<{ category: string; count: number }>;\n    totalOverdue?: number;\n    averageOverdueDays?: number;\n  };\n}\n\ninterface BookCirculationAnalyticsProps {\n  timeframe: 'day' | 'week' | 'month';\n  data?: CirculationAnalyticsData;\n  isLoading?: boolean;\n}\n\ninterface CirculationTrend {\n  date: string;\n  borrowed: number;\n  returned: number;\n  overdue: number;\n}\n\ninterface CategoryData {\n  category: string;\n  count: number;\n  percentage: number;\n  color: string;\n}\n\ninterface PopularBook {\n  id: string;\n  title: string;\n  author: string;\n  category: string;\n  circulationCount: number;\n  popularity: number;\n  availableCopies: number;\n  totalCopies: number;\n  overdueCount?: number;\n}\n\nconst COLORS = [\n  '#0088FE',\n  '#00C49F',\n  '#FFBB28',\n  '#FF8042',\n  '#8884D8',\n  '#82CA9D',\n  '#FFC658',\n  '#FF7C7C',\n];\n\nexport function BookCirculationAnalytics({\n  timeframe,\n  data,\n  isLoading = false,\n}: BookCirculationAnalyticsProps) {\n  const [selectedView, setSelectedView] = useState<\n    'overview' | 'trends' | 'categories' | 'popular'\n  >('overview');\n  const [circulationTrends, setCirculationTrends] = useState<\n    CirculationTrend[]\n  >([]);\n  const [categoryData, setCategoryData] = useState<CategoryData[]>([]);\n  const [popularBooks, setPopularBooks] = useState<PopularBook[]>([]);\n\n  useEffect(() => {\n    if (data) {\n      processCirculationData(data);\n    }\n  }, [data, timeframe]);\n\n  const processCirculationData = (analyticsData: CirculationAnalyticsData) => {\n    // Process circulation trends\n    // TODO: Connect to real trends data when available in API\n    const trends: CirculationTrend[] = [];\n    setCirculationTrends(trends);\n\n    // Process category data\n    const categories =\n      analyticsData.circulationByCategory?.map(\n        (cat: RawCategoryData, index: number) => ({\n          category: cat.category,\n          count: cat.count,\n          percentage: calculatePercentage(\n            cat.count,\n            analyticsData.totalCirculation\n          ),\n          color: COLORS[index % COLORS.length],\n        })\n      ) || [];\n    setCategoryData(categories);\n\n    // Process popular books\n    const books =\n      analyticsData.mostBorrowedBooks?.map((book: RawBookData) => ({\n        ...book,\n        overdueCount: 0, // Default to 0 until real data available\n      })) || [];\n    setPopularBooks(books);\n  };\n\n  const calculatePercentage = (value: number, total: number): number => {\n    return total > 0 ? Math.round((value / total) * 100) : 0;\n  };\n\n  const getPopularityBadge = (popularity: number) => {\n    if (popularity >= 80) {\n      return <Badge className=\"bg-green-500\">High</Badge>;\n    }\n    if (popularity >= 50) {\n      return <Badge className=\"bg-yellow-500\">Medium</Badge>;\n    }\n    return <Badge variant=\"outline\">Low</Badge>;\n  };\n\n  const CirculationOverview = () => (\n    <div className=\"space-y-6\">\n      {/* Key Metrics */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total Circulation\n            </CardTitle>\n            <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {data?.totalCirculation || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {data?.trends?.growthRate > 0 ? '+' : ''}\n              {data?.trends?.growthRate?.toFixed(1) || 0}% from last period\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Circulation Rate\n            </CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {data?.circulation?.circulationRate?.toFixed(1) || 0}%\n            </div>\n            <Progress\n              value={data?.circulation?.circulationRate || 0}\n              className=\"mt-2\"\n            />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Return Rate</CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {data?.circulation?.returnRate?.toFixed(1) || 0}%\n            </div>\n            <Progress\n              value={data?.circulation?.returnRate || 0}\n              className=\"mt-2\"\n            />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Overdue Rate</CardTitle>\n            <AlertTriangle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {data?.circulation?.overdueRate?.toFixed(1) || 0}%\n            </div>\n            <Progress\n              value={data?.circulation?.overdueRate || 0}\n              className=\"mt-2\"\n            />\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Circulation Trends Chart */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Circulation Trends</CardTitle>\n          <CardDescription>\n            Book borrowing, returns, and overdue trends over time\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <AreaChart data={circulationTrends}>\n              <CartesianGrid\n                strokeDasharray=\"3 3\"\n                stroke=\"hsl(var(--border))\"\n                opacity={0.3}\n              />\n              <XAxis\n                dataKey=\"date\"\n                tick={{ fill: 'hsl(var(--muted-foreground))' }}\n                tickFormatter={(value) =>\n                  timeframe === 'month' ? `Day ${value}` : value\n                }\n              />\n              <YAxis tick={{ fill: 'hsl(var(--muted-foreground))' }} />\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '8px',\n                  color: 'hsl(var(--foreground))',\n                }}\n              />\n              <Legend />\n              <Area\n                type=\"monotone\"\n                dataKey=\"borrowed\"\n                stackId=\"1\"\n                stroke=\"#0088FE\"\n                fill=\"#0088FE\"\n                fillOpacity={0.6}\n                name=\"Borrowed\"\n              />\n              <Area\n                type=\"monotone\"\n                dataKey=\"returned\"\n                stackId=\"2\"\n                stroke=\"#00C49F\"\n                fill=\"#00C49F\"\n                fillOpacity={0.6}\n                name=\"Returned\"\n              />\n              <Area\n                type=\"monotone\"\n                dataKey=\"overdue\"\n                stackId=\"3\"\n                stroke=\"#FF8042\"\n                fill=\"#FF8042\"\n                fillOpacity={0.6}\n                name=\"Overdue\"\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n    </div>\n  );\n\n  const CategoryAnalysis = () => (\n    <div className=\"grid gap-6 lg:grid-cols-2\">\n      {/* Category Distribution Pie Chart */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Circulation by Category</CardTitle>\n          <CardDescription>\n            Distribution of book circulation across categories\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <PieChart>\n              <Pie\n                data={categoryData}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ category, percentage }) =>\n                  `${category} ${percentage}%`\n                }\n                outerRadius={80}\n                fill=\"#8884d8\"\n                dataKey=\"count\"\n              >\n                {categoryData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '8px',\n                }}\n              />\n            </PieChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Category Stats */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Category Performance</CardTitle>\n          <CardDescription>\n            Detailed statistics for each book category\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {categoryData.map((category) => (\n              <div key={category.category} className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm font-medium\">\n                    {category.category}\n                  </span>\n                  <span className=\"text-sm text-muted-foreground\">\n                    {category.count} books ({category.percentage}%)\n                  </span>\n                </div>\n                <Progress value={category.percentage} className=\"h-2\" />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n\n  const PopularBooks = () => (\n    <Card>\n      <CardHeader>\n        <CardTitle>Most Popular Books</CardTitle>\n        <CardDescription>\n          Top borrowed books with circulation statistics\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {popularBooks.map((book, index) => (\n            <div\n              key={book.id}\n              className=\"flex items-center justify-between p-4 border rounded-lg\"\n            >\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"text-lg font-semibold\">#{index + 1}</span>\n                  <h4 className=\"font-medium\">{book.title}</h4>\n                  {getPopularityBadge(book.popularity)}\n                </div>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  by {book.author}  {book.category}\n                </p>\n                <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                  <span className=\"flex items-center gap-1\">\n                    <BookOpen className=\"h-3 w-3\" />\n                    {book.circulationCount} circulations\n                  </span>\n                  <span className=\"flex items-center gap-1\">\n                    <Users className=\"h-3 w-3\" />\n                    {book.availableCopies}/{book.totalCopies} available\n                  </span>\n                  {book.overdueCount && book.overdueCount > 0 && (\n                    <span className=\"flex items-center gap-1 text-red-500\">\n                      <AlertTriangle className=\"h-3 w-3\" />\n                      {book.overdueCount} overdue\n                    </span>\n                  )}\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-2xl font-bold\">{book.popularity}%</div>\n                <div className=\"text-xs text-muted-foreground\">popularity</div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  const OverdueAnalysis = () => {\n    const overdueData = data?.overdueAnalysis;\n\n    return (\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* Overdue Statistics */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Overdue Analysis</CardTitle>\n            <CardDescription>\n              Statistics and patterns for overdue books\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"text-2xl font-bold text-red-600\">\n                    {overdueData?.totalOverdue || 0}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    Total Overdue\n                  </div>\n                </div>\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"text-2xl font-bold text-yellow-600\">\n                    {overdueData?.averageOverdueDays?.toFixed(1) || 0}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    Avg Days Overdue\n                  </div>\n                </div>\n              </div>\n\n              {/* Overdue by Category */}\n              <div className=\"space-y-2\">\n                <h4 className=\"font-medium\">Overdue by Category</h4>\n                {overdueData?.overdueByCategory?.map(\n                  (cat: {\n                    category: string;\n                    count: number;\n                    averageDays?: number;\n                  }) => (\n                    <div\n                      key={cat.category}\n                      className=\"flex justify-between items-center p-2 bg-muted rounded\"\n                    >\n                      <span className=\"text-sm\">{cat.category}</span>\n                      <span className=\"text-sm font-medium\">\n                        {cat.count} books ({cat.averageDays} days)\n                      </span>\n                    </div>\n                  )\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recommendations */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Recommendations</CardTitle>\n            <CardDescription>\n              Automated suggestions to reduce overdue rates\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Automated Reminders</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Send email/SMS reminders 2 days before due date\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Grace Period Policy</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Implement 2-day grace period for first-time offenders\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Flexible Loan Periods</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Adjust loan periods based on book category and user history\n                  </p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <div className=\"h-6 w-48 bg-muted rounded animate-pulse\"></div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-64 bg-muted rounded animate-pulse\"></div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Book Circulation Analytics</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Comprehensive analysis of book borrowing patterns and trends\n          </p>\n        </div>\n      </div>\n\n      {/* Analytics Tabs */}\n      <Tabs\n        value={selectedView}\n        onValueChange={(value) => setSelectedView(value as typeof selectedView)}\n        className=\"space-y-4\"\n      >\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"trends\">Trends</TabsTrigger>\n          <TabsTrigger value=\"categories\">Categories</TabsTrigger>\n          <TabsTrigger value=\"popular\">Popular Books</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <CirculationOverview />\n        </TabsContent>\n\n        <TabsContent value=\"trends\" className=\"space-y-4\">\n          <CirculationOverview />\n          <OverdueAnalysis />\n        </TabsContent>\n\n        <TabsContent value=\"categories\" className=\"space-y-4\">\n          <CategoryAnalysis />\n        </TabsContent>\n\n        <TabsContent value=\"popular\" className=\"space-y-4\">\n          <PopularBooks />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default BookCirculationAnalytics;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\EquipmentUtilizationAnalytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\ExportAnalytics.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'format' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"format"},"fix":{"range":[723,754],"text":""},"desc":"Remove unused variable 'format'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'sections' is defined but never used. Allowed unused args must match /^_/u.","line":32,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"sections"},"fix":{"range":[753,777],"text":""},"desc":"Remove unused variable 'sections'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, type ComponentType } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Checkbox } from '@/components/ui/checkbox';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  Download,\n  Clock,\n  BarChart,\n  FileText,\n  Settings,\n  FileSpreadsheet,\n  Calendar,\n  File as FileIcon,\n} from 'lucide-react';\n\ninterface ExportAnalyticsProps {\n  timeframe: 'day' | 'week' | 'month';\n  onExport: (\n    format: 'csv' | 'json' | 'pdf',\n    sections: string[]\n  ) => Promise<void>;\n  isExporting?: boolean;\n}\n\ninterface ExportSection {\n  id: string;\n  name: string;\n  description: string;\n  icon: ComponentType<{ className?: string }>;\n  defaultIncluded: boolean;\n}\n\ninterface ExportFormat {\n  id: 'csv' | 'json' | 'pdf';\n  name: string;\n  description: string;\n  icon: ComponentType<{ className?: string }>;\n  fileSize: string;\n  processingTime: string;\n}\n\nexport function ExportAnalytics({\n  timeframe,\n  onExport,\n  isExporting = false,\n}: ExportAnalyticsProps) {\n  const [selectedFormat, setSelectedFormat] = useState<'csv' | 'json' | 'pdf'>(\n    'pdf'\n  );\n  const [selectedSections, setSelectedSections] = useState<string[]>([]);\n  const [includeCharts, setIncludeCharts] = useState(true);\n  const [includeRawData, setIncludeRawData] = useState(false);\n  const [customDateRange, setCustomDateRange] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n\n  const exportSections: ExportSection[] = [\n    {\n      id: 'overview',\n      name: 'Library Overview',\n      description: 'General library statistics and metrics',\n      icon: BarChart,\n      defaultIncluded: true,\n    },\n    {\n      id: 'circulation',\n      name: 'Book Circulation',\n      description: 'Book borrowing, returns, and overdue analysis',\n      icon: FileText,\n      defaultIncluded: true,\n    },\n    {\n      id: 'equipment',\n      name: 'Equipment Utilization',\n      description: 'Equipment usage patterns and maintenance insights',\n      icon: Settings,\n      defaultIncluded: true,\n    },\n    {\n      id: 'fines',\n      name: 'Fine Collection',\n      description: 'Fine payment trends and collection analytics',\n      icon: FileSpreadsheet,\n      defaultIncluded: false,\n    },\n    {\n      id: 'trends',\n      name: 'Usage Trends',\n      description: 'Historical data and trend analysis',\n      icon: Calendar,\n      defaultIncluded: false,\n    },\n    {\n      id: 'demographics',\n      name: 'User Demographics',\n      description: 'Student usage patterns by grade and category',\n      icon: FileIcon,\n      defaultIncluded: false,\n    },\n  ];\n\n  const exportFormats: ExportFormat[] = [\n    {\n      id: 'pdf',\n      name: 'PDF Report',\n      description:\n        'Professional formatted report with charts and visualizations',\n      icon: FileText,\n      fileSize: '~2-5 MB',\n      processingTime: '~30 seconds',\n    },\n    {\n      id: 'csv',\n      name: 'CSV Data',\n      description: 'Raw data in comma-separated values format',\n      icon: FileSpreadsheet,\n      fileSize: '~500 KB - 1 MB',\n      processingTime: '~10 seconds',\n    },\n    {\n      id: 'json',\n      name: 'JSON Data',\n      description: 'Structured data format for developers and APIs',\n      icon: FileIcon,\n      fileSize: '~1-2 MB',\n      processingTime: '~15 seconds',\n    },\n  ];\n\n  const handleSectionToggle = (sectionId: string, checked: boolean) => {\n    if (checked) {\n      setSelectedSections((prev) => [...prev, sectionId]);\n    } else {\n      setSelectedSections((prev) => prev.filter((id) => id !== sectionId));\n    }\n  };\n\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedSections(exportSections.map((section) => section.id));\n    } else {\n      setSelectedSections([]);\n    }\n  };\n\n  const handleExport = async () => {\n    try {\n      setExportProgress(0);\n\n      // Simulate progress updates\n      const progressInterval = setInterval(() => {\n        setExportProgress((prev) => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return prev;\n          }\n          return prev + 10;\n        });\n      }, 200);\n\n      await onExport(\n        selectedFormat,\n        selectedSections.length > 0 ? selectedSections : ['all']\n      );\n\n      setExportProgress(100);\n      setTimeout(() => {\n        setIsDialogOpen(false);\n        setExportProgress(0);\n      }, 1000);\n    } catch (error) {\n      console.error('Export failed:', error);\n      setExportProgress(0);\n    }\n  };\n\n  const getSelectedSectionsInfo = () => {\n    const count =\n      selectedSections.length > 0\n        ? selectedSections.length\n        : exportSections.length;\n    return `${count} section${count !== 1 ? 's' : ''} selected`;\n  };\n\n  return (\n    <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n      <DialogTrigger asChild>\n        <Button\n          variant=\"outline\"\n          className=\"flex items-center gap-2\"\n          aria-label=\"export-analytics\"\n          data-testid=\"export-analytics\"\n        >\n          <Download className=\"h-4 w-4\" />\n          Export Analytics\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Export Analytics Report</DialogTitle>\n          <DialogDescription>\n            Generate comprehensive analytics reports in various formats\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Format Selection */}\n          <div>\n            <h4 className=\"text-sm font-medium mb-3\">Export Format</h4>\n            <div className=\"grid gap-3 md:grid-cols-3\">\n              {exportFormats.map((format) => (\n                <Card\n                  key={format.id}\n                  className={`cursor-pointer transition-all ${\n                    selectedFormat === format.id\n                      ? 'ring-2 ring-primary border-primary'\n                      : 'hover:border-primary'\n                  }`}\n                  onClick={() => setSelectedFormat(format.id)}\n                >\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <format.icon className=\"h-5 w-5\" />\n                      <CardTitle className=\"text-sm\">{format.name}</CardTitle>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"pt-0\">\n                    <p className=\"text-xs text-muted-foreground mb-2\">\n                      {format.description}\n                    </p>\n                    <div className=\"flex justify-between text-xs text-muted-foreground\">\n                      <span>{format.fileSize}</span>\n                      <span>{format.processingTime}</span>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          {/* Sections Selection */}\n          <div>\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"text-sm font-medium\">Report Sections</h4>\n              <div className=\"flex items-center gap-2\">\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  {getSelectedSectionsInfo()}\n                </Badge>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() =>\n                    handleSelectAll(\n                      selectedSections.length !== exportSections.length\n                    )\n                  }\n                >\n                  {selectedSections.length === exportSections.length\n                    ? 'Deselect All'\n                    : 'Select All'}\n                </Button>\n              </div>\n            </div>\n            <div className=\"grid gap-3 md:grid-cols-2\">\n              {exportSections.map((section) => (\n                <div\n                  key={section.id}\n                  className=\"flex items-start space-x-3 p-3 border rounded-lg\"\n                >\n                  <Checkbox\n                    id={section.id}\n                    checked={\n                      selectedSections.includes(section.id) ||\n                      (selectedSections.length === 0 && section.defaultIncluded)\n                    }\n                    onCheckedChange={(checked) =>\n                      handleSectionToggle(section.id, checked as boolean)\n                    }\n                  />\n                  <div className=\"flex-1\">\n                    <label\n                      htmlFor={section.id}\n                      className=\"text-sm font-medium cursor-pointer flex items-center gap-2\"\n                    >\n                      <section.icon className=\"h-4 w-4\" />\n                      {section.name}\n                    </label>\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      {section.description}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Export Options */}\n          <div>\n            <h4 className=\"text-sm font-medium mb-3\">Export Options</h4>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"charts\"\n                  checked={includeCharts}\n                  onCheckedChange={(checked) =>\n                    setIncludeCharts(checked === true)\n                  }\n                />\n                <label htmlFor=\"charts\" className=\"text-sm\">\n                  Include charts and visualizations\n                </label>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"raw-data\"\n                  checked={includeRawData}\n                  onCheckedChange={(checked) =>\n                    setIncludeRawData(checked === true)\n                  }\n                />\n                <label htmlFor=\"raw-data\" className=\"text-sm\">\n                  Include raw data tables\n                </label>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"custom-range\"\n                  checked={customDateRange}\n                  onCheckedChange={(checked) =>\n                    setCustomDateRange(checked === true)\n                  }\n                />\n                <label htmlFor=\"custom-range\" className=\"text-sm\">\n                  Use custom date range\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Export Progress */}\n          {isExporting && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\">\n                  Generating Report...\n                </span>\n                <span className=\"text-sm text-muted-foreground\">\n                  {exportProgress}%\n                </span>\n              </div>\n              <Progress value={exportProgress} className=\"h-2\" />\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                <Clock className=\"h-3 w-3\" />\n                <span>\n                  This may take a few moments depending on the selected options\n                </span>\n              </div>\n            </div>\n          )}\n\n          {/* Summary */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-base\">Export Summary</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid gap-4 md:grid-cols-3\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-primary\">\n                    {exportFormats.find((f) => f.id === selectedFormat)?.name}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">Format</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-primary\">\n                    {getSelectedSectionsInfo()}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">Sections</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-primary\">\n                    {timeframe === 'day'\n                      ? 'Today'\n                      : timeframe === 'week'\n                        ? 'This Week'\n                        : 'This Month'}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    Time Period\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\n            Cancel\n          </Button>\n          <Button onClick={handleExport} disabled={isExporting}>\n            {isExporting ? (\n              <>\n                <Clock className=\"h-4 w-4 mr-2 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Export Report\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default ExportAnalytics;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\FineCollectionAnalytics.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Receipt' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Receipt"},"fix":{"range":[650,661],"text":""},"desc":"Remove unused variable 'Receipt'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  LineChart,\n  Line,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Area,\n  AreaChart,\n} from 'recharts';\nimport {\n  DollarSign,\n  TrendingUp,\n  CreditCard,\n  AlertTriangle,\n  CheckCircle,\n  Users,\n  Receipt,\n  Target,\n  Clock,\n  ArrowUpRight,\n  ArrowDownRight,\n  Activity,\n} from 'lucide-react';\n\ninterface RawPaymentTrend {\n  period: string;\n  amount: number;\n  transactions: number;\n}\n\ninterface RawFineCategory {\n  category: string;\n  amount: number;\n  count: number;\n}\n\ninterface FineAnalyticsData {\n  paymentTrends?: RawPaymentTrend[];\n  fineCategories?: RawFineCategory[];\n  totalFines?: number;\n  collectedFines?: number;\n  outstandingFines?: number;\n  collectionRate?: number;\n  overdueAnalysis?: {\n    patterns?: unknown[];\n    recommendations?: string[];\n  };\n}\n\ninterface FineCollectionAnalyticsProps {\n  timeframe: 'day' | 'week' | 'month';\n  data?: FineAnalyticsData;\n  isLoading?: boolean;\n}\n\ninterface PaymentTrend {\n  period: string;\n  amount: number;\n  transactions: number;\n  averagePayment: number;\n  collectionRate: number;\n}\n\ninterface FineCategory {\n  category: string;\n  amount: number;\n  count: number;\n  percentage: number;\n  color: string;\n  trend: 'up' | 'down' | 'stable';\n}\n\nconst FINE_COLORS = [\n  '#0088FE',\n  '#00C49F',\n  '#FFBB28',\n  '#FF8042',\n  '#8884D8',\n  '#82CA9D',\n  '#FFC658',\n  '#FF7C7C',\n];\n\nexport function FineCollectionAnalytics({\n  timeframe,\n  data,\n  isLoading = false,\n}: FineCollectionAnalyticsProps) {\n  const [selectedView, setSelectedView] = useState<\n    'overview' | 'trends' | 'categories' | 'patterns'\n  >('overview');\n  const [paymentTrends, setPaymentTrends] = useState<PaymentTrend[]>([]);\n  const [fineCategories, setFineCategories] = useState<FineCategory[]>([]);\n\n  useEffect(() => {\n    if (data) {\n      processFineData(data);\n    }\n  }, [data, timeframe]);\n\n  const processFineData = (analyticsData: FineAnalyticsData) => {\n    // Process payment trends\n    const trends =\n      analyticsData.paymentTrends?.map((trend: RawPaymentTrend) => ({\n        ...trend,\n        averagePayment:\n          trend.transactions > 0 ? trend.amount / trend.transactions : 0,\n        collectionRate: 0,\n      })) || [];\n    setPaymentTrends(trends);\n\n    // Process fine categories\n    const categories =\n      analyticsData.fineCategories?.map(\n        (cat: RawFineCategory, index: number) => ({\n          ...cat,\n          percentage: calculatePercentage(cat.amount, analyticsData.totalFines),\n          color: FINE_COLORS[index % FINE_COLORS.length],\n          trend: 'stable' as 'up' | 'down' | 'stable',\n        })\n      ) || [];\n    setFineCategories(categories);\n\n    // Process overdue patterns\n    // Note: overduePatterns state not implemented yet\n  };\n\n  const calculatePercentage = (value: number, total: number): number => {\n    return total > 0 ? Math.round((value / total) * 100) : 0;\n  };\n\n  const getTrendIcon = (trend: string) => {\n    switch (trend) {\n      case 'up':\n        return <ArrowUpRight className=\"h-4 w-4 text-red-500\" />;\n      case 'down':\n        return <ArrowDownRight className=\"h-4 w-4 text-green-500\" />;\n      default:\n        return <Activity className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const exportAnalyticsCsv = () => {\n    const lines: string[] = [];\n    lines.push('Payment Trends');\n    lines.push('Period,Amount,Transactions,AveragePayment,CollectionRate');\n    paymentTrends.forEach((t) => {\n      const row = [\n        t.period,\n        String(t.amount ?? 0),\n        String(t.transactions ?? 0),\n        String(t.averagePayment ?? 0),\n        String(t.collectionRate ?? 0),\n      ]\n        .map((v) => String(v).replace(/,/g, ';'))\n        .join(',');\n      lines.push(row);\n    });\n    lines.push('');\n    lines.push('Fine Categories');\n    lines.push('Category,Amount,Count,Percentage');\n    fineCategories.forEach((c) => {\n      const row = [\n        c.category,\n        String(c.amount ?? 0),\n        String(c.count ?? 0),\n        String(c.percentage ?? 0),\n      ]\n        .map((v) => String(v).replace(/,/g, ';'))\n        .join(',');\n      lines.push(row);\n    });\n    const csv = lines.join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `fine-analytics-${new Date().toISOString().split('T')[0]}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const FineOverview = () => (\n    <div className=\"space-y-6\">\n      {/* Key Metrics */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Fines</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              ${data?.totalFines?.toFixed(2) || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {fineCategories.reduce((sum, cat) => sum + cat.count, 0)} total\n              fines issued\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Collected</CardTitle>\n            <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              ${data?.collectedFines?.toFixed(2) || 0}\n            </div>\n            <Progress value={data?.collectionRate || 0} className=\"mt-2\" />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {data?.collectionRate?.toFixed(1) || 0}% collection rate\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Outstanding</CardTitle>\n            <AlertTriangle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-red-600\">\n              ${data?.outstandingFines?.toFixed(2) || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {(\n                ((data?.outstandingFines || 0) / (data?.totalFines || 1)) *\n                100\n              ).toFixed(1)}\n              % of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Collection Rate\n            </CardTitle>\n            <Target className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {data?.collectionRate?.toFixed(1) || 0}%\n            </div>\n            <Progress value={data?.collectionRate || 0} className=\"mt-2\" />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {data?.collectionRate > 80\n                ? 'Excellent'\n                : data?.collectionRate > 60\n                  ? 'Good'\n                  : 'Needs Improvement'}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Payment Trends Chart */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Payment Trends</CardTitle>\n          <CardDescription>\n            Fine collection patterns and payment trends over time\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <AreaChart data={paymentTrends}>\n              <CartesianGrid\n                strokeDasharray=\"3 3\"\n                stroke=\"hsl(var(--border))\"\n                opacity={0.3}\n              />\n              <XAxis\n                dataKey=\"period\"\n                tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              />\n              <YAxis tick={{ fill: 'hsl(var(--muted-foreground))' }} />\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '8px',\n                  color: 'hsl(var(--foreground))',\n                }}\n              />\n              <Legend />\n              <Area\n                type=\"monotone\"\n                dataKey=\"amount\"\n                stroke=\"#0088FE\"\n                fill=\"#0088FE\"\n                fillOpacity={0.6}\n                name=\"Amount Collected ($)\"\n              />\n              <Area\n                type=\"monotone\"\n                dataKey=\"transactions\"\n                stroke=\"#00C49F\"\n                fill=\"#00C49F\"\n                fillOpacity={0.6}\n                name=\"Transactions\"\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n    </div>\n  );\n\n  const CategoryAnalysis = () => (\n    <div className=\"grid gap-6 lg:grid-cols-2\">\n      {/* Fine Categories Pie Chart */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Fines by Category</CardTitle>\n          <CardDescription>\n            Distribution of fines across different violation types\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <PieChart>\n              <Pie\n                data={fineCategories}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ category, amount }) =>\n                  `${category}: $${amount.toFixed(0)}`\n                }\n                outerRadius={80}\n                fill=\"#8884d8\"\n                dataKey=\"amount\"\n              >\n                {fineCategories.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '8px',\n                }}\n                formatter={(value: number, name: string) => [\n                  `$${value.toFixed(2)}`,\n                  name === 'amount' ? 'Fine Amount' : name,\n                ]}\n              />\n            </PieChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Category Details */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Category Performance</CardTitle>\n          <CardDescription>\n            Detailed breakdown of fine categories with trends\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {fineCategories.map((category) => (\n              <div key={category.category} className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium\">\n                      {category.category}\n                    </span>\n                    {getTrendIcon(category.trend)}\n                    <Badge\n                      variant={\n                        category.trend === 'up'\n                          ? 'default'\n                          : category.trend === 'down'\n                            ? 'destructive'\n                            : 'secondary'\n                      }\n                    >\n                      {category.trend}\n                    </Badge>\n                  </div>\n                  <span className=\"text-sm text-muted-foreground\">\n                    ${category.amount.toFixed(2)} ({category.count} cases)\n                  </span>\n                </div>\n                <Progress value={category.percentage} className=\"h-2\" />\n                <div className=\"flex justify-between text-xs text-muted-foreground\">\n                  <span>{category.percentage}% of total fines</span>\n                  <span>\n                    Avg: ${(category.amount / category.count).toFixed(2)} per\n                    case\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n\n  const PaymentTrends = () => (\n    <div className=\"space-y-6\">\n      {/* Payment Trend Analysis */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Payment Trend Analysis</CardTitle>\n          <CardDescription>\n            Detailed payment patterns and collection efficiency\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <LineChart data={paymentTrends}>\n              <CartesianGrid\n                strokeDasharray=\"3 3\"\n                stroke=\"hsl(var(--border))\"\n                opacity={0.3}\n              />\n              <XAxis\n                dataKey=\"period\"\n                tick={{ fill: 'hsl(var(--muted-foreground))' }}\n              />\n              <YAxis tick={{ fill: 'hsl(var(--muted-foreground))' }} />\n              <Tooltip\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '8px',\n                  color: 'hsl(var(--foreground))',\n                }}\n              />\n              <Legend />\n              <Line\n                type=\"monotone\"\n                dataKey=\"amount\"\n                stroke=\"#0088FE\"\n                strokeWidth={2}\n                name=\"Amount ($)\"\n                dot={{ fill: '#0088FE' }}\n              />\n              <Line\n                type=\"monotone\"\n                dataKey=\"collectionRate\"\n                stroke=\"#00C49F\"\n                strokeWidth={2}\n                name=\"Collection Rate (%)\"\n                dot={{ fill: '#00C49F' }}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Payment Metrics */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />\n              Collection Performance\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span>Average Payment</span>\n                <span className=\"font-medium\">\n                  $\n                  {(\n                    paymentTrends.reduce(\n                      (sum, t) => sum + t.averagePayment,\n                      0\n                    ) / paymentTrends.length || 0\n                  ).toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Peak Collection Day</span>\n                <span className=\"font-medium\">Wednesday</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Payment Frequency</span>\n                <span className=\"font-medium\">Every 3.2 days</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />\n              User Behavior\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span>Active Fine Accounts</span>\n                <span className=\"font-medium\">45</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Repeat Offenders</span>\n                <span className=\"font-medium\">12</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Payment Compliance</span>\n                <span className=\"font-medium text-green-600\">87%</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Collection Timeline\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span>Avg. Payment Time</span>\n                <span className=\"font-medium\">5.3 days</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Fastest Payment</span>\n                <span className=\"font-medium\">Same day</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span>Oldest Outstanding</span>\n                <span className=\"font-medium text-red-600\">45 days</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n\n  const OverduePatterns = () => {\n    const patterns = data?.overdueAnalysis?.patterns || [];\n\n    return (\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* Overdue Pattern Analysis */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Overdue Pattern Analysis</CardTitle>\n            <CardDescription>\n              Analysis of overdue patterns and delay behaviors\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {patterns.map((pattern: unknown, index: number) => {\n                const p = pattern as Record<string, unknown>;\n                return (\n                  <div key={index} className=\"space-y-2\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm font-medium\">\n                        {String(p.type)}\n                      </span>\n                      <Badge\n                        variant={\n                          Number(p.overdueRate) > 15 ? 'destructive' : 'outline'\n                        }\n                      >\n                        {String(p.overdueRate)}% overdue\n                      </Badge>\n                    </div>\n                    <Progress value={Number(p.overdueRate)} className=\"h-2\" />\n                    <div className=\"flex justify-between text-xs text-muted-foreground\">\n                      <span>Avg delay: {String(p.averageDelay)} days</span>\n                      <span>Volume: High</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recommendations */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Collection Recommendations</CardTitle>\n            <CardDescription>\n              Automated suggestions to improve fine collection\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {data?.overdueAnalysis?.recommendations?.map(\n                (rec: string, index: number) => (\n                  <div key={index} className=\"flex items-start gap-3\">\n                    <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">\n                        Strategy #{index + 1}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">{rec}</p>\n                    </div>\n                  </div>\n                )\n              )}\n\n              {/* Additional Recommendations */}\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Payment Plans</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Offer installment plans for large fines to improve\n                    collection rates\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Automated Reminders</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Schedule automated payment reminders at 7, 14, and 30 days\n                  </p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <div className=\"h-6 w-48 bg-muted rounded animate-pulse\"></div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-64 bg-muted rounded animate-pulse\"></div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Fine Collection Analytics</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Comprehensive analysis of fine collection patterns and effectiveness\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Badge\n            variant={\n              data?.collectionRate > 80\n                ? 'default'\n                : data?.collectionRate > 60\n                  ? 'secondary'\n                  : 'destructive'\n            }\n          >\n            {data?.collectionRate > 80\n              ? 'Excellent'\n              : data?.collectionRate > 60\n                ? 'Good'\n                : 'Needs Attention'}\n          </Badge>\n          <Button size=\"sm\" variant=\"outline\" onClick={exportAnalyticsCsv}>\n            Export CSV\n          </Button>\n        </div>\n      </div>\n\n      {/* Analytics Tabs */}\n      <Tabs\n        value={selectedView}\n        onValueChange={(value: string) =>\n          setSelectedView(\n            value as 'overview' | 'trends' | 'categories' | 'patterns'\n          )\n        }\n        className=\"space-y-4\"\n      >\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"trends\">Trends</TabsTrigger>\n          <TabsTrigger value=\"categories\">Categories</TabsTrigger>\n          <TabsTrigger value=\"patterns\">Patterns</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <FineOverview />\n        </TabsContent>\n\n        <TabsContent value=\"trends\" className=\"space-y-4\">\n          <PaymentTrends />\n        </TabsContent>\n\n        <TabsContent value=\"categories\" className=\"space-y-4\">\n          <CategoryAnalysis />\n        </TabsContent>\n\n        <TabsContent value=\"patterns\" className=\"space-y-4\">\n          <OverduePatterns />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default FineCollectionAnalytics;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\MetricsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\PredictiveInsights.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'timeframe' is defined but never used. Allowed unused args must match /^_/u.","line":42,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"timeframe"},"fix":{"range":[933,968],"text":""},"desc":"Remove unused variable 'timeframe'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'insight' is defined but never used. Allowed unused args must match /^_/u.","line":43,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"insight"},"fix":{"range":[1000,1027],"text":""},"desc":"Remove unused variable 'insight'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'action' is defined but never used. Allowed unused args must match /^_/u.","line":43,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"action"},"fix":{"range":[1026,1042],"text":""},"desc":"Remove unused variable 'action'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  AlertTriangle,\n  TrendingUp,\n  Target,\n  Activity,\n  Clock,\n  ChevronRight,\n  Info,\n  AlertCircle,\n  CheckCircle,\n} from 'lucide-react';\n\nexport interface PredictiveInsight {\n  type:\n    | 'demand_forecast'\n    | 'peak_prediction'\n    | 'resource_optimization'\n    | 'anomaly_detection';\n  title: string;\n  description: string;\n  confidence: number;\n  impact: 'low' | 'medium' | 'high';\n  recommendations: string[];\n  data: Record<string, unknown>;\n  validUntil: Date;\n}\n\ninterface PredictiveInsightsProps {\n  insights: PredictiveInsight[];\n  timeframe: 'day' | 'week' | 'month';\n  onTimeframeChange: (timeframe: 'day' | 'week' | 'month') => void;\n  onInsightAction?: (insight: PredictiveInsight, action: string) => void;\n}\n\nexport function PredictiveInsights({\n  insights,\n  timeframe,\n  onTimeframeChange,\n  onInsightAction,\n}: PredictiveInsightsProps) {\n  const [selectedInsight, setSelectedInsight] =\n    useState<PredictiveInsight | null>(null);\n  const [filterType, setFilterType] = useState<string>('all');\n\n  const getImpactColor = (impact: string) => {\n    switch (impact) {\n      case 'high':\n        return 'bg-red-100 text-red-800 border-red-200';\n      case 'medium':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'low':\n        return 'bg-green-100 text-green-800 border-green-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'demand_forecast':\n        return <TrendingUp className=\"h-5 w-5\" />;\n      case 'peak_prediction':\n        return <Clock className=\"h-5 w-5\" />;\n      case 'resource_optimization':\n        return <Target className=\"h-5 w-5\" />;\n      case 'anomaly_detection':\n        return <AlertTriangle className=\"h-5 w-5\" />;\n      default:\n        return <Activity className=\"h-5 w-5\" />;\n    }\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.8) {\n      return 'text-green-600';\n    }\n    if (confidence >= 0.6) {\n      return 'text-yellow-600';\n    }\n    return 'text-red-600';\n  };\n\n  const filteredInsights =\n    filterType === 'all'\n      ? insights\n      : insights.filter((insight) => insight.type === filterType);\n\n  const highImpactInsights = insights.filter((i) => i.impact === 'high');\n  const actionableInsights = insights.filter(\n    (i) => i.recommendations.length > 0\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Predictive Analytics</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            AI-powered insights and forecasts for library management\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Tabs\n            value={timeframe}\n            onValueChange={(value: string) =>\n              onTimeframeChange(value as 'day' | 'week' | 'month')\n            }\n          >\n            <TabsList>\n              <TabsTrigger value=\"day\">Day</TabsTrigger>\n              <TabsTrigger value=\"week\">Week</TabsTrigger>\n              <TabsTrigger value=\"month\">Month</TabsTrigger>\n            </TabsList>\n          </Tabs>\n        </div>\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid gap-4 md:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total Insights\n            </CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{insights.length}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Generated this period\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Critical</CardTitle>\n            <AlertTriangle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-red-600\">\n              {highImpactInsights.length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Require immediate attention\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Actionable</CardTitle>\n            <Target className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {actionableInsights.length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              With recommendations\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Avg Confidence\n            </CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {Math.round(\n                (insights.reduce((sum, i) => sum + i.confidence, 0) /\n                  insights.length) *\n                  100\n              )}\n              %\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Prediction accuracy</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filter Tabs */}\n      <Tabs value={filterType} onValueChange={setFilterType}>\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"all\">All Insights</TabsTrigger>\n          <TabsTrigger value=\"demand_forecast\">Demand</TabsTrigger>\n          <TabsTrigger value=\"peak_prediction\">Peaks</TabsTrigger>\n          <TabsTrigger value=\"resource_optimization\">Resources</TabsTrigger>\n          <TabsTrigger value=\"anomaly_detection\">Anomalies</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value={filterType} className=\"space-y-4\">\n          {/* Insights Grid */}\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            {filteredInsights.map((insight, index) => (\n              <Card\n                key={index}\n                className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                onClick={() => setSelectedInsight(insight)}\n              >\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      {getInsightIcon(insight.type)}\n                      <CardTitle className=\"text-sm font-medium\">\n                        {insight.title}\n                      </CardTitle>\n                    </div>\n                    <Badge className={getImpactColor(insight.impact)}>\n                      {insight.impact}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-sm text-muted-foreground mb-3\">\n                    {insight.description}\n                  </p>\n\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span>Confidence:</span>\n                      <span\n                        className={`font-medium ${getConfidenceColor(insight.confidence)}`}\n                      >\n                        {Math.round(insight.confidence * 100)}%\n                      </span>\n                    </div>\n                    <div className=\"flex items-center space-x-1 text-muted-foreground\">\n                      <Info className=\"h-3 w-3\" />\n                      <span>{insight.recommendations.length} actions</span>\n                    </div>\n                  </div>\n\n                  {insight.recommendations.length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-xs text-muted-foreground\">\n                          {insight.recommendations[0]?.substring(0, 60)}...\n                        </span>\n                        <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {filteredInsights.length === 0 && (\n            <Card>\n              <CardContent className=\"py-8 text-center\">\n                <AlertCircle className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium mb-2\">No insights found</h3>\n                <p className=\"text-muted-foreground\">\n                  No {filterType === 'all' ? '' : filterType.replace('_', ' ')}{' '}\n                  insights available for the selected period.\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n\n      {/* Selected Insight Detail */}\n      {selectedInsight && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                {getInsightIcon(selectedInsight.type)}\n                <div>\n                  <CardTitle>{selectedInsight.title}</CardTitle>\n                  <CardDescription>\n                    {selectedInsight.description}\n                  </CardDescription>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Badge className={getImpactColor(selectedInsight.impact)}>\n                  {selectedInsight.impact}\n                </Badge>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setSelectedInsight(null)}\n                >\n                  \n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {/* Confidence Score */}\n            <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded\">\n              <span className=\"text-sm font-medium\">Prediction Confidence</span>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-24 bg-muted rounded-full h-2\">\n                  <div\n                    className=\"bg-primary h-2 rounded-full transition-all duration-300\"\n                    style={{ width: `${selectedInsight.confidence * 100}%` }}\n                  />\n                </div>\n                <span\n                  className={`text-sm font-medium ${getConfidenceColor(selectedInsight.confidence)}`}\n                >\n                  {Math.round(selectedInsight.confidence * 100)}%\n                </span>\n              </div>\n            </div>\n\n            {/* Validity Period */}\n            <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n              <span>Valid until:</span>\n              <span>\n                {new Date(selectedInsight.validUntil).toLocaleDateString()}\n              </span>\n            </div>\n\n            {/* Recommendations */}\n            {selectedInsight.recommendations.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium mb-3\">\n                  Recommended Actions\n                </h4>\n                <div className=\"space-y-2\">\n                  {selectedInsight.recommendations.map(\n                    (recommendation, index) => (\n                      <div\n                        key={index}\n                        className=\"flex items-start space-x-3 p-3 bg-muted/30 rounded\"\n                      >\n                        <div className=\"w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center text-xs font-medium mt-0.5\">\n                          {index + 1}\n                        </div>\n                        <p className=\"text-sm flex-1\">{recommendation}</p>\n                        {onInsightAction && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              onInsightAction(\n                                selectedInsight,\n                                `implement_${index}`\n                              );\n                            }}\n                          >\n                            Implement\n                          </Button>\n                        )}\n                      </div>\n                    )\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Raw Data (for advanced users) */}\n            <details className=\"group\">\n              <summary className=\"cursor-pointer text-sm font-medium text-muted-foreground hover:text-foreground\">\n                View Technical Details\n              </summary>\n              <div className=\"mt-3 p-3 bg-muted/50 rounded text-xs font-mono\">\n                <pre>{JSON.stringify(selectedInsight.data, null, 2)}</pre>\n              </div>\n            </details>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n\nexport default PredictiveInsights;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\TimeSeriesForecast.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'metric' is defined but never used. Allowed unused args must match /^_/u.","line":56,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"metric"},"fix":{"range":[1017,1082],"text":""},"desc":"Remove unused variable 'metric'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'timeframe' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"timeframe"},"fix":{"range":[1119,1154],"text":""},"desc":"Remove unused variable 'timeframe'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Area,\n  AreaChart,\n  ReferenceLine,\n} from 'recharts';\nimport {\n  TrendingUp,\n  TrendingDown,\n  Activity,\n  Calendar,\n  Download,\n  Settings,\n  Eye,\n  EyeOff,\n} from 'lucide-react';\n\ninterface TimeSeriesData {\n  timestamp: Date;\n  value: number;\n  predicted?: number;\n  upperBound?: number;\n  lowerBound?: number;\n}\n\ninterface TimeSeriesForecastProps {\n  data: TimeSeriesData[];\n  title?: string;\n  description?: string;\n  metric?: 'student_visits' | 'equipment_usage' | 'book_circulation';\n  timeframe?: 'day' | 'week' | 'month';\n  onMetricChange?: (\n    metric: 'student_visits' | 'equipment_usage' | 'book_circulation'\n  ) => void;\n  onTimeframeChange?: (timeframe: 'day' | 'week' | 'month') => void;\n  showConfidence?: boolean;\n  showPredictions?: boolean;\n}\n\nconst METRIC_CONFIG = {\n  student_visits: {\n    label: 'Student Visits',\n    color: '#3b82f6',\n    icon: Activity,\n    unit: 'visits',\n  },\n  equipment_usage: {\n    label: 'Equipment Usage',\n    color: '#10b981',\n    icon: Activity,\n    unit: 'sessions',\n  },\n  book_circulation: {\n    label: 'Book Circulation',\n    color: '#f59e0b',\n    icon: Activity,\n    unit: 'transactions',\n  },\n};\n\nexport function TimeSeriesForecast({\n  data,\n  title,\n  description,\n  metric = 'student_visits',\n  timeframe = 'week',\n  onMetricChange,\n  onTimeframeChange,\n  showConfidence = true,\n  showPredictions = true,\n}: TimeSeriesForecastProps) {\n  const [showHistorical, setShowHistorical] = useState(true);\n  const [showBounds, setShowBounds] = useState(true);\n\n  const config = METRIC_CONFIG[metric];\n\n  // Process data for chart\n  const chartData = useMemo(() => {\n    return data.map((d) => ({\n      ...d,\n      date: new Date(d.timestamp).toLocaleDateString(),\n      timestamp: d.timestamp.getTime(),\n      hasPrediction: d.predicted !== undefined,\n    }));\n  }, [data]);\n\n  // Calculate statistics\n  const stats = useMemo(() => {\n    const historicalData = data.filter((d) => d.predicted === undefined);\n    const predictedData = data.filter((d) => d.predicted !== undefined);\n\n    const historicalValues = historicalData.map((d) => d.value);\n    const predictedValues = predictedData.map((d) => d.predicted || 0);\n\n    const lastHistorical = historicalValues[historicalValues.length - 1] || 0;\n    const avgHistorical =\n      historicalValues.reduce((sum, val) => sum + val, 0) /\n        historicalValues.length || 0;\n    const avgPredicted =\n      predictedValues.reduce((sum, val) => sum + val, 0) /\n        predictedValues.length || 0;\n\n    const trend =\n      avgPredicted > avgHistorical\n        ? 'increasing'\n        : avgPredicted < avgHistorical\n          ? 'decreasing'\n          : 'stable';\n    const trendPercent =\n      avgHistorical > 0\n        ? Math.round(((avgPredicted - avgHistorical) / avgHistorical) * 100)\n        : 0;\n\n    return {\n      lastHistorical,\n      avgHistorical: Math.round(avgHistorical),\n      avgPredicted: Math.round(avgPredicted),\n      trend,\n      trendPercent,\n      totalHistorical: historicalData.length,\n      totalPredicted: predictedData.length,\n      maxValue: Math.max(\n        ...data.map((d) =>\n          Math.max(d.value, d.predicted || d.value, d.upperBound || d.value)\n        )\n      ),\n      minValue: Math.min(\n        ...data.map((d) =>\n          Math.min(d.value, d.predicted || d.value, d.lowerBound || d.value)\n        )\n      ),\n    };\n  }, [data]);\n\n  // Custom tooltip\n  const CustomTooltip = ({\n    active,\n    payload,\n    label,\n  }: {\n    active?: boolean;\n    payload?: Array<{\n      payload: Record<string, unknown>;\n      name: string;\n      value: number;\n      color: string;\n    }>;\n    label?: string;\n  }) => {\n    if (active && payload?.length) {\n      const data = payload[0].payload;\n      return (\n        <div className=\"bg-background border rounded-lg shadow-lg p-3\">\n          <p className=\"text-sm font-medium mb-2\">{label}</p>\n          {payload.map(\n            (\n              entry: { name: string; value: number; color: string },\n              index: number\n            ) => (\n              <p key={index} className=\"text-sm\" style={{ color: entry.color }}>\n                {entry.name}: {entry.value} {config.unit}\n              </p>\n            )\n          )}\n          {data.hasPrediction && (\n            <div className=\"mt-2 pt-2 border-t text-xs text-muted-foreground\">\n              <p>\n                Confidence Range: {String(data.lowerBound)} -{' '}\n                {String(data.upperBound)}\n              </p>\n            </div>\n          )}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center space-x-2\">\n              <config.icon className=\"h-5 w-5\" />\n              <span>{title || `${config.label} Forecast`}</span>\n            </CardTitle>\n            <CardDescription>\n              {description ||\n                `Time series analysis and prediction for ${config.label.toLowerCase()}`}\n            </CardDescription>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {onMetricChange && (\n              <Select value={metric} onValueChange={onMetricChange}>\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {Object.entries(METRIC_CONFIG).map(([key, config]) => (\n                    <SelectItem key={key} value={key}>\n                      {config.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n\n            {onTimeframeChange && (\n              <Select value={timeframe} onValueChange={onTimeframeChange}>\n                <SelectTrigger className=\"w-32\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"day\">Daily</SelectItem>\n                  <SelectItem value=\"week\">Weekly</SelectItem>\n                  <SelectItem value=\"month\">Monthly</SelectItem>\n                </SelectContent>\n              </Select>\n            )}\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowHistorical(!showHistorical)}\n            >\n              {showHistorical ? (\n                <EyeOff className=\"h-4 w-4\" />\n              ) : (\n                <Eye className=\"h-4 w-4\" />\n              )}\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowBounds(!showBounds)}\n            >\n              <Settings className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          {/* Statistics Summary */}\n          <div className=\"grid gap-4 md:grid-cols-5\">\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"text-2xl font-bold\">{stats.avgHistorical}</div>\n              <div className=\"text-xs text-muted-foreground\">\n                Current Average\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"text-2xl font-bold\">{stats.avgPredicted}</div>\n              <div className=\"text-xs text-muted-foreground\">\n                Predicted Average\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"flex items-center space-x-2\">\n                {stats.trend === 'increasing' ? (\n                  <TrendingUp className=\"h-4 w-4 text-green-600\" />\n                ) : stats.trend === 'decreasing' ? (\n                  <TrendingDown className=\"h-4 w-4 text-red-600\" />\n                ) : (\n                  <Activity className=\"h-4 w-4 text-blue-600\" />\n                )}\n                <div className=\"text-2xl font-bold\">\n                  {stats.trendPercent > 0 ? '+' : ''}\n                  {stats.trendPercent}%\n                </div>\n              </div>\n              <div className=\"text-xs text-muted-foreground\">\n                {stats.trend === 'increasing'\n                  ? 'Increasing'\n                  : stats.trend === 'decreasing'\n                    ? 'Decreasing'\n                    : 'Stable'}\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"text-2xl font-bold\">{stats.totalHistorical}</div>\n              <div className=\"text-xs text-muted-foreground\">\n                Historical Points\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"text-2xl font-bold\">{stats.totalPredicted}</div>\n              <div className=\"text-xs text-muted-foreground\">\n                Predicted Points\n              </div>\n            </div>\n          </div>\n\n          {/* Chart */}\n          <div className=\"h-80\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <AreaChart data={chartData}>\n                <CartesianGrid\n                  strokeDasharray=\"3 3\"\n                  stroke=\"hsl(var(--border))\"\n                  opacity={0.3}\n                />\n                <XAxis\n                  dataKey=\"date\"\n                  tick={{ fill: 'hsl(var(--muted-foreground))', fontSize: 12 }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return date.toLocaleDateString('en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                    });\n                  }}\n                />\n                <YAxis\n                  tick={{ fill: 'hsl(var(--muted-foreground))', fontSize: 12 }}\n                  domain={[stats.minValue * 0.9, stats.maxValue * 1.1]}\n                />\n                <Tooltip content={<CustomTooltip />} />\n                <Legend />\n\n                {/* Confidence bounds */}\n                {showPredictions && showBounds && showConfidence && (\n                  <>\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"upperBound\"\n                      stackId=\"bounds\"\n                      stroke=\"none\"\n                      fill={config.color}\n                      fillOpacity={0.1}\n                      name=\"Upper Bound\"\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"lowerBound\"\n                      stackId=\"bounds\"\n                      stroke=\"none\"\n                      fill=\"white\"\n                      fillOpacity={0.8}\n                      name=\"Lower Bound\"\n                    />\n                  </>\n                )}\n\n                {/* Historical data */}\n                {showHistorical && (\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"value\"\n                    stroke={config.color}\n                    strokeWidth={2}\n                    dot={{ fill: config.color, r: 3 }}\n                    activeDot={{ r: 5 }}\n                    name=\"Historical\"\n                    connectNulls={false}\n                  />\n                )}\n\n                {/* Predicted data */}\n                {showPredictions && (\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"predicted\"\n                    stroke={config.color}\n                    strokeWidth={2}\n                    strokeDasharray=\"5 5\"\n                    dot={{ fill: config.color, r: 3 }}\n                    activeDot={{ r: 5 }}\n                    name=\"Predicted\"\n                    connectNulls={false}\n                  />\n                )}\n\n                {/* Reference line between historical and predicted */}\n                {showHistorical && showPredictions && (\n                  <ReferenceLine\n                    x={chartData.find((d) => d.hasPrediction)?.date || ''}\n                    stroke=\"hsl(var(--border))\"\n                    strokeDasharray=\"3 3\"\n                    strokeWidth={1}\n                  />\n                )}\n              </AreaChart>\n            </ResponsiveContainer>\n          </div>\n\n          {/* Forecast Information */}\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"p-4 bg-muted/30 rounded-lg\">\n              <h4 className=\"text-sm font-medium mb-2\">Forecast Details</h4>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span>Time Period:</span>\n                  <span className=\"font-medium\">{timeframe}ly</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Prediction Method:</span>\n                  <span className=\"font-medium\">Exponential Smoothing</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Confidence Level:</span>\n                  <span className=\"font-medium\">95%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Data Points:</span>\n                  <span className=\"font-medium\">{chartData.length}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-4 bg-muted/30 rounded-lg\">\n              <h4 className=\"text-sm font-medium mb-2\">Trend Analysis</h4>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span>Current Trend:</span>\n                  <Badge\n                    variant={\n                      stats.trend === 'increasing'\n                        ? 'default'\n                        : stats.trend === 'decreasing'\n                          ? 'destructive'\n                          : 'secondary'\n                    }\n                  >\n                    {stats.trend}\n                  </Badge>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Change Rate:</span>\n                  <span className=\"font-medium\">{stats.trendPercent}%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Peak Value:</span>\n                  <span className=\"font-medium\">\n                    {Math.round(stats.maxValue)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Min Value:</span>\n                  <span className=\"font-medium\">\n                    {Math.round(stats.minValue)}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-between pt-4 border-t\">\n            <div className=\"text-sm text-muted-foreground\">\n              Forecast generated using historical data and statistical analysis\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Button variant=\"outline\" size=\"sm\">\n                <Download className=\"h-4 w-4 mr-2\" />\n                Export Data\n              </Button>\n              <Button variant=\"outline\" size=\"sm\">\n                <Calendar className=\"h-4 w-4 mr-2\" />\n                Schedule Report\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default TimeSeriesForecast;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\analytics\\UsageHeatMap.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[570,587],"text":""},"desc":"Remove unused variable 'data'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Activity, Users, Monitor } from 'lucide-react';\n\ninterface HeatMapData {\n  hour: number;\n  dayOfWeek: number;\n  intensity: number;\n  activityType?: string;\n  gradeLevel?: string;\n}\n\ninterface UsageHeatMapProps {\n  data: HeatMapData[];\n  title?: string;\n  description?: string;\n  onCellClick?: (data: HeatMapData) => void;\n  filterType?: 'all' | 'activity' | 'grade';\n  timeframe?: string;\n}\n\nconst ACTIVITY_COLORS = {\n  COMPUTER_USE: '#3b82f6',\n  GAMING: '#8b5cf6',\n  STUDY: '#10b981',\n  BOOK_BORROW: '#f59e0b',\n  BOOK_RETURN: '#ef4444',\n  VR_SESSION: '#06b6d4',\n};\n\nconst DAY_LABELS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst HOUR_LABELS = Array.from(\n  { length: 24 },\n  (_, i) => `${i.toString().padStart(2, '0')}:00`\n);\n\nexport function UsageHeatMap({\n  data,\n  title = 'Library Usage Heat Map',\n  description = 'Visual representation of library usage patterns throughout the week',\n  onCellClick,\n  filterType = 'all',\n}: UsageHeatMapProps) {\n  const [selectedActivity, setSelectedActivity] = useState<string>('all');\n  const [selectedGrade, setSelectedGrade] = useState<string>('all');\n\n  // Process and aggregate data for heat map\n  const heatMapData = useMemo(() => {\n    const processed: { [key: string]: HeatMapData } = {};\n\n    data.forEach((item) => {\n      const key = `${item.dayOfWeek}-${item.hour}`;\n\n      // Apply filters\n      if (\n        filterType === 'activity' &&\n        selectedActivity !== 'all' &&\n        item.activityType !== selectedActivity\n      ) {\n        return;\n      }\n      if (\n        filterType === 'grade' &&\n        selectedGrade !== 'all' &&\n        item.gradeLevel !== selectedGrade\n      ) {\n        return;\n      }\n\n      if (!processed[key]) {\n        processed[key] = {\n          hour: item.hour,\n          dayOfWeek: item.dayOfWeek,\n          intensity: 0,\n          ...(item.activityType && { activityType: item.activityType }),\n          ...(item.gradeLevel && { gradeLevel: item.gradeLevel }),\n        };\n      }\n\n      // Key exists because we just set it above or it already existed\n      if (processed[key]) {\n        processed[key].intensity += item.intensity;\n      }\n    });\n\n    return Object.values(processed);\n  }, [data, selectedActivity, selectedGrade, filterType]);\n\n  // Find max intensity for normalization\n  const maxIntensity = useMemo(() => {\n    return Math.max(...heatMapData.map((d) => d.intensity), 1);\n  }, [heatMapData]);\n\n  // Get unique activity types and grades for filters\n  const activityTypes = useMemo(() => {\n    const types = [...new Set(data.map((d) => d.activityType).filter(Boolean))];\n    return types.sort();\n  }, [data]);\n\n  const gradeLevels = useMemo(() => {\n    const grades = [...new Set(data.map((d) => d.gradeLevel).filter(Boolean))];\n    return grades.sort();\n  }, [data]);\n\n  // Get color based on intensity\n  const getCellColor = (intensity: number, maxIntensity: number) => {\n    const normalizedIntensity = intensity / maxIntensity;\n    if (normalizedIntensity === 0) {\n      return 'bg-gray-100';\n    }\n    if (normalizedIntensity < 0.2) {\n      return 'bg-blue-100';\n    }\n    if (normalizedIntensity < 0.4) {\n      return 'bg-blue-200';\n    }\n    if (normalizedIntensity < 0.6) {\n      return 'bg-blue-300';\n    }\n    if (normalizedIntensity < 0.8) {\n      return 'bg-blue-400';\n    }\n    return 'bg-blue-500';\n  };\n\n  // Format cell tooltip\n  const getCellTooltip = (cellData: HeatMapData) => {\n    const dayName = DAY_LABELS[cellData.dayOfWeek];\n    const hour = HOUR_LABELS[cellData.hour];\n    const activity = cellData.activityType\n      ? ` (${cellData.activityType.replace('_', ' ')})`\n      : '';\n    const grade = cellData.gradeLevel\n      ? ` - Grade: ${cellData.gradeLevel.replace('_', ' ')}`\n      : '';\n\n    return `${dayName} ${hour}${activity}${grade}: ${cellData.intensity} activities`;\n  };\n\n  // Get peak usage information\n  const peakUsage = useMemo(() => {\n    return heatMapData\n      .sort((a, b) => b.intensity - a.intensity)\n      .slice(0, 5)\n      .map((d) => ({\n        day: DAY_LABELS[d.dayOfWeek],\n        hour: HOUR_LABELS[d.hour],\n        intensity: d.intensity,\n      }));\n  }, [heatMapData]);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle>{title}</CardTitle>\n            <CardDescription>{description}</CardDescription>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {filterType === 'activity' && (\n              <Select\n                value={selectedActivity}\n                onValueChange={setSelectedActivity}\n              >\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Activities</SelectItem>\n                  {activityTypes.map((type) => (\n                    <SelectItem key={type} value={type || ''}>\n                      {type?.replace('_', ' ')}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n\n            {filterType === 'grade' && (\n              <Select value={selectedGrade} onValueChange={setSelectedGrade}>\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Grades</SelectItem>\n                  {gradeLevels.map((grade) => (\n                    <SelectItem key={grade} value={grade || ''}>\n                      {grade?.replace('_', ' ')}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          {/* Peak Usage Summary */}\n          <div className=\"grid gap-4 md:grid-cols-5\">\n            {peakUsage.map((peak, index) => (\n              <div\n                key={index}\n                className=\"text-center p-3 bg-muted/50 rounded-lg\"\n              >\n                <div className=\"text-2xl font-bold text-primary\">\n                  {peak.intensity}\n                </div>\n                <div className=\"text-sm font-medium\">{peak.day}</div>\n                <div className=\"text-xs text-muted-foreground\">{peak.hour}</div>\n              </div>\n            ))}\n          </div>\n\n          {/* Heat Map Grid */}\n          <div className=\"overflow-x-auto\">\n            <div className=\"min-w-[800px]\">\n              {/* Hour labels */}\n              <div className=\"grid grid-cols-25 gap-1 mb-2\">\n                <div className=\"w-16\" /> {/* Empty corner */}\n                {HOUR_LABELS.map((hour, index) => (\n                  <div\n                    key={index}\n                    className=\"text-xs text-center text-muted-foreground rotate-45 origin-bottom\"\n                  >\n                    {hour}\n                  </div>\n                ))}\n              </div>\n\n              {/* Heat map rows */}\n              {DAY_LABELS.map((day, dayIndex) => (\n                <div key={dayIndex} className=\"grid grid-cols-25 gap-1 mb-1\">\n                  {/* Day label */}\n                  <div className=\"w-16 text-sm font-medium text-right pr-2 flex items-center justify-end\">\n                    {day}\n                  </div>\n\n                  {/* Heat map cells */}\n                  {HOUR_LABELS.map((_, hourIndex) => {\n                    const cellData = heatMapData.find(\n                      (d) => d.dayOfWeek === dayIndex && d.hour === hourIndex\n                    );\n                    const intensity = cellData?.intensity || 0;\n                    const color = getCellColor(intensity, maxIntensity);\n\n                    return (\n                      <div\n                        key={hourIndex}\n                        className={`w-8 h-8 rounded cursor-pointer transition-all duration-200 hover:scale-110 ${color}`}\n                        title={\n                          cellData\n                            ? getCellTooltip(cellData)\n                            : `${day} ${HOUR_LABELS[hourIndex]}: No activity`\n                        }\n                        onClick={() => cellData && onCellClick?.(cellData)}\n                      >\n                        {intensity > 0 && (\n                          <div className=\"w-full h-full flex items-center justify-center\">\n                            {cellData?.activityType && (\n                              <div\n                                className=\"w-2 h-2 rounded-full\"\n                                style={{\n                                  backgroundColor:\n                                    ACTIVITY_COLORS[\n                                      cellData.activityType as keyof typeof ACTIVITY_COLORS\n                                    ] || '#666',\n                                }}\n                              />\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Legend */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-sm font-medium\">Intensity:</span>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-gray-100 rounded\" />\n                <span className=\"text-xs text-muted-foreground\">None</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-blue-200 rounded\" />\n                <span className=\"text-xs text-muted-foreground\">Low</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-blue-300 rounded\" />\n                <span className=\"text-xs text-muted-foreground\">Medium</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-blue-400 rounded\" />\n                <span className=\"text-xs text-muted-foreground\">High</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-blue-500 rounded\" />\n                <span className=\"text-xs text-muted-foreground\">Peak</span>\n              </div>\n            </div>\n\n            {filterType === 'activity' && (\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium\">Activities:</span>\n                <div className=\"flex items-center space-x-2\">\n                  {Object.entries(ACTIVITY_COLORS)\n                    .slice(0, 4)\n                    .map(([type, color]) => (\n                      <div key={type} className=\"flex items-center space-x-1\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: color }}\n                        />\n                        <span className=\"text-xs text-muted-foreground\">\n                          {type.replace('_', ' ').substring(0, 6)}\n                        </span>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Statistics */}\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Users className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm font-medium\">Total Activities</span>\n              </div>\n              <div className=\"text-2xl font-bold\">\n                {heatMapData.reduce((sum, d) => sum + d.intensity, 0)}\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Activity className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm font-medium\">Active Hours</span>\n              </div>\n              <div className=\"text-2xl font-bold\">\n                {heatMapData.filter((d) => d.intensity > 0).length}\n              </div>\n            </div>\n\n            <div className=\"p-3 bg-muted/30 rounded\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Monitor className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm font-medium\">Peak Intensity</span>\n              </div>\n              <div className=\"text-2xl font-bold\">{maxIntensity}</div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default UsageHeatMap;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\attendance\\ActiveStudentsList.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'mode' is defined but never used. Allowed unused args must match /^_/u.","line":17,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"mode"},"fix":{"range":[456,477],"text":""},"desc":"Remove unused variable 'mode'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { Grid, List, Clock } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\n\nexport interface ActiveStudent {\n  id: string;\n  name: string;\n  checkedInAt: Date;\n  autoLogoutAt: Date;\n}\n\nexport interface ActiveStudentsListProps {\n  students: ActiveStudent[];\n  viewMode?: 'grid' | 'list';\n  onViewModeChange?: (mode: 'grid' | 'list') => void;\n  className?: string;\n}\n\nexport const ActiveStudentsList: React.FC<ActiveStudentsListProps> = ({\n  students,\n  viewMode: controlledViewMode,\n  onViewModeChange,\n  className,\n}) => {\n  const [internalViewMode, setInternalViewMode] = useState<'grid' | 'list'>(\n    'list'\n  );\n  const viewMode = controlledViewMode || internalViewMode;\n\n  const handleViewModeChange = (mode: 'grid' | 'list') => {\n    if (onViewModeChange) {\n      onViewModeChange(mode);\n    } else {\n      setInternalViewMode(mode);\n    }\n  };\n\n  const getTimeRemaining = (autoLogoutAt: Date) => {\n    const now = new Date();\n    const diff = autoLogoutAt.getTime() - now.getTime();\n    const minutes = Math.floor(diff / 1000 / 60);\n    const seconds = Math.floor((diff / 1000) % 60);\n\n    if (minutes < 0) {\n      return 'Logging out...';\n    }\n\n    return `${minutes}:${seconds.toString().padStart(2, '0')} remaining`;\n  };\n\n  const StudentCard: React.FC<{ student: ActiveStudent }> = ({ student }) => (\n    <div className=\"border rounded-lg p-4 bg-card hover:bg-accent transition-colors\">\n      <h3 className=\"font-semibold text-lg mb-2\">{student.name}</h3>\n      <div className=\"text-sm text-muted-foreground space-y-1\">\n        <p className=\"flex items-center gap-2\">\n          <Clock className=\"h-4 w-4\" aria-hidden=\"true\" />\n          Checked in{' '}\n          {formatDistanceToNow(student.checkedInAt, { addSuffix: true })}\n        </p>\n        <p className=\"font-medium text-orange-500\">\n          {getTimeRemaining(student.autoLogoutAt)}\n        </p>\n      </div>\n    </div>\n  );\n\n  const StudentRow: React.FC<{ student: ActiveStudent }> = ({ student }) => (\n    <div className=\"flex items-center justify-between py-3 px-4 border-b last:border-b-0 hover:bg-accent transition-colors\">\n      <div>\n        <h3 className=\"font-semibold\">{student.name}</h3>\n        <p className=\"text-sm text-muted-foreground\">\n          Checked in{' '}\n          {formatDistanceToNow(student.checkedInAt, { addSuffix: true })}\n        </p>\n      </div>\n      <div className=\"text-right\">\n        <p className=\"text-sm font-medium text-orange-500\">\n          {getTimeRemaining(student.autoLogoutAt)}\n        </p>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold\">\n          Currently Checked In ({students.length})\n        </h2>\n        <div className=\"flex gap-2\">\n          <Button\n            variant={viewMode === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => {\n              handleViewModeChange('list');\n            }}\n            aria-label=\"List view\"\n            aria-pressed={viewMode === 'list'}\n          >\n            <List className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Button>\n          <Button\n            variant={viewMode === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => {\n              handleViewModeChange('grid');\n            }}\n            aria-label=\"Grid view\"\n            aria-pressed={viewMode === 'grid'}\n          >\n            <Grid className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Button>\n        </div>\n      </div>\n\n      {students.length === 0 ? (\n        <div className=\"text-center py-12 text-muted-foreground\">\n          <p className=\"text-lg\">No students currently checked in</p>\n        </div>\n      ) : (\n        <div\n          className={cn(\n            viewMode === 'grid'\n              ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4'\n              : 'border rounded-lg bg-card'\n          )}\n        >\n          {students.map((student) =>\n            viewMode === 'grid' ? (\n              <StudentCard key={student.id} student={student} />\n            ) : (\n              <StudentRow key={student.id} student={student} />\n            )\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nActiveStudentsList.displayName = 'ActiveStudentsList';\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\attendance\\AttendanceDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\attendance\\AttendanceEvent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\attendance\\AttendanceReports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\attendance\\AttendanceTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\auth\\LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\auth\\ProtectedRoute.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'devBypass' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"devBypass"},"fix":{"range":[359,397],"text":""},"desc":"Remove unused variable 'devBypass'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport LoginForm from './LoginForm';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRole?: string;\n}\n\nexport default function ProtectedRoute({\n  children,\n  requiredRole,\n}: ProtectedRouteProps) {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  const devBypass = import.meta.env.DEV;\n\n  // Show loading spinner while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-background\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Checking authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // If not authenticated, show login form\n  if (!isAuthenticated) {\n    return <LoginForm onLoginSuccess={() => {}} />;\n  }\n\n  // If role is required and user doesn't have the required role\n  if (requiredRole && user && !hasRequiredRole(user.role, requiredRole)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-background\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\"></div>\n          <h1 className=\"text-2xl font-bold mb-2\">Access Denied</h1>\n          <p className=\"text-muted-foreground mb-4\">\n            You don't have permission to access this area.\n          </p>\n          <p className=\"text-sm text-muted-foreground\">\n            Required role: {requiredRole}\n            <br />\n            Your role: {user?.role}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // User is authenticated and has required role, show protected content\n  return <>{children}</>;\n}\n\n// Helper function to check if user has required role\nfunction hasRequiredRole(userRole: string, requiredRole: string): boolean {\n  // Define role hierarchy\n  const roleHierarchy: { [key: string]: number } = {\n    USER: 1,\n    STAFF: 2,\n    LIBRARIAN: 3,\n    ADMIN: 4,\n  };\n\n  const userLevel = roleHierarchy[userRole] || 0;\n  const requiredLevel = roleHierarchy[requiredRole] || 0;\n\n  return userLevel >= requiredLevel;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\backup\\BackupManagement.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used. Allowed unused args must match /^_/u.","line":493,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":493,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[17240,17269],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'description' is defined but never used. Allowed unused args must match /^_/u.","line":493,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":493,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"description"},"fix":{"range":[17268,17290],"text":""},"desc":"Remove unused variable 'description'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'backup' is defined but never used. Allowed unused args must match /^_/u.","line":601,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":601,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"backup"},"fix":{"range":[21148,21171],"text":""},"desc":"Remove unused variable 'backup'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'dryRun' is defined but never used. Allowed unused args must match /^_/u.","line":601,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":601,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"dryRun"},"fix":{"range":[21170,21187],"text":""},"desc":"Remove unused variable 'dryRun'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Database,\n  Download,\n  Upload,\n  RefreshCw,\n  Trash2,\n  CheckCircle,\n  XCircle,\n  Clock,\n  HardDrive,\n  Shield,\n  AlertTriangle,\n  FileArchive,\n  History as HistoryIcon,\n  Play,\n} from 'lucide-react';\nimport backupApi, {\n  type BackupMetadata,\n  type BackupStatistics,\n} from '../../services/backupApi';\nimport { useToast } from '../ToastContainer';\nimport { getErrorMessage } from '@/utils/errorHandling';\n\nconst BackupManagement: React.FC = () => {\n  const [backups, setBackups] = useState<BackupMetadata[]>([]);\n  const [statistics, setStatistics] = useState<BackupStatistics | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [typeFilter, setTypeFilter] = useState<'ALL' | 'FULL' | 'INCREMENTAL'>(\n    'ALL'\n  );\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showRestoreModal, setShowRestoreModal] = useState(false);\n  const [selectedBackup, setSelectedBackup] = useState<BackupMetadata | null>(\n    null\n  );\n\n  const toast = useToast();\n\n  const fetchBackups = useCallback(async () => {\n    try {\n      setLoading(true);\n      const params: Record<string, unknown> = {};\n\n      if (typeFilter !== 'ALL') {\n        params.type = typeFilter;\n      }\n\n      const response = await backupApi.listBackups(params);\n      setBackups(response.data);\n    } catch (error) {\n      toast.error('Error', 'Failed to fetch backups');\n      console.error('Error fetching backups:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [typeFilter, toast]);\n\n  const fetchStatistics = useCallback(async () => {\n    try {\n      const response = await backupApi.getStatistics();\n      setStatistics(response.data);\n    } catch (error) {\n      console.error('Error fetching statistics:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchBackups();\n    fetchStatistics();\n  }, [fetchBackups, fetchStatistics]);\n\n  const handleCreateBackup = async (\n    type: 'FULL' | 'INCREMENTAL',\n    description?: string\n  ) => {\n    try {\n      setCreating(true);\n\n      if (type === 'FULL') {\n        await backupApi.createFullBackup(description);\n        toast.success('Success', 'Full backup created successfully');\n      } else {\n        await backupApi.createIncrementalBackup(description);\n        toast.success('Success', 'Incremental backup created successfully');\n      }\n\n      setShowCreateModal(false);\n      fetchBackups();\n      fetchStatistics();\n    } catch (error: unknown) {\n      toast.error('Error', getErrorMessage(error, 'Failed to create backup'));\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const handleVerifyBackup = async (backup: BackupMetadata) => {\n    try {\n      const response = await backupApi.verifyBackup(backup.id);\n\n      if (response.data.valid) {\n        toast.success('Success', 'Backup verified successfully');\n      } else {\n        toast.error('Error', 'Backup verification failed');\n      }\n\n      fetchBackups();\n    } catch (error: unknown) {\n      toast.error('Error', getErrorMessage(error, 'Failed to verify backup'));\n    }\n  };\n\n  const handleRestoreBackup = async (\n    backup: BackupMetadata,\n    dryRun: boolean = false\n  ) => {\n    if (!dryRun) {\n      const confirmed = window.confirm(\n        ` WARNING: This will restore the database to the state at ${formatDateTime(backup.createdAt)}.\\n\\nAll current data will be replaced with the backup data.\\n\\nAre you absolutely sure you want to proceed?`\n      );\n\n      if (!confirmed) {\n        return;\n      }\n    }\n\n    try {\n      await backupApi.restoreBackup(backup.id, dryRun);\n\n      if (dryRun) {\n        toast.success('Success', 'Dry run completed successfully');\n      } else {\n        toast.success('Success', 'Database restored successfully');\n        window.location.reload(); // Reload to reflect changes\n      }\n\n      setShowRestoreModal(false);\n      setSelectedBackup(null);\n    } catch (error: unknown) {\n      toast.error('Error', getErrorMessage(error, 'Failed to restore backup'));\n    }\n  };\n\n  const handleDeleteBackup = async (backup: BackupMetadata) => {\n    if (\n      !window.confirm(\n        `Are you sure you want to delete backup \"${backup.filename}\"?`\n      )\n    ) {\n      return;\n    }\n\n    try {\n      await backupApi.deleteBackup(backup.id);\n      toast.success('Success', 'Backup deleted successfully');\n      fetchBackups();\n      fetchStatistics();\n    } catch (error: unknown) {\n      toast.error('Error', getErrorMessage(error, 'Failed to delete backup'));\n    }\n  };\n\n  const formatSize = (bytes: number): string => {\n    if (bytes === 0) {\n      return '0 B';\n    }\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`;\n  };\n\n  const formatDateTime = (dateString: string): string => {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const getStatusBadge = (status: BackupMetadata['status']) => {\n    const badges = {\n      COMPLETED: {\n        color: 'bg-green-100 text-green-800 border-green-300',\n        icon: <CheckCircle className=\"w-3 h-3\" />,\n        text: 'Completed',\n      },\n      FAILED: {\n        color: 'bg-red-100 text-red-800 border-red-300',\n        icon: <XCircle className=\"w-3 h-3\" />,\n        text: 'Failed',\n      },\n      IN_PROGRESS: {\n        color: 'bg-blue-100 text-blue-800 border-blue-300',\n        icon: <RefreshCw className=\"w-3 h-3 animate-spin\" />,\n        text: 'In Progress',\n      },\n      PENDING: {\n        color: 'bg-gray-100 text-gray-800 border-gray-300',\n        icon: <Clock className=\"w-3 h-3\" />,\n        text: 'Pending',\n      },\n    };\n\n    const badge = badges[status];\n\n    return (\n      <span\n        className={`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${badge.color}`}\n      >\n        {badge.icon}\n        {badge.text}\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Backup & Restore</h1>\n          <p className=\"text-gray-600 mt-1\">\n            Manage database backups and restore points\n          </p>\n        </div>\n        <button\n          onClick={() => setShowCreateModal(true)}\n          disabled={creating}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n        >\n          <Download className=\"w-5 h-5\" />\n          Create Backup\n        </button>\n      </div>\n\n      {/* Statistics Cards */}\n      {statistics && (\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Backups</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {statistics.total}\n                </p>\n              </div>\n              <Database className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Full Backups</p>\n                <p className=\"text-2xl font-bold text-purple-600\">\n                  {statistics.fullBackups}\n                </p>\n              </div>\n              <FileArchive className=\"w-8 h-8 text-purple-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Incremental</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {statistics.incrementalBackups}\n                </p>\n              </div>\n              <HistoryIcon className=\"w-8 h-8 text-green-600\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Size</p>\n                <p className=\"text-2xl font-bold text-orange-600\">\n                  {formatSize(statistics.totalSize)}\n                </p>\n              </div>\n              <HardDrive className=\"w-8 h-8 text-orange-600\" />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Last Backup Info */}\n      {statistics?.lastBackup && (\n        <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4\">\n          <div className=\"flex items-center gap-3\">\n            <Clock className=\"w-5 h-5 text-blue-600\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-900\">\n                Last backup: {formatDateTime(statistics.lastBackup.createdAt)}\n              </p>\n              <p className=\"text-sm text-gray-600\">\n                {statistics.lastBackup.type} backup {' '}\n                {formatSize(statistics.lastBackup.size)}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Filters */}\n      <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n        <div className=\"flex items-center gap-4\">\n          <select\n            value={typeFilter}\n            onChange={(e) =>\n              setTypeFilter(e.target.value as 'ALL' | 'FULL' | 'INCREMENTAL')\n            }\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"ALL\">All Types</option>\n            <option value=\"FULL\">Full Backups</option>\n            <option value=\"INCREMENTAL\">Incremental Backups</option>\n          </select>\n\n          <button\n            onClick={fetchBackups}\n            disabled={loading}\n            className=\"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            <RefreshCw className={`w-5 h-5 ${loading ? 'animate-spin' : ''}`} />\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Backups Table */}\n      <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n        {loading ? (\n          <div className=\"flex items-center justify-center p-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n          </div>\n        ) : backups.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center p-12\">\n            <Database className=\"w-16 h-16 text-gray-400 mb-4\" />\n            <p className=\"text-gray-600\">No backups found</p>\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"mt-4 text-blue-600 hover:text-blue-700 text-sm\"\n            >\n              Create your first backup\n            </button>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Backup\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Size\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Created\n                  </th>\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {backups.map((backup) => (\n                  <tr key={backup.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <div className=\"font-medium text-gray-900\">\n                          {backup.filename}\n                        </div>\n                        {backup.description && (\n                          <div className=\"text-sm text-gray-500\">\n                            {backup.description}\n                          </div>\n                        )}\n                        {backup.verified && (\n                          <div className=\"flex items-center gap-1 text-xs text-green-600 mt-1\">\n                            <Shield className=\"w-3 h-3\" />\n                            Verified\n                          </div>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span\n                        className={`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${\n                          backup.type === 'FULL'\n                            ? 'bg-purple-100 text-purple-800 border-purple-300'\n                            : 'bg-green-100 text-green-800 border-green-300'\n                        }`}\n                      >\n                        {backup.type === 'FULL' ? (\n                          <Database className=\"w-3 h-3\" />\n                        ) : (\n                          <HistoryIcon className=\"w-3 h-3\" />\n                        )}\n                        {backup.type}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {getStatusBadge(backup.status)}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-600\">\n                      {formatSize(backup.size)}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-600\">\n                      {formatDateTime(backup.createdAt)}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        {backup.status === 'COMPLETED' && (\n                          <>\n                            <button\n                              onClick={() => handleVerifyBackup(backup)}\n                              className=\"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors\"\n                              title=\"Verify backup\"\n                            >\n                              <Shield className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                              onClick={() => {\n                                setSelectedBackup(backup);\n                                setShowRestoreModal(true);\n                              }}\n                              className=\"p-1.5 text-green-600 hover:bg-green-50 rounded transition-colors\"\n                              title=\"Restore backup\"\n                            >\n                              <Upload className=\"w-4 h-4\" />\n                            </button>\n                          </>\n                        )}\n                        <button\n                          onClick={() => handleDeleteBackup(backup)}\n                          className=\"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors\"\n                          title=\"Delete backup\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Create Backup Modal */}\n      {showCreateModal && (\n        <CreateBackupModal\n          onClose={() => setShowCreateModal(false)}\n          onCreate={handleCreateBackup}\n          creating={creating}\n        />\n      )}\n\n      {/* Restore Backup Modal */}\n      {showRestoreModal && selectedBackup && (\n        <RestoreBackupModal\n          backup={selectedBackup}\n          onClose={() => {\n            setShowRestoreModal(false);\n            setSelectedBackup(null);\n          }}\n          onRestore={handleRestoreBackup}\n        />\n      )}\n    </div>\n  );\n};\n\n// Create Backup Modal\nconst CreateBackupModal: React.FC<{\n  onClose: () => void;\n  onCreate: (type: 'FULL' | 'INCREMENTAL', description?: string) => void;\n  creating: boolean;\n}> = ({ onClose, onCreate, creating }) => {\n  const [type, setType] = useState<'FULL' | 'INCREMENTAL'>('FULL');\n  const [description, setDescription] = useState('');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onCreate(type, description || undefined);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h2 className=\"text-xl font-bold mb-4\">Create New Backup</h2>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Backup Type *\n            </label>\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50\">\n                <input\n                  type=\"radio\"\n                  value=\"FULL\"\n                  checked={type === 'FULL'}\n                  onChange={(e) =>\n                    setType(e.target.value as 'FULL' | 'INCREMENTAL')\n                  }\n                  className=\"text-blue-600\"\n                />\n                <div>\n                  <div className=\"font-medium\">Full Backup</div>\n                  <div className=\"text-sm text-gray-500\">\n                    Complete database snapshot\n                  </div>\n                </div>\n              </label>\n              <label className=\"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50\">\n                <input\n                  type=\"radio\"\n                  value=\"INCREMENTAL\"\n                  checked={type === 'INCREMENTAL'}\n                  onChange={(e) =>\n                    setType(e.target.value as 'FULL' | 'INCREMENTAL')\n                  }\n                  className=\"text-blue-600\"\n                />\n                <div>\n                  <div className=\"font-medium\">Incremental Backup</div>\n                  <div className=\"text-sm text-gray-500\">\n                    Changes since last backup\n                  </div>\n                </div>\n              </label>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Description (Optional)\n            </label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Add a description for this backup...\"\n            />\n          </div>\n\n          <div className=\"flex gap-2 justify-end mt-6\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={creating}\n              className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={creating}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\n            >\n              {creating ? (\n                <>\n                  <RefreshCw className=\"w-4 h-4 animate-spin\" />\n                  Creating...\n                </>\n              ) : (\n                <>\n                  <Download className=\"w-4 h-4\" />\n                  Create Backup\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Restore Backup Modal\nconst RestoreBackupModal: React.FC<{\n  backup: BackupMetadata;\n  onClose: () => void;\n  onRestore: (backup: BackupMetadata, dryRun: boolean) => void;\n}> = ({ backup, onClose, onRestore }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <AlertTriangle className=\"w-8 h-8 text-orange-600\" />\n          <h2 className=\"text-xl font-bold\">Restore Backup</h2>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n            <p className=\"text-sm text-orange-800\">\n              <strong>Warning:</strong> This action will replace all current\n              data with the backup data from{' '}\n              <strong>{new Date(backup.createdAt).toLocaleString()}</strong>.\n            </p>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-gray-600\">Backup:</span>\n              <span className=\"font-medium\">{backup.filename}</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-gray-600\">Type:</span>\n              <span className=\"font-medium\">{backup.type}</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-gray-600\">Size:</span>\n              <span className=\"font-medium\">\n                {(backup.size / (1024 * 1024)).toFixed(2)} MB\n              </span>\n            </div>\n            {backup.description && (\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600\">Description:</span>\n                <span className=\"font-medium\">{backup.description}</span>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex flex-col gap-2 mt-6\">\n            <button\n              onClick={() => onRestore(backup, true)}\n              className=\"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center justify-center gap-2\"\n            >\n              <Play className=\"w-4 h-4\" />\n              Dry Run (Test Only)\n            </button>\n            <button\n              onClick={() => onRestore(backup, false)}\n              className=\"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center justify-center gap-2\"\n            >\n              <Upload className=\"w-4 h-4\" />\n              Restore Database\n            </button>\n            <button\n              onClick={onClose}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BackupManagement;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\base\\BaseComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\books\\BookImportDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\books\\DuplicateTitlesDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\books\\TitleLookupCombobox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\client\\BookCatalogClient.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":234,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":234,"endColumn":18,"suggestions":[{"fix":{"range":[6565,6602],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { BookCard } from '@/components/ui/BookCard';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { toast } from 'sonner';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n  BookOpen,\r\n  Search,\r\n  RefreshCw,\r\n  ArrowUpDown,\r\n  Grid3X3,\r\n  List,\r\n} from 'lucide-react';\r\nimport { useDebounce } from '@/hooks/useDebounce';\r\nimport { useLocalStorage } from '@/hooks/useLocalStorage';\r\n\r\ninterface Book {\r\n  id: string;\r\n  isbn?: string;\r\n  accessionNo: string;\r\n  title: string;\r\n  author: string;\r\n  publisher?: string;\r\n  category: string;\r\n  subcategory?: string;\r\n  location?: string;\r\n  totalCopies: number;\r\n  availableCopies: number;\r\n  isActive: boolean;\r\n  barcodeImage?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\ninterface BookCatalogClientProps {\r\n  initialBooks?: Book[];\r\n  categories?: string[];\r\n}\r\n\r\nconst DEFAULT_CATEGORIES = [\r\n  'Fiction',\r\n  'Non-Fiction',\r\n  'Reference',\r\n  'Science',\r\n  'Mathematics',\r\n  'History',\r\n  'Literature',\r\n  'Technology',\r\n  'Arts',\r\n  'Biography',\r\n  'Children',\r\n  'Young Adult',\r\n];\r\n\r\nexport function BookCatalogClient({\r\n  initialBooks = [],\r\n  categories = DEFAULT_CATEGORIES,\r\n}: BookCatalogClientProps) {\r\n  // Modern hooks for state management\r\n  const [books, setBooks] = useState<Book[]>(initialBooks);\r\n  const [filteredBooks, setFilteredBooks] = useState<Book[]>(initialBooks);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // _Search and filter state\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n  const [sortBy, setSortBy] = useState<'title' | 'author' | 'created_at'>(\r\n    'title'\r\n  );\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n  const [availableOnly, setAvailableOnly] = useState(false);\r\n\r\n  // UI state with localStorage persistence\r\n  const [viewMode, setViewMode] = useLocalStorage<'grid' | 'list'>(\r\n    'book-view-mode',\r\n    'grid'\r\n  );\r\n  const [booksPerPage] = useLocalStorage('books-per-page', 20);\r\n\r\n  // Debounced _search query\r\n  const debouncedSearchQuery = useDebounce(searchQuery, 300);\r\n\r\n  // Memoized filter and sort logic\r\n  const filteredAndSortedBooks = useMemo(() => {\r\n    let filtered = books;\r\n\r\n    // Apply _search filter\r\n    if (debouncedSearchQuery) {\r\n      const query = debouncedSearchQuery.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (book) =>\r\n          book.title.toLowerCase().includes(query) ||\r\n          book.author.toLowerCase().includes(query) ||\r\n          book.isbn?.toLowerCase().includes(query) ||\r\n          book.accessionNo.toLowerCase().includes(query) ||\r\n          book.category.toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    // Apply category filter\r\n    if (selectedCategory !== 'all') {\r\n      filtered = filtered.filter((book) => book.category === selectedCategory);\r\n    }\r\n\r\n    // Apply availability filter\r\n    if (availableOnly) {\r\n      filtered = filtered.filter((book) => book.availableCopies > 0);\r\n    }\r\n\r\n    // Apply sorting\r\n    filtered.sort((a, b) => {\r\n      let aValue: string | number;\r\n      let bValue: string | number;\r\n\r\n      switch (sortBy) {\r\n        case 'author':\r\n          aValue = a.author.toLowerCase();\r\n          bValue = b.author.toLowerCase();\r\n          break;\r\n        case 'created_at':\r\n          aValue = new Date(a.createdAt).getTime();\r\n          bValue = new Date(b.createdAt).getTime();\r\n          break;\r\n        case 'title':\r\n        default:\r\n          aValue = a.title.toLowerCase();\r\n          bValue = b.title.toLowerCase();\r\n          break;\r\n      }\r\n\r\n      if (sortOrder === 'desc') {\r\n        return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n      } else {\r\n        return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n      }\r\n    });\r\n\r\n    return filtered;\r\n  }, [\r\n    books,\r\n    debouncedSearchQuery,\r\n    selectedCategory,\r\n    sortBy,\r\n    sortOrder,\r\n    availableOnly,\r\n  ]);\r\n\r\n  // Update filtered books when memoized result changes\r\n  useEffect(() => {\r\n    setFilteredBooks(filteredAndSortedBooks);\r\n  }, [filteredAndSortedBooks]);\r\n\r\n  // Fetch books from API\r\n  const fetchBooks = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/books', {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch books');\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setBooks(data.data.books || []);\r\n      } else {\r\n        setError(data.error || 'Failed to load books');\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n      setError(errorMessage);\r\n      toast.error('Failed to load books. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Handle book checkout\r\n  const handleCheckout = useCallback(async (bookId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/books/${bookId}/checkout`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to checkout book');\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        // Update local state to reflect checkout\r\n        setBooks((prev) =>\r\n          prev.map((book) =>\r\n            book.id === bookId\r\n              ? { ...book, availableCopies: book.availableCopies - 1 }\r\n              : book\r\n          )\r\n        );\r\n      } else {\r\n        throw new Error(data.error || 'Checkout failed');\r\n      }\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err instanceof Error ? err.message : 'Checkout failed';\r\n      throw new Error(errorMessage);\r\n    }\r\n  }, []);\r\n\r\n  // Handle view details\r\n  const handleViewDetails = useCallback((book: Book) => {\r\n    // This would typically open a dialog or navigate to a detail page\r\n    toast.info(`Viewing details for \"${book.title}\"`);\r\n    console.debug('Book details:', book);\r\n  }, []);\r\n\r\n  // Reset filters\r\n  const resetFilters = useCallback(() => {\r\n    setSearchQuery('');\r\n    setSelectedCategory('all');\r\n    setSortBy('title');\r\n    setSortOrder('asc');\r\n    setAvailableOnly(false);\r\n  }, []);\r\n\r\n  // Stats calculation\r\n  const stats = useMemo(() => {\r\n    const total = books.length;\r\n    const available = books.filter((book) => book.availableCopies > 0).length;\r\n    const checkedOut = books.reduce(\r\n      (sum, book) => sum + (book.totalCopies - book.availableCopies),\r\n      0\r\n    );\r\n    const uniqueCategories = new Set(books.map((book) => book.category)).size;\r\n\r\n    return { total, available, checkedOut, categories: uniqueCategories };\r\n  }, [books]);\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil(filteredBooks.length / booksPerPage);\r\n  const paginatedBooks = useMemo(() => {\r\n    const startIndex = 0; // Could add page state later\r\n    return filteredBooks.slice(startIndex, startIndex + booksPerPage);\r\n  }, [filteredBooks, booksPerPage]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header with stats */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold tracking-tight\">Book Catalog</h2>\r\n          <p className=\"text-muted-foreground\">\r\n            Browse and manage your library collection\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={fetchBooks}\r\n            disabled={isLoading}\r\n          >\r\n            <RefreshCw\r\n              className={`h-4 w-4 mr-2 ${isLoading ? 'animate-spin' : ''}`}\r\n            />\r\n            Refresh\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4\">\r\n        <div className=\"bg-background border rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-muted-foreground\">\r\n                Total Books\r\n              </p>\r\n              <p className=\"text-2xl font-bold\">{stats.total}</p>\r\n            </div>\r\n            <BookOpen className=\"h-8 w-8 text-muted-foreground\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-background border rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-muted-foreground\">\r\n                Available\r\n              </p>\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {stats.available}\r\n              </p>\r\n            </div>\r\n            <div className=\"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center\">\r\n              <div className=\"h-4 w-4 bg-green-500 rounded-full\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-background border rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-muted-foreground\">\r\n                Checked Out\r\n              </p>\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {stats.checkedOut}\r\n              </p>\r\n            </div>\r\n            <div className=\"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n              <div className=\"h-4 w-4 bg-blue-500 rounded-full\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-background border rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-muted-foreground\">\r\n                Categories\r\n              </p>\r\n              <p className=\"text-2xl font-bold text-purple-600\">\r\n                {stats.categories}\r\n              </p>\r\n            </div>\r\n            <div className=\"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center\">\r\n              <div className=\"h-4 w-4 bg-purple-500 rounded-full\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* _Search and Filters */}\r\n      <div className=\"bg-background border rounded-lg p-4 space-y-4\">\r\n        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n          {/* _Search */}\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder=\"Search books...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10\"\r\n            />\r\n          </div>\r\n\r\n          {/* Filters */}\r\n          <div className=\"flex gap-2\">\r\n            <Select\r\n              value={selectedCategory}\r\n              onValueChange={setSelectedCategory}\r\n            >\r\n              <SelectTrigger className=\"w-40\">\r\n                <SelectValue placeholder=\"Category\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All Categories</SelectItem>\r\n                {categories.map((category) => (\r\n                  <SelectItem key={category} value={category}>\r\n                    {category}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Select\r\n              value={sortBy}\r\n              onValueChange={(value: string) =>\r\n                setSortBy(value as 'title' | 'author' | 'created_at')\r\n              }\r\n            >\r\n              <SelectTrigger className=\"w-32\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"title\">Title</SelectItem>\r\n                <SelectItem value=\"author\">Author</SelectItem>\r\n                <SelectItem value=\"created_at\">Date Added</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"icon\"\r\n              onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\r\n            >\r\n              <ArrowUpDown className=\"h-4 w-4\" />\r\n            </Button>\r\n\r\n            <Button\r\n              variant={availableOnly ? 'default' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => setAvailableOnly(!availableOnly)}\r\n            >\r\n              Available Only\r\n            </Button>\r\n\r\n            <Button variant=\"outline\" size=\"sm\" onClick={resetFilters}>\r\n              Reset\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* View controls */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Showing {filteredBooks.length} of {books.length} books\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              variant={viewMode === 'grid' ? 'default' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => setViewMode('grid')}\r\n            >\r\n              <Grid3X3 className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant={viewMode === 'list' ? 'default' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => setViewMode('list')}\r\n            >\r\n              <List className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error state */}\r\n      {error && (\r\n        <Alert variant=\"destructive\">\r\n          <AlertDescription>\r\n            {typeof error === 'string' ? error : String(error)}\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Loading state */}\r\n      {isLoading && (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <RefreshCw className=\"h-8 w-8 animate-spin\" />\r\n          <span className=\"ml-2\">Loading books...</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Books display */}\r\n      {!isLoading && paginatedBooks.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <BookOpen className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n          <h3 className=\"text-lg font-semibold mb-2\">No books found</h3>\r\n          <p className=\"text-muted-foreground\">\r\n            {debouncedSearchQuery || selectedCategory !== 'all'\r\n              ? 'Try adjusting your _search or filters'\r\n              : 'No books available in the catalog'}\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div\r\n          className={\r\n            viewMode === 'grid'\r\n              ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6'\r\n              : 'space-y-4'\r\n          }\r\n        >\r\n          {paginatedBooks.map((book) => (\r\n            <BookCard\r\n              key={book.id}\r\n              book={book}\r\n              onCheckout={handleCheckout}\r\n              onViewDetails={handleViewDetails}\r\n              compact={viewMode === 'list'}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination footer */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Page 1 of {totalPages}\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button variant=\"outline\" size=\"sm\" disabled>\r\n              Previous\r\n            </Button>\r\n            <Button variant=\"outline\" size=\"sm\" disabled={totalPages <= 1}>\r\n              Next\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookCatalogClient;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ActiveStudentsManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ActivityHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\AddStudentDialog.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'open' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[590,603],"text":""},"desc":"Remove unused variable 'open'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { studentsApi } from '@/lib/api';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { toast } from 'sonner';\n\ninterface AddStudentDialogProps {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  trigger?: React.ReactNode;\n}\n\nexport function AddStudentDialog({\n  open: externalOpen,\n  onOpenChange,\n  trigger,\n}: AddStudentDialogProps = {}) {\n  const [internalOpen, setInternalOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formData, setFormData] = useState({\n    studentId: '',\n    firstName: '',\n    lastName: '',\n    grade: '',\n    section: '',\n  });\n\n  // Use external open state if provided, otherwise use internal\n  const open = externalOpen !== undefined ? externalOpen : internalOpen;\n  const setOpen = onOpenChange !== undefined ? onOpenChange : setInternalOpen;\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { id, value } = e.target;\n    setFormData((prev) => ({ ...prev, [id]: value }));\n  };\n\n  const getGradeCategory = (grade: string): string => {\n    const g = grade.toLowerCase();\n    if (\n      g.includes('k') ||\n      g.includes('grade 1') ||\n      g.includes('grade 2') ||\n      g.includes('grade 3')\n    )\n      return 'primary';\n    if (g.includes('grade 4') || g.includes('grade 5') || g.includes('grade 6'))\n      return 'gradeSchool';\n    if (g.includes('grade 7') || g.includes('grade 8') || g.includes('grade 9'))\n      return 'juniorHigh';\n    if (\n      g.includes('grade 10') ||\n      g.includes('grade 11') ||\n      g.includes('grade 12')\n    )\n      return 'seniorHigh';\n    return 'unknown';\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    try {\n      if (!formData.firstName || !formData.lastName || !formData.grade) {\n        toast.error('Please fill in required fields');\n        setIsSubmitting(false);\n        return;\n      }\n      const payload = {\n        student_id: formData.studentId || `TMP-${Date.now()}`,\n        first_name: formData.firstName,\n        last_name: formData.lastName,\n        grade_level: Number(formData.grade.match(/\\d+/)?.[0] || 0),\n        grade_category: getGradeCategory(formData.grade),\n        section: formData.section || undefined,\n      };\n      const response = await studentsApi.createStudent(payload);\n      if (response.success) {\n        toast.success('Student added successfully');\n        setOpen(false);\n        setFormData({\n          studentId: '',\n          firstName: '',\n          lastName: '',\n          grade: '',\n          section: '',\n        });\n      } else {\n        toast.error(response.error || 'Failed to add student');\n      }\n    } catch (error) {\n      console.error('Error adding student:', error);\n      toast.error('Failed to add student. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      {trigger && <DialogTrigger asChild>{trigger}</DialogTrigger>}\n      {!trigger && (\n        <DialogTrigger asChild>\n          <Button>Add Student</Button>\n        </DialogTrigger>\n      )}\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Add New Student</DialogTitle>\n          <DialogDescription>\n            Enter the details of the new student below.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"studentId\" className=\"text-right\">\n                Student ID\n              </Label>\n              <Input\n                id=\"studentId\"\n                value={formData.studentId}\n                onChange={handleInputChange}\n                placeholder=\"S-0001\"\n                className=\"col-span-3\"\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"firstName\" className=\"text-right\">\n                First Name\n              </Label>\n              <Input\n                id=\"firstName\"\n                value={formData.firstName}\n                onChange={handleInputChange}\n                className=\"col-span-3\"\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"lastName\" className=\"text-right\">\n                Last Name\n              </Label>\n              <Input\n                id=\"lastName\"\n                value={formData.lastName}\n                onChange={handleInputChange}\n                className=\"col-span-3\"\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"grade\" className=\"text-right\">\n                Grade\n              </Label>\n              <Select\n                value={formData.grade}\n                onValueChange={(value) =>\n                  setFormData((prev) => ({ ...prev, grade: value }))\n                }\n              >\n                <SelectTrigger className=\"col-span-3\">\n                  <SelectValue placeholder=\"Select grade\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Grade 1\">Grade 1</SelectItem>\n                  <SelectItem value=\"Grade 2\">Grade 2</SelectItem>\n                  <SelectItem value=\"Grade 3\">Grade 3</SelectItem>\n                  <SelectItem value=\"Grade 4\">Grade 4</SelectItem>\n                  <SelectItem value=\"Grade 5\">Grade 5</SelectItem>\n                  <SelectItem value=\"Grade 6\">Grade 6</SelectItem>\n                  <SelectItem value=\"Grade 7\">Grade 7</SelectItem>\n                  <SelectItem value=\"Grade 8\">Grade 8</SelectItem>\n                  <SelectItem value=\"Grade 9\">Grade 9</SelectItem>\n                  <SelectItem value=\"Grade 10\">Grade 10</SelectItem>\n                  <SelectItem value=\"Grade 11\">Grade 11</SelectItem>\n                  <SelectItem value=\"Grade 12\">Grade 12</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"section\" className=\"text-right\">\n                Section\n              </Label>\n              <Input\n                id=\"section\"\n                value={formData.section}\n                onChange={handleInputChange}\n                className=\"col-span-3\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"submit\" disabled={isSubmitting}>\n              {isSubmitting ? 'Adding...' : 'Add Student'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\AdvancedReporting.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'mockReports' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":323,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":323,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockReports"},"fix":{"range":[7692,7734],"text":""},"desc":"Remove unused variable 'mockReports'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'mockAlerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":325,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":325,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockAlerts"},"fix":{"range":[7738,7775],"text":""},"desc":"Remove unused variable 'mockAlerts'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { ButtonLoading } from '@/components/LoadingStates';\nimport {\n  FileText,\n  Download,\n  TrendingUp,\n  BarChart3,\n  Target,\n  Users,\n  Settings,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Plus,\n  Trash2,\n  Edit,\n} from 'lucide-react';\n\ninterface ReportTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category:\n    | 'operational'\n    | 'strategic'\n    | 'administrative'\n    | 'financial'\n    | 'performance';\n  type: 'daily' | 'weekly' | 'monthly' | 'quarterly' | 'yearly' | 'on_demand';\n  sections: ReportSection[];\n  includeInsights: boolean;\n  includeForecasts: boolean;\n  includeHeatMaps: boolean;\n  includeROI: boolean;\n  includeBenchmarks: boolean;\n  includeReadingPatterns: boolean;\n  includeSpaceUtilization: boolean;\n}\n\ninterface ReportSection {\n  id: string;\n  type:\n    | 'overview'\n    | 'kpi'\n    | 'chart'\n    | 'table'\n    | 'insights'\n    | 'heatmap'\n    | 'forecast'\n    | 'roi'\n    | 'benchmark'\n    | 'reading_patterns'\n    | 'space_utilization';\n  title: string;\n  enabled: boolean;\n  order: number;\n}\n\ninterface ReportConfig {\n  id?: string | undefined;\n  name: string;\n  description?: string | undefined;\n  type: string;\n  category: string;\n  recipients: string[];\n  format: 'html' | 'pdf' | 'excel' | 'csv' | 'json';\n  is_active: boolean;\n  schedule?: string | undefined;\n  sections: ReportSection[];\n}\n\ninterface GeneratedReport {\n  id: string;\n  name: string;\n  type: string;\n  format: string;\n  generated_at: string;\n  status: 'generating' | 'completed' | 'failed';\n  summary: string;\n  filePath?: string;\n}\n\ninterface AlertConfig {\n  id: string;\n  name: string;\n  type: string;\n  threshold: number;\n  operators: string;\n  recipients: string[];\n  is_active: boolean;\n  cooldownPeriod: number;\n  lastTriggered?: string;\n}\n\nexport function AdvancedReporting() {\n  const [activeTab, setActiveTab] = useState('templates');\n  const [reportConfigs, setReportConfigs] = useState<ReportConfig[]>([]);\n  const [generatedReports, setGeneratedReports] = useState<GeneratedReport[]>(\n    []\n  );\n  const [alertConfigs, setAlertConfigs] = useState<AlertConfig[]>([]);\n  const [showConfigDialog, setShowConfigDialog] = useState(false);\n  const [editingConfig, setEditingConfig] = useState<ReportConfig | null>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Mock data for demonstration\n  const reportTemplates: ReportTemplate[] = [\n    {\n      id: 'weekly_operational',\n      name: 'Weekly Operational Report',\n      description:\n        'Comprehensive weekly operational overview with KPIs and insights',\n      category: 'operational',\n      type: 'weekly',\n      sections: [\n        {\n          id: 'overview',\n          type: 'overview',\n          title: 'Library Overview',\n          enabled: true,\n          order: 1,\n        },\n        {\n          id: 'kpi',\n          type: 'kpi',\n          title: 'Key Performance Indicators',\n          enabled: true,\n          order: 2,\n        },\n        {\n          id: 'activities',\n          type: 'table',\n          title: 'Recent Activities',\n          enabled: true,\n          order: 3,\n        },\n        {\n          id: 'insights',\n          type: 'insights',\n          title: 'Predictive Insights',\n          enabled: true,\n          order: 4,\n        },\n      ],\n      includeInsights: true,\n      includeForecasts: false,\n      includeHeatMaps: false,\n      includeROI: false,\n      includeBenchmarks: false,\n      includeReadingPatterns: false,\n      includeSpaceUtilization: false,\n    },\n    {\n      id: 'monthly_strategic',\n      name: 'Monthly Strategic Report',\n      description:\n        'Strategic analysis with ROI, benchmarks, and long-term trends',\n      category: 'strategic',\n      type: 'monthly',\n      sections: [\n        {\n          id: 'overview',\n          type: 'overview',\n          title: 'Executive Summary',\n          enabled: true,\n          order: 1,\n        },\n        {\n          id: 'kpi',\n          type: 'kpi',\n          title: 'Performance Metrics',\n          enabled: true,\n          order: 2,\n        },\n        {\n          id: 'roi',\n          type: 'roi',\n          title: 'Return on Investment',\n          enabled: true,\n          order: 3,\n        },\n        {\n          id: 'benchmarks',\n          type: 'benchmark',\n          title: 'Industry Benchmarks',\n          enabled: true,\n          order: 4,\n        },\n        {\n          id: 'insights',\n          type: 'insights',\n          title: 'Strategic Insights',\n          enabled: true,\n          order: 5,\n        },\n      ],\n      includeInsights: true,\n      includeForecasts: true,\n      includeHeatMaps: true,\n      includeROI: true,\n      includeBenchmarks: true,\n      includeReadingPatterns: false,\n      includeSpaceUtilization: false,\n    },\n    {\n      id: 'reading_analytics',\n      name: 'Student Reading Analytics',\n      description:\n        'Detailed analysis of student reading patterns and engagement',\n      category: 'administrative',\n      type: 'monthly',\n      sections: [\n        {\n          id: 'overview',\n          type: 'overview',\n          title: 'Reading Program Overview',\n          enabled: true,\n          order: 1,\n        },\n        {\n          id: 'reading_patterns',\n          type: 'reading_patterns',\n          title: 'Reading Patterns',\n          enabled: true,\n          order: 2,\n        },\n        {\n          id: 'activities',\n          type: 'table',\n          title: 'Top Readers',\n          enabled: true,\n          order: 3,\n        },\n        {\n          id: 'insights',\n          type: 'insights',\n          title: 'Reading Insights',\n          enabled: true,\n          order: 4,\n        },\n      ],\n      includeInsights: true,\n      includeForecasts: false,\n      includeHeatMaps: false,\n      includeROI: false,\n      includeBenchmarks: true,\n      includeReadingPatterns: true,\n      includeSpaceUtilization: false,\n    },\n    {\n      id: 'space_utilization',\n      name: 'Space Utilization Report',\n      description:\n        'Analysis of library space usage and optimization recommendations',\n      category: 'operational',\n      type: 'weekly',\n      sections: [\n        {\n          id: 'overview',\n          type: 'overview',\n          title: 'Space Overview',\n          enabled: true,\n          order: 1,\n        },\n        {\n          id: 'space_utilization',\n          type: 'space_utilization',\n          title: 'Area Utilization',\n          enabled: true,\n          order: 2,\n        },\n        {\n          id: 'heatmap',\n          type: 'heatmap',\n          title: 'Usage Heat Map',\n          enabled: true,\n          order: 3,\n        },\n        {\n          id: 'insights',\n          type: 'insights',\n          title: 'Space Optimization Insights',\n          enabled: true,\n          order: 4,\n        },\n      ],\n      includeInsights: true,\n      includeForecasts: false,\n      includeHeatMaps: true,\n      includeROI: false,\n      includeBenchmarks: false,\n      includeReadingPatterns: false,\n      includeSpaceUtilization: true,\n    },\n  ];\n\n  const mockReports: GeneratedReport[] = [];\n\n  const mockAlerts: AlertConfig[] = [];\n\n  useEffect(() => {\n    setGeneratedReports([]);\n    setAlertConfigs([]);\n  }, []);\n\n  const handleGenerateReport = async (\n    template: ReportTemplate,\n    format: string\n  ) => {\n    setIsGenerating(true);\n    try {\n      // Mock API call\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n\n      const newReport: GeneratedReport = {\n        id: Date.now().toString(),\n        name: template.name,\n        type: template.type,\n        format,\n        generated_at: new Date().toISOString(),\n        status: 'completed',\n        summary: `Generated ${template.name} in ${format} format successfully.`,\n        filePath: `/reports/${template.name}_${Date.now()}.${format}`,\n      };\n\n      setGeneratedReports((prev) => [newReport, ...prev]);\n    } catch (error) {\n      console.error('Failed to generate report:', error);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleSaveConfig = (config: ReportConfig) => {\n    if (editingConfig) {\n      setReportConfigs((prev) =>\n        prev.map((c) =>\n          c.id === editingConfig.id ? { ...config, id: editingConfig.id } : c\n        )\n      );\n    } else {\n      const newConfig: ReportConfig = { ...config, id: Date.now().toString() };\n      setReportConfigs((prev) => [...prev, newConfig]);\n    }\n    setShowConfigDialog(false);\n    setEditingConfig(null);\n  };\n\n  const handleDeleteConfig = (id: string) => {\n    setReportConfigs((prev) => prev.filter((c) => c.id !== id));\n  };\n\n  const handleToggleAlert = (id: string) => {\n    setAlertConfigs((prev) =>\n      prev.map((a) => (a.id === id ? { ...a, is_active: !a.is_active } : a))\n    );\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'operational':\n        return 'bg-blue-100 text-blue-800';\n      case 'strategic':\n        return 'bg-purple-100 text-purple-800';\n      case 'administrative':\n        return 'bg-green-100 text-green-800';\n      case 'financial':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'performance':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed':\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case 'generating':\n        return <Clock className=\"h-4 w-4 text-yellow-500\" />;\n      case 'failed':\n        return <AlertTriangle className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h2 className=\"text-2xl sm:text-3xl font-bold tracking-tight\">\n            Advanced Reporting\n          </h2>\n          <p className=\"text-muted-foreground\">\n            Generate comprehensive reports with advanced analytics and insights.\n          </p>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowConfigDialog(true)}\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Custom Report\n          </Button>\n          <Button variant=\"outline\" size=\"sm\">\n            <Settings className=\"h-4 w-4 mr-2\" />\n            Settings\n          </Button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <Tabs\n        value={activeTab}\n        onValueChange={setActiveTab}\n        className=\"space-y-4\"\n      >\n        <TabsList className=\"grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-6\">\n          <TabsTrigger value=\"templates\">Templates</TabsTrigger>\n          <TabsTrigger value=\"reports\">Reports</TabsTrigger>\n          <TabsTrigger value=\"configs\">Configs</TabsTrigger>\n          <TabsTrigger value=\"alerts\">Alerts</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          <TabsTrigger value=\"export\">Export</TabsTrigger>\n        </TabsList>\n\n        {/* Templates Tab */}\n        <TabsContent value=\"templates\" className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            {reportTemplates.map((template) => (\n              <Card\n                key={template.id}\n                className=\"hover:shadow-md transition-shadow\"\n              >\n                <CardHeader>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <CardTitle className=\"text-lg\">{template.name}</CardTitle>\n                      <CardDescription className=\"mt-1\">\n                        {template.description}\n                      </CardDescription>\n                    </div>\n                    <Badge className={getCategoryColor(template.category)}>\n                      {template.category}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>{template.type}</span>\n                    </div>\n\n                    <div className=\"flex flex-wrap gap-1\">\n                      {template.includeInsights && (\n                        <Badge variant=\"secondary\">Insights</Badge>\n                      )}\n                      {template.includeROI && (\n                        <Badge variant=\"secondary\">ROI</Badge>\n                      )}\n                      {template.includeBenchmarks && (\n                        <Badge variant=\"secondary\">Benchmarks</Badge>\n                      )}\n                      {template.includeReadingPatterns && (\n                        <Badge variant=\"secondary\">Reading</Badge>\n                      )}\n                      {template.includeSpaceUtilization && (\n                        <Badge variant=\"secondary\">Space</Badge>\n                      )}\n                    </div>\n\n                    <div className=\"flex gap-2 pt-2\">\n                      <Select\n                        onValueChange={(format) =>\n                          handleGenerateReport(template, format)\n                        }\n                        disabled={isGenerating}\n                      >\n                        <SelectTrigger className=\"flex-1\">\n                          <SelectValue\n                            placeholder={\n                              isGenerating ? 'Generating...' : 'Generate'\n                            }\n                          />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"html\">HTML</SelectItem>\n                          <SelectItem value=\"pdf\">PDF</SelectItem>\n                          <SelectItem value=\"excel\">Excel</SelectItem>\n                          <SelectItem value=\"csv\">CSV</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* Reports Tab */}\n        <TabsContent value=\"reports\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Generated Reports</CardTitle>\n              <CardDescription>\n                View and download your generated reports.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {generatedReports.map((report) => (\n                  <div\n                    key={report.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      {getStatusIcon(report.status)}\n                      <div>\n                        <h4 className=\"font-medium\">{report.name}</h4>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {new Date(report.generated_at).toLocaleString()} {' '}\n                          {report.format.toUpperCase()}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant=\"outline\">{report.type}</Badge>\n                      {report.status === 'completed' && report.filePath && (\n                        <Button variant=\"outline\" size=\"sm\">\n                          <Download className=\"h-4 w-4 mr-2\" />\n                          Download\n                        </Button>\n                      )}\n                      {report.status === 'generating' && (\n                        <ButtonLoading text=\"Generating...\" />\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Configs Tab */}\n        <TabsContent value=\"configs\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Report Configurations</CardTitle>\n              <CardDescription>\n                Manage your scheduled and custom report configurations.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {reportConfigs.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <FileText className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                    <h3 className=\"text-lg font-medium\">\n                      No Report Configurations\n                    </h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      Create your first custom report configuration.\n                    </p>\n                    <Button onClick={() => setShowConfigDialog(true)}>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Create Configuration\n                    </Button>\n                  </div>\n                ) : (\n                  reportConfigs.map((config) => (\n                    <div\n                      key={config.id}\n                      className=\"flex items-center justify-between p-4 border rounded-lg\"\n                    >\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-medium\">{config.name}</h4>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {config.type}  {config.format.toUpperCase()} {' '}\n                          {config.recipients.length} recipients\n                        </p>\n                        {config.schedule && (\n                          <p className=\"text-sm text-muted-foreground\">\n                            Schedule: {config.schedule}\n                          </p>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge\n                          variant={config.is_active ? 'default' : 'secondary'}\n                        >\n                          {config.is_active ? 'Active' : 'Inactive'}\n                        </Badge>\n                        <Button variant=\"ghost\" size=\"sm\">\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() =>\n                            config.id && handleDeleteConfig(config.id)\n                          }\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Alerts Tab */}\n        <TabsContent value=\"alerts\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Alert Configurations</CardTitle>\n              <CardDescription>\n                Manage automated alerts for system monitoring.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {alertConfigs.map((alert) => (\n                  <div\n                    key={alert.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg\"\n                  >\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium\">{alert.name}</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {alert.type.replace('_', ' ')}  Threshold:{' '}\n                        {alert.threshold}  {alert.recipients.length} recipients\n                      </p>\n                      {alert.lastTriggered && (\n                        <p className=\"text-sm text-muted-foreground\">\n                          Last triggered:{' '}\n                          {new Date(alert.lastTriggered).toLocaleString()}\n                        </p>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Button\n                        variant={alert.is_active ? 'default' : 'outline'}\n                        size=\"sm\"\n                        onClick={() => handleToggleAlert(alert.id)}\n                      >\n                        {alert.is_active ? 'Active' : 'Inactive'}\n                      </Button>\n                      <Button variant=\"ghost\" size=\"sm\">\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Analytics Tab */}\n        <TabsContent value=\"analytics\" className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <TrendingUp className=\"h-5 w-5\" />\n                  ROI Analysis\n                </CardTitle>\n                <CardDescription>\n                  Financial performance and return on investment metrics.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span>Total Investment</span>\n                    <span className=\"font-medium\">$150,000</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Total Value</span>\n                    <span className=\"font-medium text-green-600\">$185,000</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>ROI</span>\n                    <span className=\"font-medium text-green-600\">+23.3%</span>\n                  </div>\n                  <Button variant=\"outline\" className=\"w-full mt-4\">\n                    View Details\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Users className=\"h-5 w-5\" />\n                  Reading Patterns\n                </CardTitle>\n                <CardDescription>\n                  Student engagement and reading behavior analysis.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span>Total Books Read</span>\n                    <span className=\"font-medium\">1,250</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Active Readers</span>\n                    <span className=\"font-medium\">85</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Avg Reading Streak</span>\n                    <span className=\"font-medium\">4.2 days</span>\n                  </div>\n                  <Button variant=\"outline\" className=\"w-full mt-4\">\n                    View Details\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BarChart3 className=\"h-5 w-5\" />\n                  Space Utilization\n                </CardTitle>\n                <CardDescription>\n                  Library space usage and optimization insights.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span>Computer Lab</span>\n                    <span className=\"font-medium\">73.3%</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Reading Lounge</span>\n                    <span className=\"font-medium text-yellow-600\">30.0%</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Gaming Zone</span>\n                    <span className=\"font-medium\">85.2%</span>\n                  </div>\n                  <Button variant=\"outline\" className=\"w-full mt-4\">\n                    View Details\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Target className=\"h-5 w-5\" />\n                  Benchmarks\n                </CardTitle>\n                <CardDescription>\n                  Industry comparison and performance metrics.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span>Visits per Student</span>\n                    <span className=\"font-medium text-yellow-600\">\n                      7.2 (8.5)\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Book Circulation</span>\n                    <span className=\"font-medium text-green-600\">\n                      18.5 (15.2)\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Computer Usage</span>\n                    <span className=\"font-medium text-green-600\">\n                      71.3% (65.0%)\n                    </span>\n                  </div>\n                  <Button variant=\"outline\" className=\"w-full mt-4\">\n                    View Details\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* Export Tab */}\n        <TabsContent value=\"export\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Data Export</CardTitle>\n              <CardDescription>\n                Export data in various formats for external analysis.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-lg font-medium\">Export Type</h3>\n                  <Select>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select data type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"activities\">Activities</SelectItem>\n                      <SelectItem value=\"students\">Students</SelectItem>\n                      <SelectItem value=\"equipment\">Equipment</SelectItem>\n                      <SelectItem value=\"reading-patterns\">\n                        Reading Patterns\n                      </SelectItem>\n                      <SelectItem value=\"space-utilization\">\n                        Space Utilization\n                      </SelectItem>\n                      <SelectItem value=\"roi-data\">ROI Analysis</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-lg font-medium\">Format</h3>\n                  <Select>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select format\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"csv\">CSV</SelectItem>\n                      <SelectItem value=\"excel\">Excel</SelectItem>\n                      <SelectItem value=\"json\">JSON</SelectItem>\n                      <SelectItem value=\"pdf\">PDF Report</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div className=\"space-y-4 mt-6\">\n                <h3 className=\"text-lg font-medium\">Date Range</h3>\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Start Date</label>\n                    <Input type=\"date\" />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">End Date</label>\n                    <Input type=\"date\" />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end mt-6\">\n                <Button>\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  Export Data\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Custom Report Config Dialog */}\n      <Dialog open={showConfigDialog} onOpenChange={setShowConfigDialog}>\n        <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingConfig\n                ? 'Edit Report Configuration'\n                : 'Create Custom Report'}\n            </DialogTitle>\n            <DialogDescription>\n              Configure a custom report with specific sections and delivery\n              options.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-6 py-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div>\n                <label className=\"text-sm font-medium\">Report Name</label>\n                <Input placeholder=\"Enter report name\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Category</label>\n                <Select>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select category\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"operational\">Operational</SelectItem>\n                    <SelectItem value=\"strategic\">Strategic</SelectItem>\n                    <SelectItem value=\"administrative\">\n                      Administrative\n                    </SelectItem>\n                    <SelectItem value=\"financial\">Financial</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Description</label>\n              <Input placeholder=\"Enter report description\" />\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div>\n                <label className=\"text-sm font-medium\">Format</label>\n                <Select>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select format\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"html\">HTML</SelectItem>\n                    <SelectItem value=\"pdf\">PDF</SelectItem>\n                    <SelectItem value=\"excel\">Excel</SelectItem>\n                    <SelectItem value=\"csv\">CSV</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Schedule</label>\n                <Select>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select schedule\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"daily\">Daily</SelectItem>\n                    <SelectItem value=\"weekly\">Weekly</SelectItem>\n                    <SelectItem value=\"monthly\">Monthly</SelectItem>\n                    <SelectItem value=\"on_demand\">On Demand</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Recipients</label>\n              <Input placeholder=\"Enter email addresses (comma separated)\" />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Include Sections</label>\n              <div className=\"grid gap-2 mt-2\">\n                {[\n                  { id: 'overview', label: 'Overview' },\n                  { id: 'kpi', label: 'Key Performance Indicators' },\n                  { id: 'insights', label: 'Predictive Insights' },\n                  { id: 'roi', label: 'ROI Analysis' },\n                  { id: 'benchmarks', label: 'Industry Benchmarks' },\n                  { id: 'reading_patterns', label: 'Reading Patterns' },\n                  { id: 'space_utilization', label: 'Space Utilization' },\n                ].map((section) => (\n                  <div key={section.id} className=\"flex items-center space-x-2\">\n                    <Checkbox id={section.id} />\n                    <label htmlFor={section.id} className=\"text-sm\">\n                      {section.label}\n                    </label>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowConfigDialog(false)}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={() =>\n                handleSaveConfig(editingConfig || ({} as ReportConfig))\n              }\n            >\n              {editingConfig ? 'Update' : 'Create'} Configuration\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AdvancedReporting;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\AnalyticsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\AutomationDashboard.simple.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\AutomationDashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ErrorBoundary' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"ErrorBoundary"},"fix":{"range":[34,87],"text":""},"desc":"Remove unused variable 'ErrorBoundary'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AutomationFallback' is defined but never used. Allowed unused vars must match /^_/u.","line":45,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"AutomationFallback"},"fix":{"range":[1080,1434],"text":""},"desc":"Remove unused variable 'AutomationFallback'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useTriggerJob, useGoogleSheetsTest } from '@/hooks/api-hooks';\nimport { useAppStore } from '@/store/useAppStore';\nimport {\n  Bot,\n  Play,\n  Square,\n  RotateCcw,\n  CheckCircle,\n  AlertCircle,\n  Clock,\n  Database,\n  FileSpreadsheet,\n  Calendar,\n  Activity,\n  Settings,\n  RefreshCw,\n} from 'lucide-react';\n\ninterface AutomationJob {\n  id: string;\n  name: string;\n  type: 'backup' | 'notification' | 'sync' | 'cleanup';\n  status: 'running' | 'completed' | 'failed' | 'queued';\n  lastRun?: Date;\n  nextRun?: Date;\n  duration?: number;\n  errorMessage?: string;\n  progress?: number;\n}\n\nfunction AutomationFallback({ error }: { error: Error }) {\n  return (\n    <div className=\"space-y-4 p-4 border rounded\">\n      <Alert variant=\"destructive\">\n        <AlertCircle className=\"h-4 w-4\" />\n        <AlertDescription>\n          {error?.message || 'Failed to render automation panel'}\n        </AlertDescription>\n      </Alert>\n    </div>\n  );\n}\n\nexport function AutomationDashboard() {\n  const [selectedTab, setSelectedTab] = useState('jobs');\n\n  const store = useAppStore();\n  const automationJobs: AutomationJob[] = Array.isArray(\n    (store as any)?.automationJobs\n  )\n    ? ((store as any).automationJobs as AutomationJob[])\n    : [];\n  const { mutate: triggerJob } = useTriggerJob();\n  const { data: googleSheetsStatus } = useGoogleSheetsTest();\n\n  // Mock automation jobs for now - Empty for now as per requirements\n  const mockJobs: AutomationJob[] = [];\n\n  const jobs =\n    automationJobs && automationJobs.length > 0 ? automationJobs : mockJobs;\n\n  const handleTriggerJob = (jobId: string) => {\n    triggerJob(jobId);\n  };\n\n  const getJobIcon = (type: string) => {\n    switch (type) {\n      case 'backup':\n        return <Database className=\"h-4 w-4\" />;\n      case 'notification':\n        return <Calendar className=\"h-4 w-4\" />;\n      case 'sync':\n        return <FileSpreadsheet className=\"h-4 w-4\" />;\n      case 'cleanup':\n        return <Settings className=\"h-4 w-4\" />;\n      default:\n        return <Bot className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running':\n        return 'bg-blue-500';\n      case 'completed':\n        return 'bg-green-500';\n      case 'failed':\n        return 'bg-red-500';\n      case 'queued':\n        return 'bg-yellow-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'running':\n        return (\n          <Badge variant=\"default\" className=\"bg-blue-500\">\n            Running\n          </Badge>\n        );\n      case 'completed':\n        return (\n          <Badge variant=\"default\" className=\"bg-green-500\">\n            Completed\n          </Badge>\n        );\n      case 'failed':\n        return <Badge variant=\"destructive\">Failed</Badge>;\n      case 'queued':\n        return <Badge variant=\"secondary\">Queued</Badge>;\n      default:\n        return <Badge variant=\"outline\">Unknown</Badge>;\n    }\n  };\n\n  const formatDuration = (seconds: number) => {\n    if (seconds < 60) {\n      return `${seconds}s`;\n    }\n    return `${Math.floor(seconds / 60)}m ${seconds % 60}s`;\n  };\n\n  const formatRelativeTime = (date: Date) => {\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n\n    if (days > 0) {\n      return `${days} day${days > 1 ? 's' : ''} ago`;\n    }\n    if (hours > 0) {\n      return `${hours} hour${hours > 1 ? 's' : ''} ago`;\n    }\n    if (minutes > 0) {\n      return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;\n    }\n    return 'Just now';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-3xl font-bold tracking-tight\">Automation</h2>\n          <p className=\"text-muted-foreground\">\n            Monitor and control your automated tasks and Google Sheets sync.\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button variant=\"outline\" size=\"sm\">\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Status Overview */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Jobs</CardTitle>\n            <Bot className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{jobs.length}</div>\n            <p className=\"text-xs text-muted-foreground\">Automated tasks</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Running</CardTitle>\n            <Activity className=\"h-4 w-4 text-blue-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {jobs.filter((job) => job.status === 'running').length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Currently executing</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Completed Today\n            </CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {jobs.filter((job) => job.status === 'completed').length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Successful executions\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Google Sheets</CardTitle>\n            <FileSpreadsheet className=\"h-4 w-4 text-green-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {googleSheetsStatus &&\n              typeof googleSheetsStatus === 'object' &&\n              'data' in googleSheetsStatus &&\n              googleSheetsStatus.data &&\n              typeof googleSheetsStatus.data === 'object' &&\n              'connected' in googleSheetsStatus.data &&\n              (googleSheetsStatus.data as Record<string, unknown>).connected\n                ? 'Connected'\n                : 'Offline'}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Sync status</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Google Sheets Status */}\n      <Alert>\n        {googleSheetsStatus &&\n        typeof googleSheetsStatus === 'object' &&\n        'data' in googleSheetsStatus &&\n        googleSheetsStatus.data &&\n        typeof googleSheetsStatus.data === 'object' &&\n        'connected' in googleSheetsStatus.data &&\n        (googleSheetsStatus.data as Record<string, unknown>).connected ? (\n          <>\n            <CheckCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Google Sheets integration is active and syncing data successfully.\n            </AlertDescription>\n          </>\n        ) : (\n          <>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Google Sheets integration is not connected. Please check your\n              configuration.\n            </AlertDescription>\n          </>\n        )}\n      </Alert>\n\n      {/* Main Content */}\n      <Tabs\n        value={selectedTab}\n        onValueChange={setSelectedTab}\n        className=\"space-y-4\"\n      >\n        <TabsList>\n          <TabsTrigger value=\"jobs\">Automation Jobs</TabsTrigger>\n          <TabsTrigger value=\"history\">Execution History</TabsTrigger>\n          <TabsTrigger value=\"schedule\">Schedule</TabsTrigger>\n          <TabsTrigger value=\"logs\">System Logs</TabsTrigger>\n        </TabsList>\n\n        {/* Jobs Tab */}\n        <TabsContent value=\"jobs\" className=\"space-y-4\">\n          <div className=\"grid gap-4\">\n            {jobs.map((job) => (\n              <Card key={job.id}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      {getJobIcon(job.type)}\n                      <div>\n                        <CardTitle className=\"text-lg\">{job.name}</CardTitle>\n                        <CardDescription>\n                          {job.type.charAt(0).toUpperCase() + job.type.slice(1)}{' '}\n                          Job\n                        </CardDescription>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <div\n                        className={`h-2 w-2 rounded-full ${getStatusColor(job.status)}`}\n                      ></div>\n                      {getStatusBadge(job.status)}\n                    </div>\n                  </div>\n                </CardHeader>\n\n                <CardContent className=\"space-y-4\">\n                  {/* Progress Bar for Running Jobs */}\n                  {job.status === 'running' && job.progress !== undefined && (\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Progress</span>\n                        <span>{job.progress}%</span>\n                      </div>\n                      <Progress value={job.progress} className=\"h-2\" />\n                    </div>\n                  )}\n\n                  {/* Job Details */}\n                  <div className=\"grid gap-2 text-sm\">\n                    {job.lastRun && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Last Run:</span>\n                        <span>{formatRelativeTime(job.lastRun)}</span>\n                      </div>\n                    )}\n                    {job.nextRun && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Next Run:</span>\n                        <span>{job.nextRun.toLocaleString()}</span>\n                      </div>\n                    )}\n                    {job.duration && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Duration:</span>\n                        <span>{formatDuration(job.duration)}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Error Message */}\n                  {job.errorMessage && (\n                    <Alert variant=\"destructive\">\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        {String(job.errorMessage)}\n                      </AlertDescription>\n                    </Alert>\n                  )}\n\n                  {/* Action Buttons */}\n                  <div className=\"flex space-x-2\">\n                    {job.status === 'running' ? (\n                      <Button variant=\"destructive\" size=\"sm\">\n                        <Square className=\"h-3 w-3 mr-1\" />\n                        Stop\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleTriggerJob(job.id)}\n                        disabled={job.status !== 'queued'}\n                      >\n                        <Play className=\"h-3 w-3 mr-1\" />\n                        Run Now\n                      </Button>\n                    )}\n                    <Button variant=\"outline\" size=\"sm\">\n                      <RotateCcw className=\"h-3 w-3 mr-1\" />\n                      Restart\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\">\n                      <Settings className=\"h-3 w-3 mr-1\" />\n                      Configure\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        {/* History Tab */}\n        <TabsContent value=\"history\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Execution History</CardTitle>\n              <CardDescription>\n                Recent execution history for all automation jobs\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Clock className=\"h-12 w-12 mx-auto mb-4\" />\n                <p>Execution history will appear here</p>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Schedule Tab */}\n        <TabsContent value=\"schedule\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Schedule Configuration</CardTitle>\n              <CardDescription>\n                Configure when automation jobs should run\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div className=\"p-4 border rounded-lg\">\n                    <h4 className=\"font-medium mb-2\">Daily Backup</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      Runs every day at 11:00 PM\n                    </p>\n                    <Button variant=\"outline\" size=\"sm\">\n                      Edit Schedule\n                    </Button>\n                  </div>\n                  <div className=\"p-4 border rounded-lg\">\n                    <h4 className=\"font-medium mb-2\">Teacher Notifications</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      Runs every day at 7:00 AM\n                    </p>\n                    <Button variant=\"outline\" size=\"sm\">\n                      Edit Schedule\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Logs Tab */}\n        <TabsContent value=\"logs\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>System Logs</CardTitle>\n              <CardDescription>\n                Detailed logs from automation system\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <FileSpreadsheet className=\"h-12 w-12 mx-auto mb-4\" />\n                <p>System logs will appear here</p>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Quick Actions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Quick Actions</CardTitle>\n          <CardDescription>Common automation tasks</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <Button variant=\"outline\" className=\"h-16 flex-col\">\n              <Database className=\"h-6 w-6 mb-2\" />\n              <span>Run Backup Now</span>\n            </Button>\n            <Button variant=\"outline\" className=\"h-16 flex-col\">\n              <FileSpreadsheet className=\"h-6 w-6 mb-2\" />\n              <span>Sync to Google Sheets</span>\n            </Button>\n            <Button variant=\"outline\" className=\"h-16 flex-col\">\n              <Calendar className=\"h-6 w-6 mb-2\" />\n              <span>Send Notifications</span>\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport default AutomationDashboard;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\BarcodeManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\BookCatalog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\BookCheckout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\CSVImportDialog.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'open' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[755,768],"text":""},"desc":"Remove unused variable 'open'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[863,894],"text":""},"desc":"Remove unused variable 'data'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { useMobileOptimization } from '@/hooks/useMobileOptimization';\nimport { toast } from 'sonner';\nimport {\n  Upload,\n  FileText,\n  CheckCircle,\n  AlertCircle,\n  X,\n  Download,\n  RefreshCw,\n  FileUp,\n  Table,\n} from 'lucide-react';\n\ninterface CSVImportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title?: string;\n  description?: string;\n  templateColumns: string[];\n  onImport: (data: Record<string, unknown>[]) => Promise<void>;\n  entityName?: string;\n}\n\ninterface ImportPreview {\n  headers: string[];\n  rows: string[][];\n  totalRows: number;\n}\n\nexport function CSVImportDialog({\n  open,\n  onOpenChange,\n  title = 'Import CSV Data',\n  description = 'Upload a CSV file to import multiple records',\n  templateColumns,\n  onImport,\n  entityName = 'records',\n}: CSVImportDialogProps) {\n  const { isMobile } = useMobileOptimization();\n  const [file, setFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<ImportPreview | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [errors, setErrors] = useState<string[]>([]);\n  const [validationResult, setValidationResult] = useState<{\n    valid: number;\n    invalid: number;\n    warnings: string[];\n  } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) {\n      return;\n    }\n\n    // Validate file type\n    if (!selectedFile.name.endsWith('.csv')) {\n      toast.error('Please upload a CSV file');\n      return;\n    }\n\n    // Validate file size (10MB max)\n    if (selectedFile.size > 10 * 1024 * 1024) {\n      toast.error('File size must be less than 10MB');\n      return;\n    }\n\n    setFile(selectedFile);\n    parseCSV(selectedFile);\n  };\n\n  const parseCSV = async (file: File) => {\n    setIsProcessing(true);\n    setErrors([]);\n    setProgress(10);\n\n    try {\n      const text = await file.text();\n      setProgress(30);\n\n      // Parse CSV\n      const lines = text.split('\\n').filter((line) => line.trim());\n      if (lines.length === 0) {\n        throw new Error('CSV file is empty');\n      }\n\n      // Extract headers - we know lines[0] exists because we checked length > 0\n      const firstLine = lines[0];\n      if (!firstLine) {\n        throw new Error('CSV file has no valid header row');\n      }\n      const headers = firstLine\n        .split(',')\n        .map((h) => h.trim().replace(/^\"|\"$/g, ''));\n      setProgress(50);\n\n      // Validate headers\n      const missingColumns = templateColumns.filter(\n        (col) => !headers.includes(col)\n      );\n      if (missingColumns.length > 0) {\n        setErrors([\n          `Missing required columns: ${missingColumns.join(', ')}`,\n          `Expected columns: ${templateColumns.join(', ')}`,\n        ]);\n        setProgress(0);\n        setIsProcessing(false);\n        return;\n      }\n\n      // Parse rows\n      const rows = lines.slice(1, Math.min(6, lines.length)).map((line) => {\n        const values = line\n          .split(',')\n          .map((v) => v.trim().replace(/^\"|\"$/g, ''));\n        return values;\n      });\n\n      setProgress(70);\n\n      // Validate data\n      const validation = validateData(headers, rows);\n      setValidationResult(validation);\n\n      setPreview({\n        headers,\n        rows,\n        totalRows: lines.length - 1,\n      });\n\n      setProgress(100);\n      toast.success(`Parsed ${lines.length - 1} ${entityName} successfully`);\n    } catch (error) {\n      console.error('CSV parsing error:', error);\n      setErrors([\n        error instanceof Error ? error.message : 'Failed to parse CSV file',\n      ]);\n      toast.error('Failed to parse CSV file');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const validateData = (\n    headers: string[],\n    rows: string[][]\n  ): {\n    valid: number;\n    invalid: number;\n    warnings: string[];\n  } => {\n    let valid = 0;\n    let invalid = 0;\n    const warnings: string[] = [];\n\n    rows.forEach((row, index) => {\n      // Check for empty required fields\n      const hasEmptyRequired = row.some((cell, cellIndex) => {\n        const header = headers[cellIndex];\n        return header && templateColumns.includes(header) && !cell?.trim();\n      });\n\n      if (hasEmptyRequired) {\n        invalid++;\n        warnings.push(`Row ${index + 2}: Missing required fields`);\n      } else {\n        valid++;\n      }\n\n      // Check for data length issues\n      if (row.length !== headers.length) {\n        warnings.push(`Row ${index + 2}: Column count mismatch`);\n      }\n    });\n\n    return { valid, invalid, warnings: warnings.slice(0, 5) };\n  };\n\n  const handleImport = async () => {\n    if (!file) {\n      return;\n    }\n\n    setIsProcessing(true);\n    setProgress(0);\n\n    try {\n      const text = await file.text();\n      const lines = text.split('\\n').filter((line) => line.trim());\n      if (lines.length === 0) {\n        setPreview(null);\n        return;\n      }\n      const firstLine = lines[0];\n      if (!firstLine) {\n        setPreview(null);\n        return;\n      }\n      const headers = firstLine\n        .split(',')\n        .map((h) => h.trim().replace(/^\"|\"$/g, ''));\n\n      // Parse all rows into objects\n      const data = lines.slice(1).map((line) => {\n        const values = line\n          .split(',')\n          .map((v) => v.trim().replace(/^\"|\"$/g, ''));\n        const obj = {};\n        headers.forEach((header, index) => {\n          obj[header] = values[index] || '';\n        });\n        return obj;\n      });\n\n      // Batch import with progress\n      const batchSize = 50;\n      for (let i = 0; i < data.length; i += batchSize) {\n        const batch = data.slice(i, i + batchSize);\n        await onImport(batch);\n        setProgress(Math.round(((i + batch.length) / data.length) * 100));\n      }\n\n      toast.success(`Successfully imported ${data.length} ${entityName}`);\n      handleClose();\n    } catch (error) {\n      console.error('Import error:', error);\n      toast.error('Failed to import data');\n    } finally {\n      setIsProcessing(false);\n      setProgress(0);\n    }\n  };\n\n  const downloadTemplate = () => {\n    const csv = templateColumns.join(',') + '\\n';\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${entityName}-template.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    toast.success('Template downloaded');\n  };\n\n  const handleClose = () => {\n    setFile(null);\n    setPreview(null);\n    setErrors([]);\n    setValidationResult(null);\n    setProgress(0);\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent\n        className={\n          isMobile\n            ? 'w-full max-w-full h-full'\n            : 'max-w-3xl max-h-[90vh] overflow-y-auto'\n        }\n      >\n        <DialogHeader>\n          <DialogTitle>{title}</DialogTitle>\n          <DialogDescription>{description}</DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Template Download */}\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"h-8 w-8 text-blue-500\" />\n                  <div>\n                    <p className=\"font-medium\">Download Template</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Get the CSV template with required columns\n                    </p>\n                  </div>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" onClick={downloadTemplate}>\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  Template\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* File Upload */}\n          {!file && (\n            <Card\n              className=\"border-2 border-dashed cursor-pointer hover:border-primary/50 transition-colors\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <CardContent className=\"p-8\">\n                <div className=\"text-center\">\n                  <Upload className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                  <p className=\"font-medium mb-2\">Click to upload CSV file</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Or drag and drop your file here\n                  </p>\n                  <Badge variant=\"outline\" className=\"mt-4\">\n                    Max size: 10MB\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Hidden file input */}\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".csv\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n\n          {/* Processing */}\n          {isProcessing && (\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <RefreshCw className=\"h-5 w-5 animate-spin text-blue-500\" />\n                    <span className=\"font-medium\">Processing CSV file...</span>\n                  </div>\n                  <Progress value={progress} className=\"h-2\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    {progress}% complete\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Errors */}\n          {errors.length > 0 && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <div className=\"space-y-1\">\n                  {errors.map((error, index) => (\n                    <div key={index}> {error}</div>\n                  ))}\n                </div>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Preview */}\n          {preview && validationResult && (\n            <>\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <FileUp className=\"h-5 w-5 text-green-500\" />\n                        <span className=\"font-medium\">{file?.name}</span>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => {\n                          setFile(null);\n                          setPreview(null);\n                          setValidationResult(null);\n                        }}\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-4\">\n                      <div className=\"text-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\n                        <div className=\"text-2xl font-bold text-blue-600\">\n                          {preview.totalRows}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          Total Rows\n                        </div>\n                      </div>\n                      <div className=\"text-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\n                        <div className=\"text-2xl font-bold text-green-600\">\n                          {validationResult.valid}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          Valid\n                        </div>\n                      </div>\n                      <div className=\"text-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg\">\n                        <div className=\"text-2xl font-bold text-red-600\">\n                          {validationResult.invalid}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          Invalid\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Warnings */}\n              {validationResult.warnings.length > 0 && (\n                <Alert>\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    <div className=\"space-y-1\">\n                      <p className=\"font-medium\">Validation Warnings:</p>\n                      {validationResult.warnings.map((warning, index) => (\n                        <div key={index} className=\"text-sm\">\n                           {warning}\n                        </div>\n                      ))}\n                    </div>\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              {/* Preview Table */}\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Table className=\"h-4 w-4\" />\n                      <span className=\"font-medium\">\n                        Preview (First 5 rows)\n                      </span>\n                    </div>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full text-sm\">\n                        <thead>\n                          <tr className=\"border-b\">\n                            {preview.headers.map((header, index) => (\n                              <th\n                                key={index}\n                                className=\"text-left p-2 font-medium\"\n                              >\n                                {header}\n                              </th>\n                            ))}\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {preview.rows.map((row, rowIndex) => (\n                            <tr key={rowIndex} className=\"border-b\">\n                              {row.map((cell, cellIndex) => (\n                                <td key={cellIndex} className=\"p-2\">\n                                  {cell || (\n                                    <span className=\"text-muted-foreground italic\">\n                                      empty\n                                    </span>\n                                  )}\n                                </td>\n                              ))}\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </div>\n\n        <DialogFooter className={isMobile ? 'flex-col gap-2' : ''}>\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={isProcessing}\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleImport}\n            disabled={\n              !preview ||\n              isProcessing ||\n              validationResult?.invalid === preview?.totalRows\n            }\n            className=\"w-full sm:w-auto\"\n          >\n            {isProcessing ? (\n              <>\n                <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                Importing...\n              </>\n            ) : (\n              <>\n                <CheckCircle className=\"h-4 w-4 mr-2\" />\n                Import {preview?.totalRows || 0} {entityName}\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\CalendarWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\CheckoutHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\DashboardOverview.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":1,"message":"'wsStatsUpdatedAt' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1042,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1042,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"wsStatsUpdatedAt"},"fix":{"range":[32890,32906],"text":""},"desc":"Remove unused variable 'wsStatsUpdatedAt'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\DocumentationDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\EnhancedBorrowing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\EnhancedDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\EquipmentDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ErrorReportingDashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AUTHENTICATION' is defined but never used. Allowed unused vars must match /^_/u.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"AUTHENTICATION"},"fix":{"range":[745,759],"text":""},"desc":"Remove unused variable 'AUTHENTICATION'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AUTHORIZATION' is defined but never used. Allowed unused vars must match /^_/u.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"AUTHORIZATION"},"fix":{"range":[778,795],"text":""},"desc":"Remove unused variable 'AUTHORIZATION'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'VALIDATION' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"VALIDATION"},"fix":{"range":[813,827],"text":""},"desc":"Remove unused variable 'VALIDATION'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DATABASE' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"DATABASE"},"fix":{"range":[842,854],"text":""},"desc":"Remove unused variable 'DATABASE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'NETWORK' is defined but never used. Allowed unused vars must match /^_/u.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"NETWORK"},"fix":{"range":[867,878],"text":""},"desc":"Remove unused variable 'NETWORK'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'EXTERNAL_SERVICE' is defined but never used. Allowed unused vars must match /^_/u.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"EXTERNAL_SERVICE"},"fix":{"range":[890,910],"text":""},"desc":"Remove unused variable 'EXTERNAL_SERVICE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'BUSINESS_LOGIC' is defined but never used. Allowed unused vars must match /^_/u.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"BUSINESS_LOGIC"},"fix":{"range":[931,949],"text":""},"desc":"Remove unused variable 'BUSINESS_LOGIC'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SYSTEM' is defined but never used. Allowed unused vars must match /^_/u.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"SYSTEM"},"fix":{"range":[968,978],"text":""},"desc":"Remove unused variable 'SYSTEM'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PERFORMANCE' is defined but never used. Allowed unused vars must match /^_/u.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"PERFORMANCE"},"fix":{"range":[989,1004],"text":""},"desc":"Remove unused variable 'PERFORMANCE'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts';\nimport {\n  AlertTriangle,\n  TrendingUp,\n  TrendingDown,\n  Minus,\n  Activity,\n  Bug,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  RefreshCw,\n  Download,\n  User,\n} from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport api from '@/services/api';\n\n// Add ErrorCategory enum definition\nenum ErrorCategory {\n  AUTHENTICATION = 'AUTHENTICATION',\n  AUTHORIZATION = 'AUTHORIZATION',\n  VALIDATION = 'VALIDATION',\n  DATABASE = 'DATABASE',\n  NETWORK = 'NETWORK',\n  EXTERNAL_SERVICE = 'EXTERNAL_SERVICE',\n  BUSINESS_LOGIC = 'BUSINESS_LOGIC',\n  SYSTEM = 'SYSTEM',\n  PERFORMANCE = 'PERFORMANCE',\n}\n\ninterface ErrorReport {\n  id: string;\n  timestamp: string;\n  message: string;\n  category: string;\n  severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\n  statusCode?: number;\n  code?: string;\n  resolved: boolean;\n  resolvedAt?: string;\n  resolvedBy?: string;\n  assignee?: string;\n  tags: string[];\n  similarErrors: number;\n  impact: {\n    usersAffected: number;\n    requestsAffected: number;\n  };\n}\n\ninterface ErrorDashboard {\n  overview: {\n    totalErrors: number;\n    unresolvedErrors: number;\n    criticalErrors: number;\n    errorsLast24h: number;\n    errorRate: number;\n    uptime: number;\n  };\n  trends: Array<{\n    date: string;\n    total: number;\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  }>;\n  topErrors: Array<{\n    id: string;\n    message: string;\n    count: number;\n    severity: string;\n    lastOccurred: string;\n  }>;\n  categoryBreakdown: Array<{\n    category: string;\n    count: number;\n    percentage: number;\n    trend: 'up' | 'down' | 'stable';\n  }>;\n  severityBreakdown: Array<{\n    severity: string;\n    count: number;\n    percentage: number;\n  }>;\n  recentActivity: Array<{\n    id: string;\n    type: 'new_error' | 'resolved' | 'assigned';\n    message: string;\n    timestamp: string;\n    user?: string;\n  }>;\n}\n\nconst SEVERITY_COLORS = {\n  CRITICAL: '#ef4444',\n  HIGH: '#f97316',\n  MEDIUM: '#eab308',\n  LOW: '#22c55e',\n};\n\nconst CATEGORY_COLORS = {\n  AUTHENTICATION: '#8b5cf6',\n  AUTHORIZATION: '#06b6d4',\n  VALIDATION: '#3b82f6',\n  DATABASE: '#ef4444',\n  NETWORK: '#f97316',\n  EXTERNAL_SERVICE: '#a855f7',\n  BUSINESS_LOGIC: '#eab308',\n  SYSTEM: '#dc2626',\n  PERFORMANCE: '#f59e0b',\n};\n\nexport const ErrorReportingDashboard: React.FC = () => {\n  const [timeframe, setTimeframe] = useState<'1h' | '24h' | '7d' | '30d'>(\n    '24h'\n  );\n  const [filterCategory, setFilterCategory] = useState<string>('all');\n  const [filterSeverity, setFilterSeverity] = useState<string>('all');\n  const [showResolved, setShowResolved] = useState(false);\n\n  const {\n    data: dashboard,\n    isLoading,\n    error,\n    refetch,\n  } = useQuery<ErrorDashboard>({\n    queryKey: ['error-dashboard', timeframe],\n    queryFn: async () => {\n      const response = await api.get(\n        `/api/errors/dashboard?timeframe=${timeframe}`\n      );\n      return response.data as ErrorDashboard;\n    },\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const { data: errorReports } = useQuery<ErrorReport[]>({\n    queryKey: ['error-reports', filterCategory, filterSeverity, showResolved],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (filterCategory !== 'all') {\n        params.append('category', filterCategory ?? '');\n      }\n      if (filterSeverity !== 'all') {\n        params.append('severity', filterSeverity ?? '');\n      }\n      if (!showResolved) {\n        params.append('resolved', 'false');\n      }\n\n      const response = await api.get(`/api/errors/reports?${params}`);\n      return response.data as ErrorReport[];\n    },\n  });\n\n  const handleResolveError = async (errorId: string) => {\n    try {\n      await api.post(`/api/errors/reports/${errorId}/resolve`, {\n        resolutionNotes: 'Resolved via dashboard',\n      });\n      refetch();\n    } catch (error) {\n      console.error('Failed to resolve error:', error);\n    }\n  };\n\n  const handleAssignError = async (errorId: string, assignee: string) => {\n    try {\n      await api.post(`/api/errors/reports/${errorId}/assign`, { assignee });\n      refetch();\n    } catch (error) {\n      console.error('Failed to assign error:', error);\n    }\n  };\n\n  const handleExportData = async (format: 'json' | 'csv') => {\n    try {\n      const params = new URLSearchParams();\n      params.append('format', format ?? '');\n      if (filterCategory !== 'all') {\n        params.append('category', filterCategory ?? '');\n      }\n      if (filterSeverity !== 'all') {\n        params.append('severity', filterSeverity ?? '');\n      }\n\n      const response = await api.get(`/api/errors/reports/export?${params}`);\n      const blob = new Blob([response.data as string], {\n        type: format === 'json' ? 'application/json' : 'text/csv',\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `error-reports-${new Date().toISOString().split('T')[0]}.${format}`;\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Failed to export data:', error);\n    }\n  };\n\n  const getTrendIcon = (trend: 'up' | 'down' | 'stable') => {\n    switch (trend) {\n      case 'up':\n        return <TrendingUp className=\"h-4 w-4 text-red-500\" />;\n      case 'down':\n        return <TrendingDown className=\"h-4 w-4 text-green-500\" />;\n      case 'stable':\n        return <Minus className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'CRITICAL':\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case 'HIGH':\n        return <AlertTriangle className=\"h-4 w-4 text-orange-500\" />;\n      case 'MEDIUM':\n        return <AlertCircle className=\"h-4 w-4 text-yellow-500\" />;\n      case 'LOW':\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      default:\n        return <Bug className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <RefreshCw className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n          <p className=\"text-lg font-semibold\">\n            Failed to load error dashboard\n          </p>\n          <Button onClick={() => refetch()} className=\"mt-4\">\n            Try Again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!dashboard) {\n    return null;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Error Reporting Dashboard</h1>\n          <p className=\"text-muted-foreground\">\n            Monitor and analyze system errors\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <select\n            value={timeframe}\n            onChange={(e) => setTimeframe(e.target.value as any)}\n            className=\"px-3 py-2 border rounded-md\"\n          >\n            <option value=\"1h\">Last Hour</option>\n            <option value=\"24h\">Last 24 Hours</option>\n            <option value=\"7d\">Last 7 Days</option>\n            <option value=\"30d\">Last 30 Days</option>\n          </select>\n          <Button variant=\"outline\" onClick={() => refetch()}>\n            <RefreshCw className=\"h-4 w-4\" />\n          </Button>\n          <Button variant=\"outline\" onClick={() => handleExportData('csv')}>\n            <Download className=\"h-4 w-4\" />\n            Export CSV\n          </Button>\n        </div>\n      </div>\n\n      {/* Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Errors</CardTitle>\n            <Bug className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {dashboard.overview.totalErrors}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {dashboard.overview.errorsLast24h} in last 24h\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Unresolved</CardTitle>\n            <XCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {dashboard.overview.unresolvedErrors}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {dashboard.overview.criticalErrors} critical\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Error Rate</CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {(dashboard.overview.errorRate * 100).toFixed(2)}%\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {dashboard.overview.errorRate > 0.05\n                ? 'Above threshold'\n                : 'Normal'}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Uptime</CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {dashboard.overview.uptime}%\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Last{' '}\n              {timeframe === '1h'\n                ? 'hour'\n                : timeframe === '24h'\n                  ? '24 hours'\n                  : timeframe}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Main Content */}\n      <Tabs defaultValue=\"overview\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"trends\">Trends</TabsTrigger>\n          <TabsTrigger value=\"reports\">Error Reports</TabsTrigger>\n          <TabsTrigger value=\"activity\">Activity</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Error Trends Chart */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Error Trends</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <AreaChart data={dashboard.trends}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"total\"\n                      stackId=\"1\"\n                      stroke=\"#8884d8\"\n                      fill=\"#8884d8\"\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"critical\"\n                      stackId=\"1\"\n                      stroke=\"#ef4444\"\n                      fill=\"#ef4444\"\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Category Breakdown */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Error Categories</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <PieChart>\n                    <Pie\n                      data={dashboard.categoryBreakdown}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"count\"\n                      label={({ category, percentage }) =>\n                        `${category} ${percentage}%`\n                      }\n                    >\n                      {dashboard.categoryBreakdown.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={\n                            CATEGORY_COLORS[\n                              entry.category as keyof typeof CATEGORY_COLORS\n                            ] || '#8884d8'\n                          }\n                        />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Top Errors */}\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Top Errors</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {dashboard.topErrors.slice(0, 5).map((error) => (\n                    <div\n                      key={error.id}\n                      className=\"flex items-center justify-between p-3 border rounded-lg\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        {getSeverityIcon(error.severity)}\n                        <div>\n                          <p className=\"font-medium\">{error.message}</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {error.count} occurrences  Last:{' '}\n                            {new Date(error.lastOccurred).toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                      <Button variant=\"outline\" size=\"sm\">\n                        View Details\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"trends\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Severity Breakdown */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Severity Distribution</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={dashboard.severityBreakdown}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"severity\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Bar dataKey=\"count\" fill=\"#8884d8\">\n                      {dashboard.severityBreakdown.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={\n                            SEVERITY_COLORS[\n                              entry.severity as keyof typeof SEVERITY_COLORS\n                            ]\n                          }\n                        />\n                      ))}\n                    </Bar>\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Category Trends */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Category Trends</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {dashboard.categoryBreakdown.map((category) => (\n                    <div\n                      key={category.category}\n                      className=\"flex items-center justify-between\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        {getTrendIcon(category.trend)}\n                        <span className=\"font-medium\">{category.category}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm text-muted-foreground\">\n                          {category.count} ({category.percentage}%)\n                        </span>\n                        <div className=\"w-16 h-2 bg-gray-200 rounded-full\">\n                          <div\n                            className=\"h-2 bg-blue-500 rounded-full\"\n                            style={{ width: `${category.percentage}%` }}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"reports\" className=\"space-y-4\">\n          {/* Filters */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Filters</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-4 flex-wrap\">\n                <select\n                  value={filterCategory}\n                  onChange={(e) => setFilterCategory(e.target.value)}\n                  className=\"px-3 py-2 border rounded-md\"\n                >\n                  <option value=\"all\">All Categories</option>\n                  {Object.values(ErrorCategory).map((category) => (\n                    <option key={category} value={category}>\n                      {category}\n                    </option>\n                  ))}\n                </select>\n\n                <select\n                  value={filterSeverity}\n                  onChange={(e) => setFilterSeverity(e.target.value)}\n                  className=\"px-3 py-2 border rounded-md\"\n                >\n                  <option value=\"all\">All Severities</option>\n                  {Object.keys(SEVERITY_COLORS).map((severity) => (\n                    <option key={severity} value={severity}>\n                      {severity}\n                    </option>\n                  ))}\n                </select>\n\n                <label className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={showResolved}\n                    onChange={(e) => setShowResolved(e.target.checked)}\n                    className=\"rounded\"\n                  />\n                  Show Resolved\n                </label>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Error Reports Table */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Error Reports</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {errorReports?.slice(0, 20).map((report) => (\n                  <div\n                    key={report.id}\n                    className=\"border rounded-lg p-4 space-y-2\"\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start gap-3\">\n                        {getSeverityIcon(report.severity)}\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium\">{report.message}</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {report.category} {' '}\n                            {new Date(report.timestamp).toLocaleString()}\n                          </p>\n                          <div className=\"flex items-center gap-4 mt-2 text-sm\">\n                            <span>\n                              Users affected: {report.impact.usersAffected}\n                            </span>\n                            <span>\n                              Requests affected:{' '}\n                              {report.impact.requestsAffected}\n                            </span>\n                            {report.similarErrors > 0 && (\n                              <span>\n                                Similar errors: {report.similarErrors}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {report.resolved ? (\n                          <span className=\"text-green-600 text-sm\">\n                            Resolved\n                          </span>\n                        ) : (\n                          <>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleResolveError(report.id)}\n                            >\n                              Resolve\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() =>\n                                handleAssignError(report.id, 'current_user')\n                              }\n                            >\n                              Assign\n                            </Button>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"activity\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Recent Activity</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {dashboard.recentActivity.map((activity) => (\n                  <div key={activity.id} className=\"flex items-center gap-3\">\n                    <div\n                      className={`p-2 rounded-full ${\n                        activity.type === 'new_error'\n                          ? 'bg-red-100'\n                          : activity.type === 'resolved'\n                            ? 'bg-green-100'\n                            : 'bg-blue-100'\n                      }`}\n                    >\n                      {activity.type === 'new_error' && (\n                        <Bug className=\"h-4 w-4 text-red-600\" />\n                      )}\n                      {activity.type === 'resolved' && (\n                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                      )}\n                      {activity.type === 'assigned' && (\n                        <User className=\"h-4 w-4 text-blue-600\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm\">{activity.message}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {new Date(activity.timestamp).toLocaleString()}\n                        {activity.user && `  ${activity.user}`}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default ErrorReportingDashboard;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\LeaderboardDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\LibraryAnalytics.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[346,356],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LibraryAnalytics' is defined but never used. Allowed unused vars must match /^_/u.","line":58,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"LibraryAnalytics"},"fix":{"range":[1078,1094],"text":""},"desc":"Remove unused variable 'LibraryAnalytics'."}]},{"ruleId":"prefer-const","severity":1,"message":"'timeout' is never reassigned. Use 'const' instead.","line":165,"column":5,"nodeType":"Identifier","messageId":"useConst","endLine":165,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  BarChart,\n  TrendingUp,\n  Users,\n  Book,\n  Clock,\n  Award,\n  Star,\n  Calendar,\n  Filter,\n  Download,\n  RefreshCw,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { enhancedLibraryApi } from '@/lib/api';\n\ninterface TopUser {\n  id: string;\n  studentId: string;\n  name: string;\n  gradeLevel: string;\n  totalBooksBorrowed: number;\n  totalDaysInLibrary: number;\n  averageDuration: string;\n  lastVisit: string;\n  purposes: {\n    AVR: number;\n    Computer: number;\n    'Library Space': number;\n    Borrowing: number;\n    Recreation: number;\n  };\n}\n\ninterface PopularBook {\n  id: string;\n  title: string;\n  author: string;\n  isbn: string;\n  materialType: string;\n  totalBorrowings: number;\n  currentBorrowers: number;\n  averageRating: number;\n  lastBorrowed: string;\n  coverImage?: string;\n}\n\ninterface LibraryAnalytics {\n  topUsers: TopUser[];\n  popularBooks: PopularBook[];\n  totalPatrons: number;\n  totalBooksBorrowed: number;\n  averageBooksPerPatron: number;\n  mostPopularPurpose: string;\n  busiestDay: string;\n  averageLibraryTime: string;\n}\n\nexport function LibraryAnalytics() {\n  const [analytics, setAnalytics] = useState<LibraryAnalytics | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [timeRange, setTimeRange] = useState<'week' | 'month' | 'year'>(\n    'month'\n  );\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const currentAbort = useRef<AbortController | null>(null);\n\n  const fetchAnalytics = async () => {\n    try {\n      if (currentAbort.current) currentAbort.current.abort();\n      const controller = new AbortController();\n      currentAbort.current = controller;\n      setLoading(true);\n      const response = await enhancedLibraryApi.getLibraryAnalytics(timeRange);\n\n      if (response.success && response.data) {\n        setAnalytics(response.data);\n      } else {\n        toast.error('Failed to fetch analytics data');\n      }\n    } catch (error) {\n      console.error('Error fetching analytics:', error);\n      toast.error('Error loading analytics');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    await fetchAnalytics();\n    setIsRefreshing(false);\n    toast.success('Analytics refreshed');\n  };\n\n  const handleExportAnalytics = async () => {\n    try {\n      const response = await enhancedLibraryApi.exportAnalytics(timeRange);\n      if (response.success && response.data) {\n        // Create and download the file\n        const blob = new Blob([response.data.content], {\n          type: response.data.mimeType,\n        });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = response.data.filename;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n        toast.success('Analytics report exported successfully');\n      } else {\n        toast.error('Failed to export analytics');\n      }\n    } catch (error) {\n      console.error('Error exporting analytics:', error);\n      toast.error('Error exporting analytics report');\n    }\n  };\n\n  const getTopPurposeIcon = (purpose: string) => {\n    switch (purpose) {\n      case 'AVR':\n        return '';\n      case 'Computer':\n        return '';\n      case 'Library Space':\n        return '';\n      case 'Borrowing':\n        return '';\n      case 'Recreation':\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  const getMaterialTypeColor = (type: string) => {\n    const colors = {\n      Filipiniana: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',\n      Fiction: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\n      'Easy Books':\n        'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\n      Reference:\n        'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',\n      Textbook:\n        'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\n    };\n    return colors[type as keyof typeof colors] || 'bg-gray-100 text-gray-800';\n  };\n\n  useEffect(() => {\n    let timeout: number | undefined;\n    timeout = window.setTimeout(() => {\n      void fetchAnalytics();\n    }, 250);\n    return () => {\n      if (timeout) window.clearTimeout(timeout);\n      if (currentAbort.current) currentAbort.current.abort();\n    };\n  }, [timeRange]);\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart className=\"h-5 w-5\" />\n              Library Analytics\n            </CardTitle>\n            <CardDescription>\n              Top users and popular books analytics\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!analytics) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart className=\"h-5 w-5\" />\n              Library Analytics\n            </CardTitle>\n            <CardDescription>No analytics data available</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-center py-12\">\n              <BarChart className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n              <p className=\"text-muted-foreground\">\n                No analytics data available for the selected time range.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Controls */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <BarChart className=\"h-5 w-5\" />\n                Library Analytics\n              </CardTitle>\n              <CardDescription>\n                Insights into library usage and popular resources\n              </CardDescription>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <select\n                value={timeRange}\n                onChange={(e) =>\n                  setTimeRange(e.target.value as 'week' | 'month' | 'year')\n                }\n                className=\"px-3 py-2 border rounded-md bg-background\"\n              >\n                <option value=\"week\">This Week</option>\n                <option value=\"month\">This Month</option>\n                <option value=\"year\">This Year</option>\n              </select>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleRefresh}\n                disabled={isRefreshing}\n              >\n                <RefreshCw\n                  className={`h-4 w-4 mr-1 ${isRefreshing ? 'animate-spin' : ''}`}\n                />\n                Refresh\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleExportAnalytics}\n              >\n                <Download className=\"h-4 w-4 mr-1\" />\n                Export\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n      </Card>\n\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n              Total Patrons\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">\n              {analytics.totalPatrons}\n            </div>\n            <p className=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">\n              active library users\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-green-800 dark:text-green-200\">\n              Books Borrowed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-900 dark:text-green-100\">\n              {analytics.totalBooksBorrowed}\n            </div>\n            <p className=\"text-xs text-green-600 dark:text-green-400 mt-1\">\n              total borrowings\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-purple-800 dark:text-purple-200\">\n              Avg Books/Patron\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-900 dark:text-purple-100\">\n              {analytics.averageBooksPerPatron.toFixed(1)}\n            </div>\n            <p className=\"text-xs text-purple-600 dark:text-purple-400 mt-1\">\n              books per student\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950 dark:to-orange-900\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-orange-800 dark:text-orange-200\">\n              Popular Purpose\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-lg font-bold text-orange-900 dark:text-orange-100\">\n              {getTopPurposeIcon(analytics.mostPopularPurpose)}{' '}\n              {analytics.mostPopularPurpose}\n            </div>\n            <p className=\"text-xs text-orange-600 dark:text-orange-400 mt-1\">\n              most visited area\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Top Users */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Top Library Users\n          </CardTitle>\n          <CardDescription>Most active patrons in the library</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {analytics.topUsers.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Users className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n              <p className=\"text-muted-foreground\">\n                No user activity data available for this time period.\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {analytics.topUsers.map((user, index) => (\n                <Card\n                  key={user.id}\n                  className=\"hover:shadow-md transition-shadow\"\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"flex-shrink-0\">\n                          <div\n                            className={`w-12 h-12 rounded-full flex items-center justify-center ${\n                              index === 0\n                                ? 'bg-gradient-to-br from-yellow-400 to-yellow-600'\n                                : index === 1\n                                  ? 'bg-gradient-to-br from-gray-300 to-gray-500'\n                                  : index === 2\n                                    ? 'bg-gradient-to-br from-orange-400 to-orange-600'\n                                    : 'bg-gradient-to-br from-blue-500 to-purple-600'\n                            }`}\n                          >\n                            <span className=\"text-white font-bold text-lg\">\n                              {index + 1}\n                            </span>\n                          </div>\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-lg\">{user.name}</h3>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {user.studentId}  {user.gradeLevel}\n                          </p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <Badge variant=\"outline\">\n                              <Book className=\"h-3 w-3 mr-1\" />\n                              {user.totalBooksBorrowed} books\n                            </Badge>\n                            <Badge variant=\"outline\">\n                              <Clock className=\"h-3 w-3 mr-1\" />\n                              {user.averageDuration}\n                            </Badge>\n                            <Badge variant=\"outline\">\n                              <Calendar className=\"h-3 w-3 mr-1\" />\n                              {user.totalDaysInLibrary} days\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm text-muted-foreground mb-2\">\n                          Last visit:{' '}\n                          {new Date(user.lastVisit).toLocaleDateString()}\n                        </div>\n                        <div className=\"flex gap-1\">\n                          {Object.entries(user.purposes).map(\n                            ([purpose, count]) =>\n                              count > 0 && (\n                                <Badge\n                                  key={purpose}\n                                  variant=\"secondary\"\n                                  className=\"text-xs\"\n                                >\n                                  {getTopPurposeIcon(purpose)} {count}\n                                </Badge>\n                              )\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Popular Books */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Star className=\"h-5 w-5\" />\n            Most Popular Books\n          </CardTitle>\n          <CardDescription>\n            Books with the highest borrowing frequency\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {analytics.popularBooks.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Book className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n              <p className=\"text-muted-foreground\">\n                No book borrowing data available for this time period.\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {analytics.popularBooks.map((book) => (\n                <Card\n                  key={book.id}\n                  className=\"hover:shadow-md transition-shadow\"\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"flex-shrink-0\">\n                        {book.coverImage ? (\n                          <img\n                            src={book.coverImage}\n                            alt={book.title}\n                            className=\"w-16 h-20 object-cover rounded-md\"\n                          />\n                        ) : (\n                          <div className=\"w-16 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-md flex items-center justify-center\">\n                            <Book className=\"h-8 w-8 text-white\" />\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-lg truncate\">\n                          {book.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground truncate\">\n                          by {book.author}\n                        </p>\n                        <div className=\"flex items-center gap-2 mt-2\">\n                          <Badge\n                            className={getMaterialTypeColor(book.materialType)}\n                          >\n                            {book.materialType}\n                          </Badge>\n                          <Badge variant=\"outline\">ISBN: {book.isbn}</Badge>\n                        </div>\n                        <div className=\"flex items-center gap-2 mt-2\">\n                          <Badge variant=\"default\">\n                            <TrendingUp className=\"h-3 w-3 mr-1\" />\n                            {book.totalBorrowings} borrowings\n                          </Badge>\n                          <Badge variant=\"outline\">\n                            <Users className=\"h-3 w-3 mr-1\" />\n                            {book.currentBorrowers} current\n                          </Badge>\n                        </div>\n                        {book.averageRating > 0 && (\n                          <div className=\"flex items-center mt-2\">\n                            <div className=\"flex\">\n                              {[...Array(5)].map((_, i) => (\n                                <Star\n                                  key={i}\n                                  className={`h-4 w-4 ${\n                                    i < Math.floor(book.averageRating)\n                                      ? 'text-yellow-400 fill-current'\n                                      : 'text-muted-foreground'\n                                  }`}\n                                />\n                              ))}\n                            </div>\n                            <span className=\"text-sm text-muted-foreground ml-2\">\n                              {book.averageRating.toFixed(1)}\n                            </span>\n                          </div>\n                        )}\n                        <div className=\"text-xs text-muted-foreground mt-2\">\n                          Last borrowed:{' '}\n                          {new Date(book.lastBorrowed).toLocaleDateString()}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\NotificationCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\OverdueManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\QRCodeManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\QRScannerComponent.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unused-vars').","line":50,"column":1,"severity":1,"nodeType":null,"fix":{"range":[1100,1142],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unused-vars').","line":52,"column":1,"severity":1,"nodeType":null,"fix":{"range":[1205,1247],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { toast } from 'sonner';\r\nimport {\r\n  Camera,\r\n  CameraOff,\r\n  QrCode,\r\n  RefreshCw,\r\n  CheckCircle,\r\n  Zap,\r\n  Settings,\r\n  Activity,\r\n} from 'lucide-react';\r\nimport { BrowserMultiFormatReader, Result } from '@zxing/library';\r\nimport { getErrorMessage } from '@/utils/errorHandling';\r\n\r\ninterface QRScanResult {\r\n  text: string;\r\n  format: string;\r\n  timestamp: Date;\r\n  raw: string;\r\n}\r\n\r\ninterface ScanStatistics {\r\n  totalScans: number;\r\n  successfulScans: number;\r\n  failedScans: number;\r\n  averageScanTime: number;\r\n  lastScanTime: Date | null;\r\n}\r\n\r\n// eslint-disable-next-line no-unused-vars\r\ntype ScanSuccessCallback = (_result: QRScanResult) => void;\r\n// eslint-disable-next-line no-unused-vars\r\ntype ScanErrorCallback = (_error: string) => void;\r\n\r\ninterface QRScannerProps {\r\n  onScanSuccess?: ScanSuccessCallback;\r\n  onScanError?: ScanErrorCallback;\r\n  enabled?: boolean;\r\n  showSettings?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport default function QRScannerComponent({\r\n  onScanSuccess,\r\n  onScanError,\r\n  enabled = true,\r\n  showSettings = true,\r\n  className = '',\r\n}: QRScannerProps) {\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [hasCamera, setHasCamera] = useState(false);\r\n  const [selectedCamera, setSelectedCamera] = useState<string>('');\r\n  const [cameras, setCameras] = useState<MediaDeviceInfo[]>([]);\r\n  const [lastResult, setLastResult] = useState<QRScanResult | null>(null);\r\n  const [statistics, setStatistics] = useState<ScanStatistics>({\r\n    totalScans: 0,\r\n    successfulScans: 0,\r\n    failedScans: 0,\r\n    averageScanTime: 0,\r\n    lastScanTime: null,\r\n  });\r\n  const [settings, setSettings] = useState({\r\n    autoStart: false,\r\n    continuous: false,\r\n    beepOnScan: true,\r\n    vibrateOnScan: true,\r\n    showOverlay: true,\r\n    torchEnabled: false,\r\n    scanDelay: 1000,\r\n    maxResolutions: true,\r\n  });\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const codeReaderRef = useRef<BrowserMultiFormatReader | null>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const scanTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const lastScanTimeRef = useRef<number>(0);\r\n\r\n  // Initialize QR code reader\r\n  useEffect(() => {\r\n    if (enabled) {\r\n      initializeQRReader();\r\n      checkCameraAvailability();\r\n    }\r\n\r\n    return () => {\r\n      cleanup();\r\n    };\r\n  }, [enabled]);\r\n\r\n  // Auto-start if enabled\r\n  useEffect(() => {\r\n    if (settings.autoStart && hasCamera && !isScanning) {\r\n      startScanning();\r\n    }\r\n  }, [settings.autoStart, hasCamera]);\r\n\r\n  const initializeQRReader = () => {\r\n    try {\r\n      codeReaderRef.current = new BrowserMultiFormatReader();\r\n\r\n      // Configure reader - ZXing library type definitions don't match actual API\r\n      // These features are library-specific and handled internally\r\n      // The reader will automatically process results through decode methods\r\n    } catch {\r\n      toast.error('Failed to initialize QR scanner');\r\n    }\r\n  };\r\n\r\n  const checkCameraAvailability = async () => {\r\n    try {\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = devices.filter(\r\n        (device) => device.kind === 'videoinput'\r\n      );\r\n\r\n      setCameras(videoDevices);\r\n      setHasCamera(videoDevices.length > 0);\r\n\r\n      if (videoDevices.length > 0 && !selectedCamera) {\r\n        setSelectedCamera(videoDevices[0]?.deviceId || '');\r\n      }\r\n    } catch {\r\n      setHasCamera(false);\r\n    }\r\n  };\r\n\r\n  const startScanning = async () => {\r\n    if (!codeReaderRef.current || !selectedCamera) {\r\n      toast.error('No camera selected or scanner not initialized');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsScanning(true);\r\n\r\n      // Start video stream\r\n      const constraints = {\r\n        video: {\r\n          deviceId: selectedCamera,\r\n          width: settings.maxResolutions ? { ideal: 1920 } : { ideal: 640 },\r\n          height: settings.maxResolutions ? { ideal: 1080 } : { ideal: 480 },\r\n          facingMode: 'environment',\r\n        },\r\n        audio: false,\r\n      };\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n      streamRef.current = stream;\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        await videoRef.current.play();\r\n      }\r\n\r\n      // Start continuous scanning\r\n      if (settings.continuous) {\r\n        startContinuousScanning();\r\n      } else {\r\n        // Single scan mode\r\n        codeReaderRef.current\r\n          .decodeOnceFromVideoDevice(selectedCamera, 'video')\r\n          .then(handleQRResult)\r\n          .catch(handleQRScanError);\r\n      }\r\n\r\n      toast.success('Camera started successfully');\r\n    } catch (error) {\r\n      handleQRScanError(error);\r\n    }\r\n  };\r\n\r\n  const stopScanning = () => {\r\n    try {\r\n      setIsScanning(false);\r\n\r\n      // Stop video stream\r\n      if (streamRef.current) {\r\n        streamRef.current.getTracks().forEach((track) => track.stop());\r\n        streamRef.current = null;\r\n      }\r\n\r\n      // Clear video\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = null;\r\n      }\r\n\r\n      // Clear scan timeout\r\n      if (scanTimeoutRef.current) {\r\n        clearTimeout(scanTimeoutRef.current);\r\n        scanTimeoutRef.current = null;\r\n      }\r\n\r\n      toast.info('Camera stopped');\r\n    } catch {\r\n      // Ignore stop scanning errors\r\n    }\r\n  };\r\n\r\n  const startContinuousScanning = () => {\r\n    if (!codeReaderRef.current || !isScanning) {\r\n      return;\r\n    }\r\n\r\n    const scan = async () => {\r\n      if (!isScanning) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Check if enough time has passed since last scan\r\n        const now = Date.now();\r\n        if (now - lastScanTimeRef.current < settings.scanDelay) {\r\n          scanTimeoutRef.current = setTimeout(scan, 100);\r\n          return;\r\n        }\r\n\r\n        if (videoRef.current && codeReaderRef.current) {\r\n          const result = await codeReaderRef.current.decodeOnceFromVideoDevice(\r\n            selectedCamera,\r\n            'video'\r\n          );\r\n          if (result) {\r\n            handleQRResult(result);\r\n          }\r\n        }\r\n      } catch {\r\n        // Ignore scan errors in continuous mode\r\n      }\r\n\r\n      // Schedule next scan\r\n      if (settings.continuous && isScanning) {\r\n        scanTimeoutRef.current = setTimeout(scan, 100);\r\n      }\r\n    };\r\n\r\n    scan();\r\n  };\r\n\r\n  const handleQRResult = (result: Result) => {\r\n    try {\r\n      const now = Date.now();\r\n      lastScanTimeRef.current = now;\r\n\r\n      const scanResult: QRScanResult = {\r\n        text: result.getText(),\r\n        format: result.getBarcodeFormat().toString(),\r\n        timestamp: new Date(),\r\n        raw: result.getRawBytes().toString(),\r\n      };\r\n\r\n      setLastResult(scanResult);\r\n\r\n      // Update statistics\r\n      const scanTime = now - (statistics.lastScanTime?.getTime() || now);\r\n      setStatistics((prev) => ({\r\n        totalScans: prev.totalScans + 1,\r\n        successfulScans: prev.successfulScans + 1,\r\n        failedScans: prev.failedScans,\r\n        averageScanTime:\r\n          (prev.averageScanTime * prev.totalScans + scanTime) /\r\n          (prev.totalScans + 1),\r\n        lastScanTime: new Date(),\r\n      }));\r\n\r\n      // Provide feedback\r\n      if (settings.beepOnScan) {\r\n        playBeep();\r\n      }\r\n\r\n      if (settings.vibrateOnScan && 'vibrate' in navigator) {\r\n        navigator.vibrate(200);\r\n      }\r\n\r\n      // Call success callback\r\n      onScanSuccess?.(scanResult);\r\n\r\n      // Show success toast\r\n      toast.success(`QR Code scanned: ${scanResult.text}`);\r\n\r\n      // Stop scanning if not in continuous mode\r\n      if (!settings.continuous) {\r\n        stopScanning();\r\n      }\r\n    } catch (error) {\r\n      handleQRScanError(error);\r\n    }\r\n  };\r\n\r\n  const handleQRScanError = (error: unknown) => {\r\n    console.error('QR scan error:', error);\r\n\r\n    setStatistics((prev) => ({\r\n      ...prev,\r\n      totalScans: prev.totalScans + 1,\r\n      failedScans: prev.failedScans + 1,\r\n    }));\r\n\r\n    const errorMessage = getErrorMessage(error, 'Failed to scan QR code');\r\n    onScanError?.(errorMessage);\r\n\r\n    // Don't show error toast for continuous scanning errors\r\n    if (!settings.continuous) {\r\n      toast.error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const playBeep = () => {\r\n    try {\r\n      // Create audio context for beep\r\n      const AudioContextClass =\r\n        window.AudioContext ||\r\n        (window as unknown as { webkitAudioContext: typeof AudioContext })\r\n          .webkitAudioContext;\r\n      const audioContext = new AudioContextClass();\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n\r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n\r\n      oscillator.frequency.value = 1000; // 1kHz beep\r\n      oscillator.type = 'sine';\r\n\r\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\r\n      gainNode.gain.exponentialRampToValueAtTime(\r\n        0.01,\r\n        audioContext.currentTime + 0.1\r\n      );\r\n\r\n      oscillator.start(audioContext.currentTime);\r\n      oscillator.stop(audioContext.currentTime + 0.1);\r\n    } catch {\r\n      // Ignore audio errors\r\n    }\r\n  };\r\n\r\n  const toggleTorch = async () => {\r\n    try {\r\n      if (streamRef.current) {\r\n        const track = streamRef.current.getVideoTracks()[0];\r\n        if (track) {\r\n          const capabilities =\r\n            track.getCapabilities() as MediaTrackCapabilities & {\r\n              torch?: boolean;\r\n            };\r\n          if (capabilities.torch) {\r\n            await track.applyConstraints({\r\n              advanced: [\r\n                { torch: !settings.torchEnabled },\r\n              ] as unknown as MediaTrackConstraintSet[],\r\n            } as MediaTrackConstraints);\r\n            setSettings((prev) => ({\r\n              ...prev,\r\n              torchEnabled: !prev.torchEnabled,\r\n            }));\r\n          } else {\r\n            toast.error('Torch not supported on this device');\r\n          }\r\n        }\r\n      }\r\n    } catch {\r\n      toast.error('Failed to toggle flashlight');\r\n    }\r\n  };\r\n\r\n  const cleanup = () => {\r\n    stopScanning();\r\n    if (codeReaderRef.current) {\r\n      // ZXing library doesn't have removeEventListener in types, but reset handles cleanup\r\n      codeReaderRef.current.reset();\r\n    }\r\n  };\r\n\r\n  const resetStatistics = () => {\r\n    setStatistics({\r\n      totalScans: 0,\r\n      successfulScans: 0,\r\n      failedScans: 0,\r\n      averageScanTime: 0,\r\n      lastScanTime: null,\r\n    });\r\n    setLastResult(null);\r\n  };\r\n\r\n  const switchCamera = async (deviceId: string) => {\r\n    if (isScanning) {\r\n      stopScanning();\r\n      setSelectedCamera(deviceId);\r\n      setTimeout(() => startScanning(), 500);\r\n    } else {\r\n      setSelectedCamera(deviceId);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`space-y-6 ${className}`}>\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center\">\r\n            <QrCode className=\"h-5 w-5 mr-2\" />\r\n            QR Code Scanner\r\n          </CardTitle>\r\n          <CardDescription>\r\n            Scan QR codes and barcodes using your device camera\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Camera Selection */}\r\n          {cameras.length > 1 && (\r\n            <div className=\"flex items-center space-x-4\">\r\n              <Label htmlFor=\"camera-select\">Camera:</Label>\r\n              <Select value={selectedCamera} onValueChange={switchCamera}>\r\n                <SelectTrigger className=\"w-full max-w-xs\">\r\n                  <SelectValue placeholder=\"Select camera\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {cameras.map((camera) => (\r\n                    <SelectItem key={camera.deviceId} value={camera.deviceId}>\r\n                      <div className=\"flex items-center\">\r\n                        <Camera className=\"h-4 w-4 mr-2\" />\r\n                        {camera.label ||\r\n                          `Camera ${camera.deviceId.slice(0, 8)}`}\r\n                      </div>\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          )}\r\n\r\n          {/* Video Preview */}\r\n          <div className=\"relative\">\r\n            <video\r\n              ref={videoRef}\r\n              className=\"w-full h-64 bg-black rounded-lg object-cover\"\r\n              playsInline\r\n              muted\r\n            />\r\n\r\n            {/* Scanner Overlay */}\r\n            {isScanning && settings.showOverlay && (\r\n              <div className=\"absolute inset-0 pointer-events-none\">\r\n                <div className=\"absolute inset-4 border-2 border-green-500 rounded-lg\">\r\n                  <div className=\"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-500\"></div>\r\n                  <div className=\"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-500\"></div>\r\n                  <div className=\"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-500\"></div>\r\n                  <div className=\"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-500\"></div>\r\n                </div>\r\n                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                  <div className=\"w-48 h-1 bg-green-500 animate-pulse\"></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Status Indicator */}\r\n            <div className=\"absolute top-2 right-2\">\r\n              <Badge variant={isScanning ? 'default' : 'secondary'}>\r\n                {isScanning ? 'Scanning' : 'Ready'}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Control Buttons */}\r\n          <div className=\"flex justify-center space-x-4\">\r\n            <Button\r\n              onClick={isScanning ? stopScanning : startScanning}\r\n              disabled={!hasCamera || !selectedCamera}\r\n              size=\"lg\"\r\n            >\r\n              {isScanning ? (\r\n                <>\r\n                  <CameraOff className=\"h-4 w-4 mr-2\" />\r\n                  Stop Scanning\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Camera className=\"h-4 w-4 mr-2\" />\r\n                  Start Scanning\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            {hasCamera && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={toggleTorch}\r\n                disabled={!streamRef.current}\r\n              >\r\n                <Zap className=\"h-4 w-4 mr-2\" />\r\n                {settings.torchEnabled ? 'Torch Off' : 'Torch On'}\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {!hasCamera && (\r\n            <div className=\"text-center py-8\">\r\n              <CameraOff className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\r\n              <p className=\"text-gray-600\">No camera detected</p>\r\n              <p className=\"text-sm text-gray-500\">\r\n                Please ensure you have a camera connected and have granted\r\n                camera permissions\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Last Scan Result */}\r\n          {lastResult && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center text-sm\">\r\n                  <CheckCircle className=\"h-4 w-4 mr-2 text-green-500\" />\r\n                  Last Scan Result\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Content:</span>\r\n                    <span className=\"font-mono text-sm\">{lastResult.text}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Format:</span>\r\n                    <Badge variant=\"outline\">{lastResult.format}</Badge>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Timestamp:</span>\r\n                    <span className=\"text-sm\">\r\n                      {lastResult.timestamp.toLocaleTimeString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Settings Panel */}\r\n      {showSettings && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center\">\r\n              <Settings className=\"h-5 w-5 mr-2\" />\r\n              Scanner Settings\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"auto-start\">Auto-start</Label>\r\n              <Switch\r\n                id=\"auto-start\"\r\n                checked={settings.autoStart}\r\n                onCheckedChange={(checked: boolean) =>\r\n                  setSettings((prev) => ({ ...prev, autoStart: checked }))\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"continuous\">Continuous Scanning</Label>\r\n              <Switch\r\n                id=\"continuous\"\r\n                checked={settings.continuous}\r\n                onCheckedChange={(checked: boolean) => {\r\n                  setSettings((prev) => ({ ...prev, continuous: checked }));\r\n                  if (checked && isScanning) {\r\n                    startContinuousScanning();\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"beep-on-scan\">Beep on Scan</Label>\r\n              <Switch\r\n                id=\"beep-on-scan\"\r\n                checked={settings.beepOnScan}\r\n                onCheckedChange={(checked: boolean) =>\r\n                  setSettings((prev) => ({ ...prev, beepOnScan: checked }))\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"vibrate-on-scan\">Vibrate on Scan</Label>\r\n              <Switch\r\n                id=\"vibrate-on-scan\"\r\n                checked={settings.vibrateOnScan}\r\n                onCheckedChange={(checked: boolean) =>\r\n                  setSettings((prev) => ({ ...prev, vibrateOnScan: checked }))\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"show-overlay\">Show Scan Overlay</Label>\r\n              <Switch\r\n                id=\"show-overlay\"\r\n                checked={settings.showOverlay}\r\n                onCheckedChange={(checked: boolean) =>\r\n                  setSettings((prev) => ({ ...prev, showOverlay: checked }))\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label htmlFor=\"max-resolution\">Maximum Resolution</Label>\r\n              <Switch\r\n                id=\"max-resolution\"\r\n                checked={settings.maxResolutions}\r\n                onCheckedChange={(checked: boolean) =>\r\n                  setSettings((prev) => ({ ...prev, maxResolutions: checked }))\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Label htmlFor=\"scan-delay\">Scan Delay (ms)</Label>\r\n              <Input\r\n                id=\"scan-delay\"\r\n                type=\"number\"\r\n                value={settings.scanDelay}\r\n                onChange={(e) =>\r\n                  setSettings((prev) => ({\r\n                    ...prev,\r\n                    scanDelay: parseInt(e.target.value) || 1000,\r\n                  }))\r\n                }\r\n                min=\"100\"\r\n                max=\"5000\"\r\n                step=\"100\"\r\n              />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Statistics */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center justify-between\">\r\n            <span className=\"flex items-center\">\r\n              <Activity className=\"h-4 w-4 mr-2\" />\r\n              Scan Statistics\r\n            </span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={resetStatistics}>\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Reset\r\n            </Button>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold\">{statistics.totalScans}</div>\r\n              <p className=\"text-sm text-gray-600\">Total Scans</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-green-600\">\r\n                {statistics.successfulScans}\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Successful</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-red-600\">\r\n                {statistics.failedScans}\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Failed</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold\">\r\n                {statistics.averageScanTime.toFixed(0)}ms\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Avg Time</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\QuickServicePanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\RealTimeDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\RealTimeMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ReportsBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ScanWorkspace.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Users"},"fix":{"range":[1044,1054],"text":""},"desc":"Remove unused variable 'Users'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[1092,1102],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Plus"},"fix":{"range":[1152,1161],"text":""},"desc":"Remove unused variable 'Plus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[1205,1223],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[1223,1234],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":52,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[1290,1303],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setFilterStatus' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":121,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFilterStatus"},"fix":{"range":[3664,3681],"text":""},"desc":"Remove unused variable 'setFilterStatus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isExporting' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":122,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":122,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"isExporting"},"fix":{"range":[3720,3731],"text":""},"desc":"Remove unused variable 'isExporting'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isPrintingSessions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":123,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPrintingSessions"},"fix":{"range":[3778,3796],"text":""},"desc":"Remove unused variable 'isPrintingSessions'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'statistics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":130,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"statistics"},"fix":{"range":[4013,4023],"text":""},"desc":"Remove unused variable 'statistics'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isLoadingActiveSessions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":132,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLoadingActiveSessions"},"fix":{"range":[4141,4164],"text":""},"desc":"Remove unused variable 'isLoadingActiveSessions'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'realtimeFeed' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":137,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"realtimeFeed"},"fix":{"range":[4374,4386],"text":""},"desc":"Remove unused variable 'realtimeFeed'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":220,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":220,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'handleExportSessions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":622,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":622,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleExportSessions"},"fix":{"range":[19431,20342],"text":""},"desc":"Remove unused variable 'handleExportSessions'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handlePrintSessions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":650,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":650,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"handlePrintSessions"},"fix":{"range":[20348,20644],"text":""},"desc":"Remove unused variable 'handlePrintSessions'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { useUsbScanner, useManualEntry, scannerUtils } from '@/lib/scanner';\r\nimport selfServiceApi from '@/services/selfServiceApi';\r\nimport { useAppStore } from '@/store/useAppStore';\r\nimport { offlineActions } from '@/lib/offline-queue';\r\nimport { toast } from 'sonner';\r\nimport { scanApi, apiClient, studentsApi } from '@/lib/api';\r\nimport { useAttendanceWebSocket } from '@/hooks/useAttendanceWebSocket';\r\nimport {\r\n  Camera,\r\n  Keyboard,\r\n  Edit3,\r\n  Users,\r\n  BookOpen,\r\n  Monitor,\r\n  Gamepad2,\r\n  Clock,\r\n  AlertCircle,\r\n  Play,\r\n  Square,\r\n  RefreshCw,\r\n  Plus,\r\n  Timer,\r\n  UserPlus,\r\n  FileText,\r\n  Eye,\r\n  AlertTriangle,\r\n  Filter,\r\n  Printer,\r\n  ExternalLink,\r\n  BarChart3,\r\n  Activity,\r\n  Download,\r\n  Loader2,\r\n  Wifi,\r\n  WifiOff,\r\n} from 'lucide-react';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { StudentSearchDropdown } from '@/components/management/StudentSearchDropdown';\r\n\r\ninterface Student {\r\n  id: string;\r\n  studentId: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  gradeLevel: string;\r\n  gradeCategory: string;\r\n  section?: string;\r\n}\r\n\r\ninterface ScanResult {\r\n  student?: Student;\r\n  barcode: string;\r\n  type: 'student' | 'book' | 'equipment' | 'unknown';\r\n  timestamp: number;\r\n}\r\n\r\ninterface BookPreview {\r\n  id: string;\r\n  title: string;\r\n  accession_no: string;\r\n  isbn?: string | null;\r\n  available_copies?: number | null;\r\n}\r\n\r\nconst formatDateInput = (date: Date) => date.toISOString().slice(0, 16);\r\n\r\nconst defaultBorrowDueDate = () => {\r\n  const due = new Date();\r\n  due.setDate(due.getDate() + 7);\r\n  return formatDateInput(due);\r\n};\r\n\r\nexport function ScanWorkspace() {\r\n  const [scanResult, setScanResult] = useState<ScanResult | null>(null);\r\n  const [selectedAction, setSelectedAction] = useState<string>('');\r\n  const [timeLimit, setTimeLimit] = useState<number>(30);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [lastStudentContext, setLastStudentContext] = useState<{\r\n    id: string;\r\n    display: string;\r\n  } | null>(null);\r\n  const [isBookDialogOpen, setIsBookDialogOpen] = useState(false);\r\n  const [pendingBookBarcode, setPendingBookBarcode] = useState<string | null>(\r\n    null\r\n  );\r\n  const [bookPreview, setBookPreview] = useState<BookPreview | null>(null);\r\n  const [isBookPreviewLoading, setIsBookPreviewLoading] = useState(false);\r\n  const [bookIntent, setBookIntent] = useState<'BORROW' | 'READ' | 'RETURN'>(\r\n    'BORROW'\r\n  );\r\n  const [bookActionStudentId, setBookActionStudentId] = useState('');\r\n  const [bookActionStudentName, setBookActionStudentName] = useState('');\r\n  const [bookDueDate, setBookDueDate] = useState(defaultBorrowDueDate);\r\n  const [bookNotes, setBookNotes] = useState('');\r\n  const [isSubmittingBookAction, setIsSubmittingBookAction] = useState(false);\r\n\r\n  // Enhanced state for activity management\r\n  const [showActiveSessions, setShowActiveSessions] = useState(false);\r\n  const [showBulkActions, setShowBulkActions] = useState(false);\r\n  const [selectedSessions, setSelectedSessions] = useState<string[]>([]);\r\n  const [filterStatus, setFilterStatus] = useState<string>('all');\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isPrintingSessions, setIsPrintingSessions] = useState(false);\r\n\r\n  // Self-service enhancements\r\n  const [cooldownInfo, setCooldownInfo] = useState<{\r\n    studentId: string;\r\n    remainingSeconds: number;\r\n  } | null>(null);\r\n  const [statistics, setStatistics] = useState<any>(null);\r\n  const [activeSessions, setActiveSessions] = useState<any[]>([]);\r\n  const [isLoadingActiveSessions, setIsLoadingActiveSessions] = useState(false);\r\n\r\n  // Real-time WebSocket for scan events from all stations\r\n  const { events: wsEvents, isConnected: wsConnected } =\r\n    useAttendanceWebSocket();\r\n  const [realtimeFeed, setRealtimeFeed] = useState<\r\n    Array<{\r\n      id: string;\r\n      type: 'checkin' | 'checkout';\r\n      studentName: string;\r\n      timestamp: Date;\r\n    }>\r\n  >([]);\r\n  const lastProcessedEventRef = useRef<string | null>(null);\r\n\r\n  const { isOnline, lastScanResult, setActiveStudent } = useAppStore();\r\n  const { toggleListening, isListening, currentInput, lastScannedCode } =\r\n    useUsbScanner();\r\n  const { input, setInput, handleSubmit } = useManualEntry();\r\n\r\n  // Sound effects - create safely to handle missing files\r\n  const createSafeAudio = (src: string) => {\r\n    try {\r\n      const audio = new Audio(src);\r\n      audio.preload = 'none'; // Don't preload until needed\r\n      return audio;\r\n    } catch {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const successSound = createSafeAudio('/sounds/success.mp3');\r\n  const errorSound = createSafeAudio('/sounds/error.mp3');\r\n  const cooldownSound = createSafeAudio('/sounds/warning.mp3');\r\n\r\n  // Safe sound play function\r\n  const playSound = (audio: HTMLAudioElement | null) => {\r\n    if (audio) {\r\n      audio.play().catch(() => {});\r\n    }\r\n  };\r\n\r\n  // Handle WebSocket events - update real-time feed\r\n  useEffect(() => {\r\n    if (!wsEvents || wsEvents.length === 0) return;\r\n\r\n    const latestEvent = wsEvents[wsEvents.length - 1];\r\n\r\n    // Only process check-in and check-out events\r\n    if (\r\n      latestEvent.type !== 'student_checkin' &&\r\n      latestEvent.type !== 'student_checkout'\r\n    )\r\n      return;\r\n\r\n    const eventData = latestEvent.data as {\r\n      activityId: string;\r\n      studentName: string;\r\n    };\r\n    const eventId = eventData.activityId;\r\n\r\n    // Skip if we already processed this event\r\n    if (!eventId || lastProcessedEventRef.current === eventId) return;\r\n    lastProcessedEventRef.current = eventId;\r\n\r\n    const newEvent = {\r\n      id: `${eventId}-${Date.now()}`, // Unique key combining event ID with timestamp\r\n      type:\r\n        latestEvent.type === 'student_checkin'\r\n          ? ('checkin' as const)\r\n          : ('checkout' as const),\r\n      studentName: eventData.studentName,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Deduplicate by checking if event with same base ID already exists\r\n    setRealtimeFeed((prev) => {\r\n      const baseEventId = eventId;\r\n      const alreadyExists = prev.some((e) => e.id.startsWith(baseEventId));\r\n      if (alreadyExists) return prev;\r\n      return [newEvent, ...prev.slice(0, 9)];\r\n    }); // Keep last 10\r\n\r\n    // Play sound for events from other stations\r\n    try {\r\n      if (latestEvent.type === 'student_checkin') {\r\n        playSound(successSound);\r\n      }\r\n    } catch (e) {\r\n      // Ignore sound errors\r\n    }\r\n  }, [wsEvents]);\r\n\r\n  // Process scanned barcode\r\n  useEffect(() => {\r\n    if (lastScanResult && lastScanResult !== scanResult?.barcode) {\r\n      processBarcode(lastScanResult);\r\n    }\r\n  }, [lastScanResult]);\r\n\r\n  // Cooldown timer effect\r\n  useEffect(() => {\r\n    if (!cooldownInfo) {\r\n      return;\r\n    }\r\n\r\n    const interval = setInterval(() => {\r\n      setCooldownInfo((prev) => {\r\n        if (!prev || prev.remainingSeconds <= 1) {\r\n          return null;\r\n        }\r\n        return {\r\n          ...prev,\r\n          remainingSeconds: prev.remainingSeconds - 1,\r\n        };\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [cooldownInfo]);\r\n\r\n  // Load statistics on mount\r\n  useEffect(() => {\r\n    loadStatistics();\r\n    loadActiveSessions();\r\n    const interval = setInterval(() => {\r\n      loadStatistics();\r\n      loadActiveSessions();\r\n    }, 60000); // Refresh every minute\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const loadStatistics = async () => {\r\n    try {\r\n      const result = await selfServiceApi.getStatistics(\r\n        new Date(new Date().setHours(0, 0, 0, 0)), // Today start\r\n        new Date() // Now\r\n      );\r\n      if (result && result.success && result.data) {\r\n        setStatistics(result.data);\r\n      } else {\r\n        setStatistics(null);\r\n        toast.error('Failed to load statistics');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load statistics:', error);\r\n      setStatistics(null);\r\n      const msg = (error as any)?.message || 'Failed to load statistics';\r\n      toast.error(String(msg));\r\n    }\r\n  };\r\n\r\n  const loadActiveSessions = async () => {\r\n    setIsLoadingActiveSessions(true);\r\n    try {\r\n      const result = await studentsApi.getActiveSessions();\r\n      if (result && result.success && result.data) {\r\n        // Transform the data to match expected format\r\n        const dataArray = Array.isArray(result.data) ? result.data : [];\r\n        const sessions = dataArray.map((session: any) => ({\r\n          id: session.activityId || session.id, // Backend returns activityId\r\n          studentId: session.studentId,\r\n          studentName:\r\n            session.studentName ||\r\n            `${session.firstName || ''} ${session.lastName || ''}`.trim(),\r\n          gradeLevel: session.gradeLevel,\r\n          checkInTime: new Date(\r\n            session.checkinTime || session.checkInTime || session.startTime\r\n          ),\r\n          status: session.isOverdue ? 'overdue' : 'active',\r\n          duration: session.duration || 0,\r\n        }));\r\n        // Deduplicate sessions by id to prevent duplicate key errors\r\n        const uniqueSessions = sessions.filter(\r\n          (session: any, index: number, self: any[]) =>\r\n            index === self.findIndex((s) => s.id === session.id)\r\n        );\r\n        setActiveSessions(uniqueSessions);\r\n      } else {\r\n        setActiveSessions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load active sessions:', error);\r\n      setActiveSessions([]);\r\n    } finally {\r\n      setIsLoadingActiveSessions(false);\r\n    }\r\n  };\r\n\r\n  const handleBookBarcode = async (barcode: string) => {\r\n    setPendingBookBarcode(barcode);\r\n    setIsBookDialogOpen(true);\r\n    setBookIntent('BORROW');\r\n    setBookPreview(null);\r\n    setBookNotes('');\r\n    setBookDueDate(defaultBorrowDueDate());\r\n    setBookActionStudentId(lastStudentContext?.id || '');\r\n    setBookActionStudentName(lastStudentContext?.display || '');\r\n    setIsBookPreviewLoading(true);\r\n\r\n    try {\r\n      const previewResponse = await scanApi.detect(barcode);\r\n      if (previewResponse.success && (previewResponse as any).book) {\r\n        setBookPreview((previewResponse as any).book as BookPreview);\r\n      } else {\r\n        toast.warning(previewResponse.message || 'Book not found for scan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Book preview failed', error);\r\n      toast.error('Failed to load book details');\r\n      setIsBookDialogOpen(false);\r\n    } finally {\r\n      setIsBookPreviewLoading(false);\r\n    }\r\n  };\r\n\r\n  const submitBookAction = async () => {\r\n    if (!pendingBookBarcode) {\r\n      toast.error('No book scan detected');\r\n      return;\r\n    }\r\n\r\n    if (bookIntent !== 'RETURN' && !bookActionStudentId) {\r\n      toast.error('Select a student before continuing');\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingBookAction(true);\r\n\r\n    try {\r\n      const payload: {\r\n        barcode: string;\r\n        intent: 'BORROW' | 'READ' | 'RETURN';\r\n        studentId?: string;\r\n        dueDate?: string;\r\n        notes?: string;\r\n      } = {\r\n        barcode: pendingBookBarcode,\r\n        intent: bookIntent,\r\n      };\r\n\r\n      if (bookIntent !== 'RETURN') {\r\n        payload.studentId = bookActionStudentId;\r\n      }\r\n\r\n      if (bookIntent === 'BORROW' && bookDueDate) {\r\n        payload.dueDate = new Date(bookDueDate).toISOString();\r\n      }\r\n\r\n      if (bookNotes.trim().length > 0) {\r\n        payload.notes = bookNotes.trim();\r\n      }\r\n\r\n      const response = await scanApi.process(payload);\r\n      if (response.success) {\r\n        toast.success(response.message || 'Book action processed');\r\n        handleBookDialogChange(false);\r\n      } else {\r\n        toast.error(response.message || 'Failed to process book action');\r\n      }\r\n    } catch (error) {\r\n      console.error('Book action failed', error);\r\n      toast.error('Failed to process book action');\r\n    } finally {\r\n      setIsSubmittingBookAction(false);\r\n    }\r\n  };\r\n\r\n  const handleBookDialogChange = (open: boolean) => {\r\n    setIsBookDialogOpen(open);\r\n    if (!open) {\r\n      setPendingBookBarcode(null);\r\n      setBookPreview(null);\r\n      setBookActionStudentId('');\r\n      setBookActionStudentName('');\r\n      setBookNotes('');\r\n    }\r\n  };\r\n\r\n  const processBarcode = async (barcode: string) => {\r\n    const type = scannerUtils.barcodeValidation.getBarcodeType(barcode);\r\n\r\n    if (type === 'book') {\r\n      await handleBookBarcode(barcode);\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      const result = await selfServiceApi.processScan(barcode);\r\n\r\n      if (result.success) {\r\n        // Play success sound\r\n        playSound(successSound);\r\n\r\n        toast.success(result.message, {\r\n          description: result.student\r\n            ? `${result.student.name} - ${result.student.gradeLevel}`\r\n            : undefined,\r\n        });\r\n\r\n        const normalizedStudent = result.student\r\n          ? ({\r\n              id: result.student.id,\r\n              studentId: result.student.studentId,\r\n              firstName: result.student.name?.split(' ')[0] || '',\r\n              lastName:\r\n                result.student.name?.split(' ').slice(1).join(' ') ||\r\n                result.student.name ||\r\n                '',\r\n              gradeLevel: result.student.gradeLevel,\r\n              gradeCategory: result.student.gradeCategory || 'STUDENT', // Use correct field\r\n              section: result.student.section || '',\r\n            } as Student)\r\n          : undefined;\r\n\r\n        setScanResult({\r\n          student: normalizedStudent,\r\n          barcode,\r\n          type: 'student' as const,\r\n          timestamp: Date.now(),\r\n        } as ScanResult);\r\n\r\n        if (normalizedStudent) {\r\n          setLastStudentContext({\r\n            id: normalizedStudent.id,\r\n            display:\r\n              `${normalizedStudent.firstName} ${normalizedStudent.lastName}`.trim(),\r\n          });\r\n\r\n          // Set as global active student for cross-component workflow\r\n          setActiveStudent({\r\n            id: normalizedStudent.id,\r\n            name: `${normalizedStudent.firstName} ${normalizedStudent.lastName}`.trim(),\r\n            gradeLevel: normalizedStudent.gradeLevel,\r\n            gradeCategory: normalizedStudent.gradeCategory as any,\r\n            barcode: result.student?.studentId,\r\n          });\r\n\r\n          // Default to library check-in\r\n          setSelectedAction('library');\r\n        }\r\n\r\n        if (result.activity) {\r\n          setTimeLimit(result.activity.timeLimit);\r\n        }\r\n      } else {\r\n        if (result.cooldownRemaining && result.cooldownRemaining > 0) {\r\n          // Play cooldown warning sound\r\n          playSound(cooldownSound);\r\n\r\n          const minutes = Math.ceil(result.cooldownRemaining / 60);\r\n          toast.warning(result.message, {\r\n            description: `Please wait ${minutes} more minute(s)`,\r\n            duration: 5000,\r\n          });\r\n\r\n          // Set cooldown timer display\r\n          setCooldownInfo({\r\n            studentId: barcode,\r\n            remainingSeconds: result.cooldownRemaining,\r\n          });\r\n        } else {\r\n          // Play error sound\r\n          playSound(errorSound);\r\n\r\n          toast.error(result.message);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error processing barcode:', error);\r\n      toast.error('Failed to process scan');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Handle action execution\r\n  const executeAction = async () => {\r\n    if (!scanResult || !selectedAction) {\r\n      return;\r\n    }\r\n\r\n    const studentId = scanResult.student?.id || scanResult.barcode;\r\n    const purposes = [selectedAction]; // e.g., ['computer', 'reading', 'gaming']\r\n\r\n    try {\r\n      if (isOnline) {\r\n        // Use kiosk check-in endpoint for real-time WebSocket updates\r\n        await apiClient.post('/api/kiosk/confirm-check-in', {\r\n          studentId,\r\n          purposes,\r\n          scanData: scanResult.barcode,\r\n        });\r\n        toast.success(`Activity started: ${selectedAction}`);\r\n      } else {\r\n        // Offline: queue for later\r\n        await offlineActions.logActivity({\r\n          studentId,\r\n          activityType: selectedAction,\r\n          timeLimitMinutes: ['computer', 'gaming', 'avr'].includes(\r\n            selectedAction\r\n          )\r\n            ? timeLimit\r\n            : undefined,\r\n        });\r\n        toast.info('Queued for sync when online');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to log activity:', error);\r\n      toast.error('Failed to start activity session');\r\n    }\r\n\r\n    // Reset for next scan\r\n    setScanResult(null);\r\n    setSelectedAction('');\r\n    setTimeLimit(30);\r\n  };\r\n\r\n  // Enhanced Activity Management Handlers\r\n  const handleBulkCheckout = async () => {\r\n    if (\r\n      !confirm(\r\n        `Are you sure you want to end ${selectedSessions.length} sessions?`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Process all selected sessions\r\n      const promises = selectedSessions.map((sessionId) => {\r\n        // Find session details to log correct activity end\r\n        const session = activeSessions.find((s) => s.id === sessionId);\r\n        if (!session) return Promise.resolve();\r\n\r\n        // End session via kiosk checkout endpoint\r\n        if (isOnline) {\r\n          return apiClient.post('/api/kiosk/checkout', {\r\n            studentId: session.studentId || 'unknown',\r\n            scanData: session.studentId || 'unknown',\r\n          });\r\n        } else {\r\n          return offlineActions.logActivity({\r\n            studentId: session.studentId || 'unknown',\r\n            activityType: session.activity,\r\n            endTime: new Date().toISOString(),\r\n            status: 'completed',\r\n          });\r\n        }\r\n      });\r\n\r\n      await Promise.all(promises);\r\n\r\n      toast.success(`Successfully ended ${selectedSessions.length} sessions`);\r\n      setSelectedSessions([]);\r\n      setShowBulkActions(false);\r\n    } catch (error) {\r\n      console.error('Bulk checkout error:', error);\r\n      toast.error('Failed to end some sessions');\r\n    }\r\n  };\r\n\r\n  const handleBulkExtendTime = async (additionalMinutes: number) => {\r\n    try {\r\n      // Mock bulk time extension\r\n      toast.success(\r\n        `Extended time by ${additionalMinutes} minutes for ${selectedSessions.length} sessions`\r\n      );\r\n      setSelectedSessions([]);\r\n      setShowBulkActions(false);\r\n    } catch {\r\n      toast.error('Failed to extend session times');\r\n    }\r\n  };\r\n\r\n  const handleBulkNotify = async () => {\r\n    try {\r\n      // Mock bulk notification\r\n      toast.success(\r\n        `Notifications sent to ${selectedSessions.length} students`\r\n      );\r\n      setSelectedSessions([]);\r\n      setShowBulkActions(false);\r\n    } catch {\r\n      toast.error('Failed to send notifications');\r\n    }\r\n  };\r\n\r\n  const handleExportSessions = async () => {\r\n    try {\r\n      setIsExporting(true);\r\n      // Mock export functionality\r\n      const csvContent = `Session ID,Student Name,Activity,Start Time,Status\\n${selectedSessions\r\n        .map((id) => `${id},Student Name,Activity,Time,Active`)\r\n        .join('\\n')}`;\r\n\r\n      const blob = new Blob([csvContent], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `sessions-export-${\r\n        new Date().toISOString().split('T')[0]\r\n      }.csv`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n\r\n      toast.success('Sessions exported successfully!');\r\n    } catch {\r\n      toast.error('Failed to export sessions');\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const handlePrintSessions = () => {\r\n    try {\r\n      setIsPrintingSessions(true);\r\n      window.print();\r\n      toast.success('Print dialog opened for sessions');\r\n    } catch {\r\n      toast.error('Failed to open print dialog');\r\n    } finally {\r\n      setIsPrintingSessions(false);\r\n    }\r\n  };\r\n\r\n  const handleTransferEquipment = (sessionId: string) => {\r\n    toast.info(\r\n      `Equipment transfer for session ${sessionId} - would open transfer dialog`\r\n    );\r\n  };\r\n\r\n  const handleAddSessionNotes = (sessionId: string) => {\r\n    toast.info(`Add notes for session ${sessionId} - would open notes dialog`);\r\n  };\r\n\r\n  const handleViewStudentHistory = (studentId: string) => {\r\n    toast.info(\r\n      `View history for student ${studentId} - would open history dialog`\r\n    );\r\n  };\r\n\r\n  const handlePrintHallPass = (sessionId: string) => {\r\n    toast.info(\r\n      `Print hall pass for session ${sessionId} - would generate pass`\r\n    );\r\n  };\r\n\r\n  const toggleSessionSelection = (sessionId: string) => {\r\n    setSelectedSessions((prev) =>\r\n      prev.includes(sessionId)\r\n        ? prev.filter((id) => id !== sessionId)\r\n        : [...prev, sessionId]\r\n    );\r\n  };\r\n\r\n  // Filter active sessions based on status\r\n  const filteredSessions =\r\n    filterStatus === 'all'\r\n      ? activeSessions\r\n      : activeSessions.filter((session) => session.status === filterStatus);\r\n\r\n  // Get time limit based on grade category\r\n  const getDefaultTimeLimit = (gradeCategory?: string) => {\r\n    switch (gradeCategory) {\r\n      case 'primary':\r\n        return 15;\r\n      case 'gradeSchool':\r\n        return 30;\r\n      case 'juniorHigh':\r\n        return 45;\r\n      case 'seniorHigh':\r\n        return 60;\r\n      default:\r\n        return 30;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scanResult?.student) {\r\n      setTimeLimit(getDefaultTimeLimit(scanResult.student.gradeCategory));\r\n    }\r\n  }, [scanResult]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Dialog open={isBookDialogOpen} onOpenChange={handleBookDialogChange}>\r\n        <DialogContent className=\"sm:max-w-lg space-y-4\">\r\n          <DialogHeader>\r\n            <DialogTitle>Process Book Scan</DialogTitle>\r\n            <DialogDescription>\r\n              Choose how to handle the scanned material\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"rounded-lg border bg-muted/40 p-3\">\r\n            <p className=\"text-xs uppercase text-muted-foreground\">Barcode</p>\r\n            <p className=\"font-mono text-lg font-semibold\">\r\n              {pendingBookBarcode || ''}\r\n            </p>\r\n            {isBookPreviewLoading ? (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mt-2\">\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                Loading book details\r\n              </div>\r\n            ) : bookPreview ? (\r\n              <div className=\"mt-2 text-sm\">\r\n                <p className=\"font-semibold\">{bookPreview.title}</p>\r\n                <p className=\"text-muted-foreground\">\r\n                  Accession #{bookPreview.accession_no}\r\n                </p>\r\n                <p className=\"text-muted-foreground\">\r\n                  Available copies: {bookPreview.available_copies ?? ''}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <p className=\"mt-2 text-sm text-destructive\">\r\n                Book details unavailable. You can still continue.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <p className=\"text-sm font-medium\">Select Action</p>\r\n            <div className=\"flex gap-2\">\r\n              {(['BORROW', 'READ', 'RETURN'] as const).map((option) => (\r\n                <Button\r\n                  key={option}\r\n                  type=\"button\"\r\n                  variant={bookIntent === option ? 'default' : 'outline'}\r\n                  onClick={() => setBookIntent(option)}\r\n                >\r\n                  {option === 'BORROW' && <BookOpen className=\"h-4 w-4 mr-1\" />}\r\n                  {option === 'READ' && <Eye className=\"h-4 w-4 mr-1\" />}\r\n                  {option === 'RETURN' && (\r\n                    <RefreshCw className=\"h-4 w-4 mr-1\" />\r\n                  )}\r\n                  {option === 'BORROW'\r\n                    ? 'Borrow'\r\n                    : option === 'READ'\r\n                      ? 'Reading'\r\n                      : 'Return'}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {bookIntent !== 'RETURN' && (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium\">Student</label>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  className=\"text-xs\"\r\n                  disabled={!lastStudentContext}\r\n                  onClick={() => {\r\n                    if (!lastStudentContext) return;\r\n                    setBookActionStudentId(lastStudentContext.id);\r\n                    setBookActionStudentName(lastStudentContext.display);\r\n                    toast.success(`Using ${lastStudentContext.display}`);\r\n                  }}\r\n                >\r\n                  Use last scan\r\n                </Button>\r\n              </div>\r\n              <StudentSearchDropdown\r\n                onSelect={(student) => {\r\n                  setBookActionStudentId(student.id);\r\n                  setBookActionStudentName(student.name);\r\n                  setLastStudentContext({\r\n                    id: student.id,\r\n                    display: student.name,\r\n                  });\r\n                }}\r\n                selectedStudentId={bookActionStudentId}\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Selected: {bookActionStudentName || 'None'}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {bookIntent === 'BORROW' && (\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"book-due-date\" className=\"text-sm font-medium\">\r\n                Due Date\r\n              </label>\r\n              <Input\r\n                id=\"book-due-date\"\r\n                type=\"datetime-local\"\r\n                value={bookDueDate}\r\n                onChange={(e) => setBookDueDate(e.target.value)}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-2\">\r\n            <label htmlFor=\"book-notes\" className=\"text-sm font-medium\">\r\n              Notes (optional)\r\n            </label>\r\n            <Textarea\r\n              id=\"book-notes\"\r\n              value={bookNotes}\r\n              onChange={(e) => setBookNotes(e.target.value)}\r\n              placeholder=\"Remarks for this transaction\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => handleBookDialogChange(false)}\r\n              disabled={isSubmittingBookAction}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              onClick={submitBookAction}\r\n              disabled={\r\n                isSubmittingBookAction ||\r\n                (bookIntent !== 'RETURN' && !bookActionStudentId)\r\n              }\r\n            >\r\n              {isSubmittingBookAction && (\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n              )}\r\n              Confirm\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n      {/* Enhanced Header with Action Buttons */}\r\n      <div className=\"relative\">\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold tracking-tight text-foreground\">\r\n            Scan Station\r\n          </h3>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Scan student IDs or book barcodes to process check-ins and\r\n            borrowing.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Simplified Header Action Buttons */}\r\n        <div className=\"absolute top-0 right-0 flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => setShowActiveSessions(!showActiveSessions)}\r\n            className=\"bg-white/90 hover:bg-white shadow-sm dark:bg-gray-800/90\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-1\" />\r\n            {showActiveSessions ? 'Hide' : 'Show'} Sessions (\r\n            {activeSessions.length})\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Simplified Connection Status - Single compact alert */}\r\n      <Alert\r\n        className={`${isOnline ? 'border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20' : 'border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950/20'}`}\r\n      >\r\n        {isOnline ? (\r\n          <Wifi className=\"h-4 w-4 text-green-600\" />\r\n        ) : (\r\n          <WifiOff className=\"h-4 w-4 text-red-600\" />\r\n        )}\r\n        <AlertDescription\r\n          className={isOnline ? 'text-green-700' : 'text-red-700'}\r\n        >\r\n          {isOnline\r\n            ? `Online  ${wsConnected ? 'Live updates active' : 'Connecting...'}`\r\n            : 'Offline - Activities will sync when connection is restored'}\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      {/* Visual Cooldown Timer */}\r\n      {cooldownInfo && (\r\n        <Alert className=\"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertDescription className=\"flex items-center justify-between\">\r\n            <span>\r\n              <strong>Cooldown Active:</strong> Please wait before checking in\r\n              again\r\n            </span>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-32 bg-gray-200 rounded-full h-2\">\r\n                <div\r\n                  className=\"bg-orange-500 h-2 rounded-full transition-all duration-1000\"\r\n                  style={{\r\n                    width: `${((30 * 60 - cooldownInfo.remainingSeconds) / (30 * 60)) * 100}%`,\r\n                  }}\r\n                />\r\n              </div>\r\n              <span className=\"font-mono text-sm font-semibold\">\r\n                {Math.floor(cooldownInfo.remainingSeconds / 60)}:\r\n                {(cooldownInfo.remainingSeconds % 60)\r\n                  .toString()\r\n                  .padStart(2, '0')}\r\n              </span>\r\n            </div>\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Bulk Actions Panel */}\r\n      {showBulkActions && selectedSessions.length > 0 && (\r\n        <Card className=\"border-2 border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-lg flex items-center justify-between\">\r\n              <span>\r\n                Bulk Actions - {selectedSessions.length} Sessions Selected\r\n              </span>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => {\r\n                  setShowBulkActions(false);\r\n                  setSelectedSessions([]);\r\n                }}\r\n              >\r\n                \r\n              </Button>\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              {/* Time Extension Actions */}\r\n              <div>\r\n                <p className=\"text-sm font-medium mb-2\">Extend Time:</p>\r\n                <div className=\"flex gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleBulkExtendTime(15)}\r\n                  >\r\n                    <Timer className=\"h-3 w-3 mr-1\" />\r\n                    +15 min\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleBulkExtendTime(30)}\r\n                  >\r\n                    <Timer className=\"h-3 w-3 mr-1\" />\r\n                    +30 min\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleBulkExtendTime(60)}\r\n                  >\r\n                    <Timer className=\"h-3 w-3 mr-1\" />\r\n                    +60 min\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Other Bulk Actions */}\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Button\r\n                  variant=\"destructive\"\r\n                  size=\"sm\"\r\n                  onClick={handleBulkCheckout}\r\n                >\r\n                  <Square className=\"h-3 w-3 mr-1\" />\r\n                  End Sessions\r\n                </Button>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleBulkNotify}>\r\n                  <AlertCircle className=\"h-3 w-3 mr-1\" />\r\n                  Send Notices\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Selected Sessions Summary */}\r\n              <div className=\"text-xs text-muted-foreground bg-white/50 dark:bg-gray-800/50 p-2 rounded\">\r\n                Selected Sessions: {selectedSessions.join(', ')}\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Active Sessions Panel */}\r\n      {showActiveSessions && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center justify-between\">\r\n              <span>Active Sessions ({filteredSessions.length})</span>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setShowActiveSessions(false)}\r\n              >\r\n                \r\n              </Button>\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Manage current library sessions and student activities\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {filteredSessions.map((session) => (\r\n                <div\r\n                  key={session.id}\r\n                  className={`p-4 rounded-lg border ${\r\n                    session.status === 'overdue'\r\n                      ? 'bg-red-50 border-red-200 dark:bg-red-950/20 dark:border-red-800'\r\n                      : 'bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedSessions.includes(session.id)}\r\n                        onChange={() => toggleSessionSelection(session.id)}\r\n                        className=\"rounded\"\r\n                      />\r\n                      <div>\r\n                        <div className=\"font-medium\">{session.studentName}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">\r\n                          {session.activity}  {session.equipment} {' '}\r\n                          {session.startTime}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Badge\r\n                        variant={\r\n                          session.status === 'overdue'\r\n                            ? 'destructive'\r\n                            : 'default'\r\n                        }\r\n                        className=\"text-xs\"\r\n                      >\r\n                        {session.status.toUpperCase()}\r\n                      </Badge>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleViewStudentHistory(session.id)}\r\n                      >\r\n                        <Eye className=\"h-3 w-3\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleTransferEquipment(session.id)}\r\n                      >\r\n                        <ExternalLink className=\"h-3 w-3\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleAddSessionNotes(session.id)}\r\n                      >\r\n                        <FileText className=\"h-3 w-3\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handlePrintHallPass(session.id)}\r\n                      >\r\n                        <Printer className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Session Action Buttons */}\r\n                  <div className=\"flex gap-1 mt-3 pt-3 border-t\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleBulkExtendTime(15)}\r\n                    >\r\n                      <Timer className=\"h-3 w-3 mr-1\" />\r\n                      +15\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleBulkExtendTime(30)}\r\n                    >\r\n                      <Timer className=\"h-3 w-3 mr-1\" />\r\n                      +30\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleBulkExtendTime(60)}\r\n                    >\r\n                      <Timer className=\"h-3 w-3 mr-1\" />\r\n                      +60\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"destructive\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleBulkCheckout()}\r\n                    >\r\n                      <Square className=\"h-3 w-3 mr-1\" />\r\n                      End\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        {/* Scanner Section */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Barcode Scanner</CardTitle>\r\n            <CardDescription>\r\n              Choose your preferred scanning method\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Tabs defaultValue=\"usb\" className=\"space-y-4\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger\r\n                  value=\"usb\"\r\n                  className=\"flex items-center space-x-2\"\r\n                >\r\n                  <Keyboard className=\"h-4 w-4\" />\r\n                  <span>USB Scanner</span>\r\n                </TabsTrigger>\r\n                <TabsTrigger\r\n                  value=\"manual\"\r\n                  className=\"flex items-center space-x-2\"\r\n                >\r\n                  <Edit3 className=\"h-4 w-4\" />\r\n                  <span>Manual Entry</span>\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              {/* USB Scanner */}\r\n              <TabsContent value=\"usb\" className=\"space-y-4\">\r\n                <div className=\"space-y-4\">\r\n                  <div\r\n                    className={`\r\n                    p-8 rounded-lg border-2 text-center transition-all\r\n                    ${\r\n                      isListening\r\n                        ? 'border-green-500 bg-green-50 dark:bg-green-950/20'\r\n                        : 'border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50'\r\n                    }\r\n                  `}\r\n                  >\r\n                    <Keyboard\r\n                      className={`h-16 w-16 mx-auto mb-4 ${\r\n                        isListening\r\n                          ? 'text-green-600 dark:text-green-400 animate-pulse'\r\n                          : 'text-muted-foreground'\r\n                      }`}\r\n                    />\r\n\r\n                    {isListening ? (\r\n                      <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-center gap-2\">\r\n                          <div className=\"h-2 w-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n                          <p className=\"text-lg font-semibold text-green-700 dark:text-green-300\">\r\n                            USB Scanner ACTIVE\r\n                          </p>\r\n                        </div>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          Scan any barcode or QR code with your USB scanner\r\n                        </p>\r\n                        {currentInput && (\r\n                          <div className=\"mt-4 p-3 bg-white dark:bg-gray-800 rounded border border-green-300 dark:border-green-700\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              Reading:\r\n                            </p>\r\n                            <p className=\"font-mono text-lg font-bold text-green-600 dark:text-green-400\">\r\n                              {currentInput}_\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                        {lastScannedCode && (\r\n                          <div className=\"mt-2 p-2 bg-green-100 dark:bg-green-900/30 rounded\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              Last scanned:\r\n                            </p>\r\n                            <p className=\"font-mono text-sm font-semibold text-green-700 dark:text-green-300\">\r\n                              {lastScannedCode}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                        <p className=\"text-muted-foreground mb-4\">\r\n                          USB Scanner is deactivated\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n\r\n                    <Button\r\n                      onClick={toggleListening}\r\n                      variant={isListening ? 'destructive' : 'default'}\r\n                      className=\"mt-4\"\r\n                    >\r\n                      {isListening ? (\r\n                        <>\r\n                          <Square className=\"h-4 w-4 mr-2\" />\r\n                          Deactivate Scanner\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Play className=\"h-4 w-4 mr-2\" />\r\n                          Activate Scanner\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </div>\r\n\r\n                  <Alert>\r\n                    <AlertCircle className=\"h-4 w-4\" />\r\n                    <AlertDescription>\r\n                      <strong>How to use:</strong> Make sure this window is\r\n                      focused, then scan any barcode with your USB scanner. The\r\n                      scanner will automatically detect and process the barcode.\r\n                    </AlertDescription>\r\n                  </Alert>\r\n                </div>\r\n              </TabsContent>\r\n\r\n              {/* Manual Entry */}\r\n              <TabsContent value=\"manual\" className=\"space-y-4\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"p-6 rounded-lg border-2 border-blue-300 bg-blue-50 dark:bg-blue-950/20 dark:border-blue-700\">\r\n                    <Edit3 className=\"h-12 w-12 mx-auto mb-4 text-blue-600 dark:text-blue-400\" />\r\n                    <p className=\"text-center text-lg font-semibold text-blue-700 dark:text-blue-300 mb-4\">\r\n                      Manual Barcode Entry\r\n                    </p>\r\n                    <p className=\"text-center text-sm text-muted-foreground mb-4\">\r\n                      Type or paste a student ID or barcode below\r\n                    </p>\r\n                    <div className=\"flex gap-2\">\r\n                      <Input\r\n                        placeholder=\"Enter student ID or barcode...\"\r\n                        value={input}\r\n                        onChange={(e) => setInput(e.target.value)}\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === 'Enter' && input.trim()) {\r\n                            handleSubmit();\r\n                          }\r\n                        }}\r\n                        className=\"flex-1\"\r\n                        autoFocus\r\n                      />\r\n                      <Button onClick={handleSubmit} disabled={!input.trim()}>\r\n                        Submit\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  <Alert>\r\n                    <AlertCircle className=\"h-4 w-4\" />\r\n                    <AlertDescription>\r\n                      <strong>Tip:</strong> Enter the student ID (e.g.,\r\n                      20240191) or scan barcode value directly. Press Enter or\r\n                      click Submit to process.\r\n                    </AlertDescription>\r\n                  </Alert>\r\n                </div>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Result & Action Section */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Scan Result & Actions</CardTitle>\r\n            <CardDescription>\r\n              Review scan result and select appropriate action\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isProcessing ? (\r\n              <div className=\"text-center py-8\">\r\n                <RefreshCw className=\"h-8 w-8 mx-auto mb-4 animate-spin\" />\r\n                <p className=\"text-muted-foreground\">Processing barcode...</p>\r\n              </div>\r\n            ) : scanResult ? (\r\n              <div className=\"space-y-4\">\r\n                {/* Scan Result Display */}\r\n                <div\r\n                  className={`p-5 rounded-xl border-2 transition-all duration-300 ${\r\n                    scanResult.type === 'student'\r\n                      ? 'bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 border-green-300 dark:border-green-700'\r\n                      : scanResult.type === 'book'\r\n                        ? 'bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border-blue-300 dark:border-blue-700'\r\n                        : 'bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-900/30 dark:to-slate-900/30 border-gray-300 dark:border-gray-700'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <Badge\r\n                      className={`px-3 py-1 text-sm font-semibold ${\r\n                        scanResult.type === 'student'\r\n                          ? 'bg-green-500 hover:bg-green-600 text-white'\r\n                          : scanResult.type === 'book'\r\n                            ? 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                            : scanResult.type === 'equipment'\r\n                              ? 'bg-purple-500 hover:bg-purple-600 text-white'\r\n                              : 'bg-red-500 hover:bg-red-600 text-white'\r\n                      }`}\r\n                    >\r\n                       {scanResult.type.toUpperCase()} FOUND\r\n                    </Badge>\r\n                    <span className=\"text-xs text-muted-foreground bg-white dark:bg-slate-800 px-2 py-1 rounded-md\">\r\n                      {new Date(scanResult.timestamp).toLocaleTimeString()}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {scanResult.student ? (\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <div className=\"h-16 w-16 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold shadow-lg\">\r\n                          {scanResult.student.firstName.charAt(0)}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                            {scanResult.student.firstName}{' '}\r\n                            {scanResult.student.lastName}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n                            ID: {scanResult.student.studentId}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex flex-wrap gap-2 mt-3\">\r\n                        <Badge\r\n                          variant=\"outline\"\r\n                          className=\"bg-white dark:bg-slate-800 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300\"\r\n                        >\r\n                          Grade {scanResult.student.gradeLevel}\r\n                        </Badge>\r\n                        {scanResult.student.section && (\r\n                          <Badge\r\n                            variant=\"outline\"\r\n                            className=\"bg-white dark:bg-slate-800 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300\"\r\n                          >\r\n                            {scanResult.student.section}\r\n                          </Badge>\r\n                        )}\r\n                        <Badge\r\n                          variant=\"outline\"\r\n                          className=\"bg-white dark:bg-slate-800 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300\"\r\n                        >\r\n                          {scanResult.student.gradeCategory}\r\n                        </Badge>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"font-medium\">\r\n                        Barcode: {scanResult.barcode}\r\n                      </div>\r\n                      <div className=\"text-sm text-muted-foreground\">\r\n                        {scanResult.type === 'unknown'\r\n                          ? 'Unrecognized barcode format'\r\n                          : `No data found for this ${scanResult.type}`}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Action Selection */}\r\n                {scanResult.student && (\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <h4 className=\"font-semibold mb-3 text-gray-900 dark:text-white\">\r\n                        Select Action:\r\n                      </h4>\r\n                      <div className=\"grid grid-cols-2 gap-3\">\r\n                        <Button\r\n                          variant={\r\n                            selectedAction === 'library' ? 'default' : 'outline'\r\n                          }\r\n                          onClick={() => setSelectedAction('library')}\r\n                          className={`justify-start h-14 ${\r\n                            selectedAction === 'library'\r\n                              ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 border-0 shadow-lg'\r\n                              : 'hover:bg-green-50 hover:border-green-300 dark:hover:bg-green-950/30'\r\n                          }`}\r\n                        >\r\n                          <BookOpen\r\n                            className={`h-5 w-5 mr-2 ${selectedAction === 'library' ? 'text-white' : 'text-green-600'}`}\r\n                          />\r\n                          <span\r\n                            className={\r\n                              selectedAction === 'library' ? 'text-white' : ''\r\n                            }\r\n                          >\r\n                            Library / Study\r\n                          </span>\r\n                        </Button>\r\n                        <Button\r\n                          variant={\r\n                            selectedAction === 'computer'\r\n                              ? 'default'\r\n                              : 'outline'\r\n                          }\r\n                          onClick={() => setSelectedAction('computer')}\r\n                          className={`justify-start h-14 ${\r\n                            selectedAction === 'computer'\r\n                              ? 'bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 border-0 shadow-lg'\r\n                              : 'hover:bg-blue-50 hover:border-blue-300 dark:hover:bg-blue-950/30'\r\n                          }`}\r\n                        >\r\n                          <Monitor\r\n                            className={`h-5 w-5 mr-2 ${selectedAction === 'computer' ? 'text-white' : 'text-blue-600'}`}\r\n                          />\r\n                          <span\r\n                            className={\r\n                              selectedAction === 'computer' ? 'text-white' : ''\r\n                            }\r\n                          >\r\n                            Computer\r\n                          </span>\r\n                        </Button>\r\n                        <Button\r\n                          variant={\r\n                            selectedAction === 'gaming' ? 'default' : 'outline'\r\n                          }\r\n                          onClick={() => setSelectedAction('gaming')}\r\n                          className={`justify-start h-14 ${\r\n                            selectedAction === 'gaming'\r\n                              ? 'bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 border-0 shadow-lg'\r\n                              : 'hover:bg-purple-50 hover:border-purple-300 dark:hover:bg-purple-950/30'\r\n                          }`}\r\n                        >\r\n                          <Gamepad2\r\n                            className={`h-5 w-5 mr-2 ${selectedAction === 'gaming' ? 'text-white' : 'text-purple-600'}`}\r\n                          />\r\n                          <span\r\n                            className={\r\n                              selectedAction === 'gaming' ? 'text-white' : ''\r\n                            }\r\n                          >\r\n                            Gaming\r\n                          </span>\r\n                        </Button>\r\n                        <Button\r\n                          variant={\r\n                            selectedAction === 'borrowing'\r\n                              ? 'default'\r\n                              : 'outline'\r\n                          }\r\n                          onClick={() => setSelectedAction('borrowing')}\r\n                          className={`justify-start h-14 ${\r\n                            selectedAction === 'borrowing'\r\n                              ? 'bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 border-0 shadow-lg'\r\n                              : 'hover:bg-amber-50 hover:border-amber-300 dark:hover:bg-amber-950/30'\r\n                          }`}\r\n                        >\r\n                          <BookOpen\r\n                            className={`h-5 w-5 mr-2 ${selectedAction === 'borrowing' ? 'text-white' : 'text-amber-600'}`}\r\n                          />\r\n                          <span\r\n                            className={\r\n                              selectedAction === 'borrowing' ? 'text-white' : ''\r\n                            }\r\n                          >\r\n                            Borrow Book\r\n                          </span>\r\n                        </Button>\r\n                        <Button\r\n                          variant={\r\n                            selectedAction === 'returning'\r\n                              ? 'default'\r\n                              : 'outline'\r\n                          }\r\n                          onClick={() => setSelectedAction('returning')}\r\n                          className={`justify-start h-14 col-span-2 ${\r\n                            selectedAction === 'returning'\r\n                              ? 'bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 border-0 shadow-lg'\r\n                              : 'hover:bg-teal-50 hover:border-teal-300 dark:hover:bg-teal-950/30'\r\n                          }`}\r\n                        >\r\n                          <BookOpen\r\n                            className={`h-5 w-5 mr-2 ${selectedAction === 'returning' ? 'text-white' : 'text-teal-600'}`}\r\n                          />\r\n                          <span\r\n                            className={\r\n                              selectedAction === 'returning' ? 'text-white' : ''\r\n                            }\r\n                          >\r\n                            Return Book\r\n                          </span>\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Time Limit Selection */}\r\n                    {['computer', 'gaming'].includes(selectedAction) && (\r\n                      <div>\r\n                        <h4 className=\"font-medium mb-2\">\r\n                          Time Limit (minutes):\r\n                        </h4>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Input\r\n                            type=\"number\"\r\n                            min=\"5\"\r\n                            max=\"120\"\r\n                            value={timeLimit}\r\n                            onChange={(e) =>\r\n                              setTimeLimit(parseInt(e.target.value) || 30)\r\n                            }\r\n                            className=\"w-20\"\r\n                          />\r\n                          <span className=\"text-sm text-muted-foreground\">\r\n                            Default for {scanResult.student.gradeCategory}:{' '}\r\n                            {getDefaultTimeLimit(\r\n                              scanResult.student.gradeCategory\r\n                            )}\r\n                            min\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Execute Action */}\r\n                    <Button\r\n                      onClick={executeAction}\r\n                      disabled={!selectedAction}\r\n                      size=\"lg\"\r\n                      className={`w-full h-14 text-lg font-semibold transition-all duration-300 ${\r\n                        selectedAction\r\n                          ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:scale-[1.02]'\r\n                          : 'bg-gray-300 dark:bg-gray-700'\r\n                      }`}\r\n                    >\r\n                      <Play className=\"h-5 w-5 mr-2\" />\r\n                      {selectedAction\r\n                        ? `Execute ${selectedAction.charAt(0).toUpperCase() + selectedAction.slice(1)}`\r\n                        : 'Select an Action'}\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-12 bg-gradient-to-br from-gray-50 to-slate-100 dark:from-gray-900 dark:to-slate-900 rounded-xl\">\r\n                <div className=\"h-20 w-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 flex items-center justify-center\">\r\n                  <Camera className=\"h-10 w-10 text-indigo-500\" />\r\n                </div>\r\n                <p className=\"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Ready to Scan\r\n                </p>\r\n                <p className=\"text-muted-foreground\">\r\n                  Scan a student ID or book barcode to begin\r\n                </p>\r\n                {lastScanResult && (\r\n                  <p className=\"text-sm text-muted-foreground mt-3 bg-white dark:bg-slate-800 inline-block px-3 py-1 rounded-full\">\r\n                    Last scan: {lastScanResult}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Enhanced Quick Actions */}\r\n      <Card className=\"border-0 shadow-lg bg-gradient-to-br from-white to-indigo-50/30 dark:from-slate-800 dark:to-indigo-950/10\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Activity className=\"h-5 w-5 text-indigo-500\" />\r\n            Quick Actions\r\n          </CardTitle>\r\n          <CardDescription>Common tasks without scanning</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid gap-4 md:grid-cols-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-16 flex-col hover:bg-blue-50 hover:border-blue-300 transition-colors\"\r\n              onClick={() => {\r\n                // Navigate to student management or open dialog\r\n                // For now, just show a toast as we don't have navigation context here easily\r\n                toast.info(\r\n                  'Please go to Student Management tab to register new students'\r\n                );\r\n              }}\r\n            >\r\n              <UserPlus className=\"h-6 w-6 mb-2 text-blue-600\" />\r\n              <span className=\"text-sm\">Register Student</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-16 flex-col hover:bg-green-50 hover:border-green-300 transition-colors\"\r\n              onClick={() => setShowActiveSessions(!showActiveSessions)}\r\n            >\r\n              <Activity className=\"h-6 w-6 mb-2 text-green-600\" />\r\n              <span className=\"text-sm\">Active Sessions</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-16 flex-col hover:bg-purple-50 hover:border-purple-300 transition-colors\"\r\n              onClick={() => {\r\n                toast.info('Please go to Reports tab');\r\n              }}\r\n            >\r\n              <BarChart3 className=\"h-6 w-6 mb-2 text-purple-600\" />\r\n              <span className=\"text-sm\">Reports</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-16 flex-col hover:bg-orange-50 hover:border-orange-300 transition-colors\"\r\n              onClick={async () => {\r\n                try {\r\n                  await offlineActions.sync();\r\n                  toast.success('Offline data synced successfully');\r\n                } catch {\r\n                  toast.error('Failed to sync offline data');\r\n                }\r\n              }}\r\n            >\r\n              <RefreshCw className=\"h-6 w-6 mb-2 text-orange-600\" />\r\n              <span className=\"text-sm\">Sync Data</span>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ScanWorkspace;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\ScannerManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\SelfServiceMode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\StudentBarcodeDialog.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":1,"message":"'isOpen' is defined but never used. Allowed unused args must match /^_/u.","line":59,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOpen"},"fix":{"range":[1379,1394],"text":""},"desc":"Remove unused variable 'isOpen'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\StudentImportDialog.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unused-vars').","line":234,"column":3,"severity":1,"nodeType":null,"fix":{"range":[5757,5799],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { useQueryClient, useMutation } from '@tanstack/react-query';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { toast } from 'sonner';\r\nimport { studentsApi } from '@/lib/api';\r\nimport {\r\n  Upload,\r\n  FileText,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Download,\r\n  ArrowRight,\r\n  Settings,\r\n  File as FileIcon,\r\n  Users,\r\n  Loader2,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n  FileEdit,\r\n} from 'lucide-react';\r\nimport Papa from 'papaparse';\r\nimport * as XLSX from 'xlsx';\r\nimport { getErrorMessage } from '@/utils/errorHandling';\r\n\r\n// Types for import functionality\r\ninterface ImportedStudent {\r\n  rowNumber: number;\r\n  student_id?: string;\r\n  barcode?: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  grade_level: string;\r\n  section?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  parent_name?: string;\r\n  parent_phone?: string;\r\n  parent_email?: string;\r\n  address?: string;\r\n  emergency_contact?: string;\r\n  notes?: string;\r\n  gender?: string;\r\n  designation?: string;\r\n  errors: string[];\r\n  warnings: string[];\r\n  isValid: boolean;\r\n}\r\n\r\ninterface FieldMapping {\r\n  sourceField: string;\r\n  targetField: string;\r\n  label: string;\r\n  required: boolean;\r\n}\r\n\r\ninterface ImportPreview {\r\n  totalRows: number;\r\n  validRows: number;\r\n  invalidRows: number;\r\n  duplicateRows: number;\r\n  samples: ImportedStudent[];\r\n}\r\n\r\n// Available fields for mapping\r\nconst AVAILABLE_FIELDS: FieldMapping[] = [\r\n  {\r\n    sourceField: 'fullName',\r\n    targetField: 'full_name',\r\n    label: 'Full Name',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'firstName',\r\n    targetField: 'first_name',\r\n    label: 'First Name',\r\n    required: true,\r\n  },\r\n  {\r\n    sourceField: 'lastName',\r\n    targetField: 'last_name',\r\n    label: 'Last Name / Surname',\r\n    required: true,\r\n  },\r\n  {\r\n    sourceField: 'studentId',\r\n    targetField: 'student_id',\r\n    label: 'Student ID',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'barcode',\r\n    targetField: 'barcode',\r\n    label: 'Barcode',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'gradeLevel',\r\n    targetField: 'grade_level',\r\n    label: 'Grade Level',\r\n    required: true,\r\n  },\r\n  {\r\n    sourceField: 'section',\r\n    targetField: 'section',\r\n    label: 'Section',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'email',\r\n    targetField: 'email',\r\n    label: 'Email',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'phone',\r\n    targetField: 'phone',\r\n    label: 'Phone',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'parentName',\r\n    targetField: 'parent_name',\r\n    label: 'Parent Name',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'parentPhone',\r\n    targetField: 'parent_phone',\r\n    label: 'Parent Phone',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'parentEmail',\r\n    targetField: 'parent_email',\r\n    label: 'Parent Email',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'address',\r\n    targetField: 'address',\r\n    label: 'Address',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'emergencyContact',\r\n    targetField: 'emergency_contact',\r\n    label: 'Emergency Contact',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'notes',\r\n    targetField: 'notes',\r\n    label: 'Notes',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'gender',\r\n    targetField: 'gender',\r\n    label: 'Gender',\r\n    required: false,\r\n  },\r\n  {\r\n    sourceField: 'designation',\r\n    targetField: 'designation',\r\n    label: 'Designation',\r\n    required: false,\r\n  },\r\n];\r\n\r\n// Get common field name aliases\r\nconst getCommonAliases = (field: string): string[] => {\r\n  const aliases: Record<string, string[]> = {\r\n    fullName: ['name', 'full name', 'student name', 'fullname'],\r\n    firstName: ['first', 'first name', 'given name', 'forename', 'fname'],\r\n    lastName: [\r\n      'last',\r\n      'last name',\r\n      'surname',\r\n      'family name',\r\n      'lname',\r\n      'sur name',\r\n    ],\r\n    studentId: ['student id', 'id', 'user id', 'student_id', 'lrn', 'userid'],\r\n    // User ID should also be treated as barcode if no separate barcode column\r\n    barcode: [\r\n      'barcode',\r\n      'card number',\r\n      'library card',\r\n      'barcode no',\r\n      'barcode no.',\r\n      'user id',\r\n      'userid',\r\n    ],\r\n    gradeLevel: ['grade', 'year', 'level', 'grade level', 'class'],\r\n    section: ['section', 'block', 'group'],\r\n    email: ['email', 'e-mail', 'email address'],\r\n    phone: ['phone', 'telephone', 'mobile', 'contact', 'phone number'],\r\n    parentName: ['parent name', 'parent', 'guardian', 'parent/guardian'],\r\n    parentPhone: ['parent phone', 'parent mobile', 'parent contact'],\r\n    parentEmail: ['parent email', 'parent e-mail'],\r\n    address: ['address', 'home address', 'residence'],\r\n    emergencyContact: ['emergency contact', 'emergency phone'],\r\n    notes: ['notes', 'remarks', 'comments', 'observations'],\r\n    gender: ['sex', 'gender', 'male/female'],\r\n    designation: ['designation', 'role', 'type'],\r\n  };\r\n\r\n  return aliases[field] || [];\r\n};\r\n\r\ninterface StudentImportDialogProps {\r\n  open: boolean;\r\n  // eslint-disable-next-line no-unused-vars\r\n  onOpenChange: (_open: boolean) => void;\r\n}\r\n\r\nexport function StudentImportDialog({\r\n  open,\r\n  onOpenChange,\r\n}: StudentImportDialogProps) {\r\n  const queryClient = useQueryClient();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const fixFileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // State management\r\n  const [currentStep, setCurrentStep] = useState<\r\n    'upload' | 'mapping' | 'preview' | 'importing' | 'complete'\r\n  >('upload');\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [rawData, setRawData] = useState<any[]>([]);\r\n  const [headers, setHeaders] = useState<string[]>([]);\r\n  const [fieldMapping, setFieldMapping] = useState<Record<string, string>>({});\r\n  const [importedStudents, setImportedStudents] = useState<ImportedStudent[]>(\r\n    []\r\n  );\r\n  const [importPreview, setImportPreview] = useState<ImportPreview | null>(\r\n    null\r\n  );\r\n\r\n  const [importResults, setImportResults] = useState<{\r\n    success: number;\r\n    failed: number;\r\n    importedStudents: number;\r\n    importedPersonnel: number;\r\n    errors: string[];\r\n  }>({\r\n    success: 0,\r\n    failed: 0,\r\n    importedStudents: 0,\r\n    importedPersonnel: 0,\r\n    errors: [],\r\n  });\r\n  const [generatedBarcodes, setGeneratedBarcodes] = useState<\r\n    Array<{ row: number; barcode: string }>\r\n  >([]);\r\n  const [skipHeaderRow, setSkipHeaderRow] = useState(true);\r\n  const [isProcessingPreview, setIsProcessingPreview] = useState(false);\r\n  // Reset state when dialog closes\r\n  const handleClose = () => {\r\n    setCurrentStep('upload');\r\n    setSelectedFile(null);\r\n    setRawData([]);\r\n    setHeaders([]);\r\n    setFieldMapping({});\r\n    setImportedStudents([]);\r\n    setImportPreview(null);\r\n    setIsProcessingPreview(false);\r\n\r\n    setImportResults({\r\n      success: 0,\r\n      failed: 0,\r\n      importedStudents: 0,\r\n      importedPersonnel: 0,\r\n      errors: [],\r\n    });\r\n    setSkipHeaderRow(true);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n    onOpenChange(false);\r\n  };\r\n\r\n  // Handle file selection\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      const validTypes = [\r\n        'text/csv',\r\n        'application/vnd.ms-excel',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        'text/plain',\r\n      ];\r\n\r\n      if (!validTypes.includes(file.type)) {\r\n        toast.error('Invalid file type. Please select a CSV or Excel file.');\r\n        return;\r\n      }\r\n\r\n      if (file.size > 10 * 1024 * 1024) {\r\n        // 10MB limit\r\n        toast.error(\r\n          'File size too large. Please select a file smaller than 10MB.'\r\n        );\r\n        return;\r\n      }\r\n\r\n      setSelectedFile(file);\r\n      parseFile(file);\r\n    }\r\n  };\r\n\r\n  // Parse file based on type\r\n  const parseFile = async (file: File) => {\r\n    try {\r\n      if (file.type === 'text/csv' || file.name.endsWith('.csv')) {\r\n        await parseCSV(file);\r\n      } else {\r\n        await parseExcel(file);\r\n      }\r\n    } catch {\r\n      toast.error('Failed to parse file. Please check the file format.');\r\n    }\r\n  };\r\n\r\n  // Parse CSV file\r\n  const parseCSV = (file: File): Promise<void> => {\r\n    return new Promise((resolve, reject) => {\r\n      Papa.parse(file, {\r\n        complete: (result) => {\r\n          if (result.errors.length > 0) {\r\n            reject(new Error(result.errors[0]?.message || 'Parse error'));\r\n            return;\r\n          }\r\n\r\n          const data = result.data as Record<string, unknown>[];\r\n          if (data.length === 0) {\r\n            reject(new Error('File is empty'));\r\n            return;\r\n          }\r\n\r\n          const headers = Object.keys(data[0] || {});\r\n          setHeaders(headers);\r\n          setRawData(data);\r\n          setCurrentStep('mapping');\r\n          resolve();\r\n        },\r\n        error: (error) => {\r\n          reject(error);\r\n        },\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        transformHeader: (header) => header.replace(/^\\uFEFF/, '').trim(),\r\n      });\r\n    });\r\n  };\r\n\r\n  // Parse Excel file\r\n  const parseExcel = async (file: File): Promise<void> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        try {\r\n          const data = new Uint8Array(e.target?.result as ArrayBuffer);\r\n          const workbook = XLSX.read(data, { type: 'array' });\r\n\r\n          if (!workbook.SheetNames || workbook.SheetNames.length === 0) {\r\n            reject(new Error('No sheets found in the file'));\r\n            return;\r\n          }\r\n\r\n          const sheetName = workbook.SheetNames[0];\r\n          if (!sheetName) {\r\n            reject(new Error('No sheets found in workbook'));\r\n            return;\r\n          }\r\n\r\n          const worksheet = workbook.Sheets[sheetName];\r\n\r\n          if (!worksheet) {\r\n            reject(new Error('Could not access worksheet'));\r\n            return;\r\n          }\r\n\r\n          const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\r\n\r\n          if (jsonData.length === 0) {\r\n            reject(new Error('File is empty'));\r\n            return;\r\n          }\r\n\r\n          const headers = (jsonData[0] as string[]).map((h) =>\r\n            String(h).trim()\r\n          );\r\n          const processedData = jsonData.slice(1).map((row: unknown) => {\r\n            const rowArray = row as unknown[];\r\n            const obj: Record<string, unknown> = {};\r\n            headers.forEach((header, index) => {\r\n              if (header) {\r\n                obj[header] = rowArray[index];\r\n              }\r\n            });\r\n            return obj;\r\n          });\r\n\r\n          setHeaders(headers);\r\n          setRawData(processedData);\r\n          setCurrentStep('mapping');\r\n          resolve();\r\n        } catch (error) {\r\n          reject(error);\r\n        }\r\n      };\r\n      reader.onerror = () => reject(new Error('Failed to read file'));\r\n      reader.readAsArrayBuffer(file);\r\n    });\r\n  };\r\n\r\n  // Auto-map fields\r\n  const autoMapFields = useCallback(() => {\r\n    const mapping: Record<string, string> = {};\r\n    console.info('Auto-mapping fields. Headers:', headers);\r\n\r\n    headers.forEach((header) => {\r\n      const normalizedHeader = header.toLowerCase().trim();\r\n\r\n      // Try to find matching field\r\n      const matchedField = AVAILABLE_FIELDS.find((field) => {\r\n        const fieldNames = [\r\n          field.targetField.toLowerCase(),\r\n          field.targetField\r\n            .replace(/([A-Z])/g, ' $1')\r\n            .toLowerCase()\r\n            .trim(),\r\n          ...getCommonAliases(field.sourceField),\r\n        ];\r\n\r\n        const isMatch = fieldNames.some(\r\n          (name) =>\r\n            normalizedHeader === name ||\r\n            normalizedHeader.includes(name) ||\r\n            name.includes(normalizedHeader)\r\n        );\r\n\r\n        if (isMatch) {\r\n          console.info(\r\n            `Matched header \"${header}\" to field \"${field.targetField}\"`\r\n          );\r\n        }\r\n\r\n        return isMatch;\r\n      });\r\n\r\n      if (matchedField) {\r\n        mapping[header] = matchedField.targetField;\r\n      }\r\n    });\r\n\r\n    console.info('Final mapping:', mapping);\r\n    setFieldMapping(mapping);\r\n  }, [headers]);\r\n\r\n  // Preview import mutation\r\n  const previewImportMutation = useMutation({\r\n    mutationFn: async (data: {\r\n      file: File;\r\n      fieldMappings: FieldMapping[];\r\n      skipHeaderRow: boolean;\r\n    }) => {\r\n      try {\r\n        const result = await studentsApi.previewImport(\r\n          data.file,\r\n          'students',\r\n          1000,\r\n          data.fieldMappings,\r\n          data.skipHeaderRow\r\n        );\r\n        return result.data;\r\n      } catch (error: unknown) {\r\n        const message = getErrorMessage(error, 'Preview failed');\r\n        throw new Error(message);\r\n      }\r\n    },\r\n    onSuccess: (result: {\r\n      records: Array<Partial<ImportedStudent>>;\r\n      duplicateRecords?: number;\r\n    }) => {\r\n      if (result.records && Array.isArray(result.records)) {\r\n        const processed: ImportedStudent[] = result.records.map(\r\n          (record, index: number) => ({\r\n            rowNumber: index + 1,\r\n            student_id: record.student_id || '',\r\n            barcode: record.barcode || '',\r\n            first_name: record.first_name || '',\r\n            last_name: record.last_name || '',\r\n            grade_level: record.grade_level || '',\r\n            section: record.section || '',\r\n            email: record.email || '',\r\n            phone: record.phone || '',\r\n            parent_name: record.parent_name || '',\r\n            parent_phone: record.parent_phone || '',\r\n            parent_email: record.parent_email || '',\r\n            address: record.address || '',\r\n            emergency_contact: record.emergency_contact || '',\r\n            notes: record.notes || '',\r\n            gender: record.gender || '',\r\n            designation: record.designation || '',\r\n            errors: record.errors || [],\r\n            warnings: record.warnings || [],\r\n            isValid:\r\n              !record.errors ||\r\n              (Array.isArray(record.errors) && record.errors.length === 0),\r\n          })\r\n        );\r\n\r\n        setImportedStudents(processed);\r\n        setImportPreview({\r\n          totalRows: (result as any).totalRows || processed.length,\r\n          validRows:\r\n            (result as any).validRows ??\r\n            processed.filter((s) => s.isValid).length,\r\n          invalidRows:\r\n            (result as any).invalidRows ??\r\n            processed.length - processed.filter((s) => s.isValid).length,\r\n          duplicateRows: result.duplicateRecords || 0,\r\n          samples: processed, // Store ALL records\r\n        });\r\n        setCurrentStep('preview');\r\n        setCurrentPage(1); // Reset to first page\r\n        setIsProcessingPreview(false);\r\n      }\r\n    },\r\n    onError: (error: unknown) => {\r\n      toast.error(getErrorMessage(error, 'Preview failed'));\r\n      setIsProcessingPreview(false);\r\n    },\r\n  });\r\n\r\n  // Import students mutation\r\n  const importStudentsMutation = useMutation({\r\n    mutationFn: async (data: { file: File; fieldMappings: FieldMapping[] }) => {\r\n      try {\r\n        const result = await studentsApi.importStudents(\r\n          data.file,\r\n          data.fieldMappings,\r\n          false\r\n        );\r\n        return result.data;\r\n      } catch (error: unknown) {\r\n        const message = getErrorMessage(error, 'Import failed');\r\n        throw new Error(message);\r\n      }\r\n    },\r\n    onSuccess: (result: {\r\n      importedRecords?: number;\r\n      importedStudents?: number;\r\n      importedPersonnel?: number;\r\n      errorRecords?: number;\r\n      errors?: string[];\r\n      generated?: Array<{ row: number; barcode: string }>;\r\n    }) => {\r\n      setImportResults({\r\n        success: result.importedRecords || 0,\r\n        failed: result.errorRecords || 0,\r\n        importedStudents: result.importedStudents || 0,\r\n        importedPersonnel: result.importedPersonnel || 0,\r\n        errors: result.errors || [],\r\n      });\r\n      setGeneratedBarcodes(\r\n        Array.isArray(result.generated) ? result.generated : []\r\n      );\r\n      setCurrentStep('complete');\r\n      queryClient.invalidateQueries({ queryKey: ['students'] });\r\n\r\n      if (result.importedRecords > 0) {\r\n        const duplicateNote =\r\n          importPreview && importPreview.duplicateRows > 0\r\n            ? ` (${importPreview.duplicateRows} duplicates updated)`\r\n            : '';\r\n        const breakdown =\r\n          result.importedStudents && result.importedPersonnel\r\n            ? ` (${result.importedStudents} students, ${result.importedPersonnel} personnel)`\r\n            : '';\r\n        toast.success(\r\n          `Successfully imported ${result.importedRecords} records${duplicateNote}${breakdown}`\r\n        );\r\n      }\r\n\r\n      if (result.errorRecords > 0) {\r\n        toast.error(`Failed to import ${result.errorRecords} records`);\r\n      }\r\n    },\r\n    onError: (error: unknown) => {\r\n      toast.error(getErrorMessage(error, 'Import failed'));\r\n      setCurrentStep('preview');\r\n    },\r\n  });\r\n\r\n  // Fix names mutation - updates last_name from CSV for existing records\r\n  const fixNamesMutation = useMutation({\r\n    mutationFn: async (file: File) => {\r\n      const result = await studentsApi.fixStudentNames(file);\r\n      return result.data;\r\n    },\r\n    onSuccess: (result: {\r\n      updated?: number;\r\n      notFound?: number;\r\n      errors?: string[];\r\n    }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['students'] });\r\n      toast.success(\r\n        `Fixed ${result.updated || 0} student names. ${result.notFound || 0} not found.`\r\n      );\r\n      if (result.errors && result.errors.length > 0) {\r\n        toast.warning(`${result.errors.length} errors occurred during fix`);\r\n      }\r\n    },\r\n    onError: (error: unknown) => {\r\n      toast.error(getErrorMessage(error, 'Fix names failed'));\r\n    },\r\n  });\r\n\r\n  // Handle fix file selection\r\n  const handleFixFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      fixNamesMutation.mutate(file);\r\n    }\r\n    // Reset the input so the same file can be selected again\r\n    event.target.value = '';\r\n  };\r\n\r\n  // Process imported data using backend preview\r\n  const processImportedData = useCallback(() => {\r\n    if (!selectedFile) {\r\n      toast.error('No file selected');\r\n      return;\r\n    }\r\n\r\n    // Convert field mapping to backend format\r\n    const mappings = Object.entries(fieldMapping)\r\n      .filter(([, targetField]) => targetField && targetField !== '__ignore__')\r\n      .map(([sourceField, targetField]) => ({\r\n        sourceField,\r\n        targetField,\r\n        label:\r\n          AVAILABLE_FIELDS.find((f) => f.targetField === targetField)?.label ||\r\n          targetField,\r\n        required:\r\n          AVAILABLE_FIELDS.find((f) => f.targetField === targetField)\r\n            ?.required || false,\r\n      }));\r\n\r\n    // Don't change step to 'importing' during preview processing\r\n    // The 'importing' step should only be shown when actually importing students\r\n    // Stay on 'mapping' with a loading state until preview is ready\r\n    setIsProcessingPreview(true);\r\n    previewImportMutation.mutate({\r\n      file: selectedFile,\r\n      fieldMappings: mappings,\r\n      skipHeaderRow,\r\n    });\r\n  }, [selectedFile, fieldMapping, previewImportMutation, skipHeaderRow]);\r\n\r\n  // Start import\r\n  const handleImport = () => {\r\n    if (!selectedFile) {\r\n      toast.error('No file selected');\r\n      return;\r\n    }\r\n\r\n    const validStudents = importedStudents.filter((s) => s.isValid);\r\n    if (validStudents.length === 0) {\r\n      toast.error('No valid students to import');\r\n      return;\r\n    }\r\n\r\n    // Convert field mapping to backend format\r\n    const mappings = Object.entries(fieldMapping)\r\n      .filter(([, targetField]) => targetField && targetField !== '__ignore__')\r\n      .map(([sourceField, targetField]) => ({\r\n        sourceField,\r\n        targetField,\r\n        label:\r\n          AVAILABLE_FIELDS.find((f) => f.targetField === targetField)?.label ||\r\n          targetField,\r\n        required:\r\n          AVAILABLE_FIELDS.find((f) => f.targetField === targetField)\r\n            ?.required || false,\r\n      }));\r\n\r\n    console.info('[Import Debug] Sending Mappings:', mappings);\r\n    console.info(\r\n      '[Import Debug] Sending File:',\r\n      selectedFile.name,\r\n      selectedFile.size\r\n    );\r\n\r\n    setCurrentStep('importing');\r\n    importStudentsMutation.mutate({\r\n      file: selectedFile,\r\n      fieldMappings: mappings,\r\n    });\r\n  };\r\n\r\n  // Download template\r\n  const downloadTemplate = async () => {\r\n    try {\r\n      const response = await studentsApi.downloadTemplate();\r\n      const blob = new Blob([response.data as string], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'student-import-template.csv';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n      toast.success('Template downloaded successfully');\r\n    } catch {\r\n      // Fallback to local template generation\r\n      const template = [\r\n        {\r\n          'First Name': 'Juan',\r\n          'Last Name': 'Dela Cruz',\r\n          'Grade Level': 'Grade 5',\r\n          Section: 'A',\r\n          Email: 'juan.delacruz@email.com',\r\n          Phone: '+63 912 345 6789',\r\n          'Parent Name': 'Maria Dela Cruz',\r\n          'Parent Phone': '+63 912 345 6788',\r\n          'Parent Email': 'maria.parent@email.com',\r\n          Address: '123 Main St, City',\r\n          'Emergency Contact': '+63 912 345 6787',\r\n          Notes: 'Regular visitor, prefers computer sessions',\r\n        },\r\n      ];\r\n\r\n      const ws = XLSX.utils.json_to_sheet(template);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Students');\r\n      XLSX.writeFile(wb, 'student-import-template.xlsx');\r\n    }\r\n  };\r\n\r\n  // Initialize field mapping when headers are available\r\n  useEffect(() => {\r\n    if (headers.length > 0 && Object.keys(fieldMapping).length === 0) {\r\n      autoMapFields();\r\n    }\r\n  }, [headers, fieldMapping, autoMapFields]);\r\n\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 50;\r\n\r\n  // Calculate paginated samples\r\n  const paginatedSamples = importPreview\r\n    ? importPreview.samples.slice(\r\n        (currentPage - 1) * itemsPerPage,\r\n        currentPage * itemsPerPage\r\n      )\r\n    : [];\r\n\r\n  const totalPages = importPreview\r\n    ? Math.ceil(importPreview.samples.length / itemsPerPage)\r\n    : 0;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"max-w-4xl h-[85vh] flex flex-col p-0 gap-0\">\r\n        <div className=\"p-6 pb-2\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Users className=\"h-5 w-5\" />\r\n              Import Students\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Import student data from CSV or Excel files\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col flex-1 min-h-0\">\r\n          {/* Progress indicator */}\r\n          <div className=\"px-6 pb-6 pt-2\">\r\n            <div className=\"relative flex items-center justify-between w-full max-w-3xl mx-auto\">\r\n              {/* Connecting Line */}\r\n              <div className=\"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-muted -z-10 rounded-full\" />\r\n              <div\r\n                className=\"absolute left-0 top-1/2 transform -translate-y-1/2 h-1 bg-primary transition-all duration-500 ease-in-out -z-10 rounded-full\"\r\n                style={{\r\n                  width: `${\r\n                    ([\r\n                      'upload',\r\n                      'mapping',\r\n                      'preview',\r\n                      'importing',\r\n                      'complete',\r\n                    ].indexOf(currentStep) /\r\n                      4) *\r\n                    100\r\n                  }%`,\r\n                }}\r\n              />\r\n\r\n              {[\r\n                { id: 'upload', label: 'Upload' },\r\n                { id: 'mapping', label: 'Map Fields' },\r\n                { id: 'preview', label: 'Preview' },\r\n                { id: 'importing', label: 'Import' },\r\n                { id: 'complete', label: 'Done' },\r\n              ].map((step, index) => {\r\n                const steps = [\r\n                  'upload',\r\n                  'mapping',\r\n                  'preview',\r\n                  'importing',\r\n                  'complete',\r\n                ];\r\n                const currentIndex = steps.indexOf(currentStep);\r\n                const isCompleted = currentIndex > index;\r\n                const isCurrent = currentStep === step.id;\r\n\r\n                return (\r\n                  <div\r\n                    key={step.id}\r\n                    className=\"flex flex-col items-center gap-2 bg-background px-2 z-10\"\r\n                  >\r\n                    <div\r\n                      className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all duration-300 ${\r\n                        isCompleted\r\n                          ? 'bg-primary border-primary text-primary-foreground scale-105'\r\n                          : isCurrent\r\n                            ? 'bg-background border-primary text-primary scale-110 shadow-lg ring-4 ring-primary/10'\r\n                            : 'bg-muted border-muted-foreground/30 text-muted-foreground'\r\n                      }`}\r\n                    >\r\n                      {isCompleted ? (\r\n                        <CheckCircle className=\"h-5 w-5\" />\r\n                      ) : (\r\n                        index + 1\r\n                      )}\r\n                    </div>\r\n                    <span\r\n                      className={`text-xs font-semibold uppercase tracking-wider transition-colors duration-300 ${\r\n                        isCurrent ? 'text-primary' : 'text-muted-foreground'\r\n                      }`}\r\n                    >\r\n                      {step.label}\r\n                    </span>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <ScrollArea className=\"flex-1\">\r\n            {/* Step 1: File Upload */}\r\n            {currentStep === 'upload' && (\r\n              <div className=\"space-y-6 p-6\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 hover:border-primary/50 transition-colors\">\r\n                    <Upload className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\r\n                    <h3 className=\"text-lg font-semibold mb-2\">\r\n                      Select CSV or Excel File\r\n                    </h3>\r\n                    <p className=\"text-muted-foreground mb-4\">\r\n                      Choose a file containing student data to import\r\n                    </p>\r\n                    <input\r\n                      ref={fileInputRef}\r\n                      type=\"file\"\r\n                      accept=\".csv,.xlsx,.xls,.txt\"\r\n                      onChange={handleFileSelect}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button onClick={() => fileInputRef.current?.click()}>\r\n                      <FileIcon className=\"h-4 w-4 mr-2\" />\r\n                      Choose File\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                {selectedFile && (\r\n                  <Alert>\r\n                    <FileText className=\"h-4 w-4\" />\r\n                    <AlertDescription>\r\n                      Selected: {selectedFile.name} (\r\n                      {(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\r\n                    </AlertDescription>\r\n                  </Alert>\r\n                )}\r\n\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-sm\">File Requirements</CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"text-sm space-y-2\">\r\n                    <p> File format: CSV (.csv) or Excel (.xlsx, .xls)</p>\r\n                    <p> Maximum file size: 10MB</p>\r\n                    <p>\r\n                       Required columns: First Name, Last Name, Grade Level\r\n                    </p>\r\n                    <p>\r\n                       Optional columns: Section, Email, Phone, Parent Name,\r\n                      Parent Phone, Parent Email, Address, Emergency Contact,\r\n                      Notes\r\n                    </p>\r\n                    <p>\r\n                       Barcode: If missing, the system generates a unique\r\n                      PN-prefixed barcode (e.g., PN00018). Scanners can read\r\n                      both numeric-only and PN-prefixed codes.\r\n                    </p>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <div className=\"flex justify-center\">\r\n                  <Button variant=\"outline\" onClick={downloadTemplate}>\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Download Template\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Fix Names Section */}\r\n                <Card className=\"border-amber-200 bg-amber-50 dark:border-amber-800 dark:bg-amber-950/20\">\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-sm flex items-center gap-2\">\r\n                      <AlertCircle className=\"h-4 w-4 text-amber-600\" />\r\n                      Fix Existing Names\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"text-sm space-y-2\">\r\n                    <p className=\"text-muted-foreground\">\r\n                      If student names appear duplicated (e.g., \"REENA REENA\"\r\n                      instead of \"REENA DELA CRUZ\"), upload the original CSV\r\n                      file to fix the last names.\r\n                    </p>\r\n                    <input\r\n                      ref={fixFileInputRef}\r\n                      type=\"file\"\r\n                      accept=\".csv,.xlsx,.xls\"\r\n                      onChange={handleFixFileSelect}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => fixFileInputRef.current?.click()}\r\n                      disabled={fixNamesMutation.isPending}\r\n                    >\r\n                      {fixNamesMutation.isPending ? (\r\n                        <>\r\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                          Fixing Names...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <FileEdit className=\"h-4 w-4 mr-2\" />\r\n                          Fix Names from CSV\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 2: Field Mapping */}\r\n            {currentStep === 'mapping' && (\r\n              <div className=\"space-y-6 p-6 relative\">\r\n                {isProcessingPreview && (\r\n                  <div className=\"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-10 rounded-lg\">\r\n                    <div className=\"flex flex-col items-center gap-3\">\r\n                      <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                      <p className=\"text-sm font-medium\">\r\n                        Processing your data...\r\n                      </p>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        This may take a moment\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"text-lg font-semibold\">Map Fields</h3>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={autoMapFields}\r\n                    disabled={isProcessingPreview}\r\n                  >\r\n                    <Settings className=\"h-4 w-4 mr-2\" />\r\n                    Auto Map\r\n                  </Button>\r\n                </div>\r\n\r\n                <div className=\"grid gap-4\">\r\n                  {headers.map((header) => (\r\n                    <div\r\n                      key={header}\r\n                      className=\"flex items-center gap-4 p-3 border rounded-lg\"\r\n                    >\r\n                      <div className=\"flex-1\">\r\n                        <Label className=\"text-sm font-medium\">{header}</Label>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {rawData\r\n                            .slice(0, 3)\r\n                            .map((row) => row[header] || '(empty)')\r\n                            .join(', ')}\r\n                        </p>\r\n                      </div>\r\n                      <ArrowRight className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <Select\r\n                        value={fieldMapping[header] || ''}\r\n                        onValueChange={(value) =>\r\n                          setFieldMapping((prev) => ({\r\n                            ...prev,\r\n                            [header]: value,\r\n                          }))\r\n                        }\r\n                      >\r\n                        <SelectTrigger className=\"w-48\">\r\n                          <SelectValue placeholder=\"Select field\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"__ignore__\">\r\n                            Ignore field\r\n                          </SelectItem>\r\n                          {AVAILABLE_FIELDS.map((field) => (\r\n                            <SelectItem\r\n                              key={field.targetField}\r\n                              value={field.targetField}\r\n                            >\r\n                              {field.label}{' '}\r\n                              {field.required && (\r\n                                <span className=\"text-red-500\">*</span>\r\n                              )}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: Preview */}\r\n            {currentStep === 'preview' && importPreview && (\r\n              <div className=\"space-y-6 p-6\">\r\n                <div className=\"grid gap-4 md:grid-cols-4\">\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-blue-600\">\r\n                        {importPreview.totalRows}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Total Rows\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-green-600\">\r\n                        {importPreview.validRows}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Valid Rows\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-red-600\">\r\n                        {importPreview.invalidRows}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Invalid Rows\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-orange-600\">\r\n                        {importPreview.duplicateRows}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Duplicates\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"font-semibold mb-3\">Sample Data</h4>\r\n                  <div className=\"border rounded-lg overflow-hidden\">\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"w-full text-sm\">\r\n                        <thead className=\"bg-muted/50\">\r\n                          <tr>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Row\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Student ID\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Name\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Barcode\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Grade\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Section\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Email\r\n                            </th>\r\n                            <th className=\"px-4 py-3 text-left font-medium\">\r\n                              Status\r\n                            </th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {paginatedSamples.map((student, index) => (\r\n                            <tr\r\n                              key={index}\r\n                              className=\"border-t hover:bg-muted/50 transition-colors even:bg-muted/30\"\r\n                            >\r\n                              <td className=\"px-4 py-3\">{student.rowNumber}</td>\r\n                              <td className=\"px-4 py-3 text-muted-foreground\">\r\n                                {student.student_id || (\r\n                                  <Badge\r\n                                    variant=\"secondary\"\r\n                                    className=\"text-xs font-normal bg-blue-50 text-blue-700 hover:bg-blue-100 border-blue-200\"\r\n                                  >\r\n                                    Will be generated\r\n                                  </Badge>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"px-4 py-3\">\r\n                                {student.first_name} {student.last_name}\r\n                              </td>\r\n                              <td className=\"px-4 py-3 text-muted-foreground\">\r\n                                {student.barcode || (\r\n                                  <Badge\r\n                                    variant=\"secondary\"\r\n                                    className=\"text-xs font-normal bg-purple-50 text-purple-700 hover:bg-purple-100 border-purple-200\"\r\n                                  >\r\n                                    Will be generated\r\n                                  </Badge>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"px-4 py-3\">\r\n                                {student.grade_level}\r\n                              </td>\r\n                              <td className=\"px-4 py-3\">{student.section}</td>\r\n                              <td className=\"px-4 py-3\">\r\n                                {student.email || '-'}\r\n                              </td>\r\n                              <td className=\"px-4 py-3\">\r\n                                {student.isValid ? (\r\n                                  <Badge\r\n                                    variant=\"outline\"\r\n                                    className=\"bg-green-50 text-green-700 border-green-200\"\r\n                                  >\r\n                                    Valid\r\n                                  </Badge>\r\n                                ) : (\r\n                                  <Badge\r\n                                    variant=\"destructive\"\r\n                                    className=\"hover:bg-destructive/90\"\r\n                                  >\r\n                                    Invalid\r\n                                  </Badge>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Pagination Controls */}\r\n                  <div className=\"flex items-center justify-between mt-4\">\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Showing {(currentPage - 1) * itemsPerPage + 1} to{' '}\r\n                      {Math.min(\r\n                        currentPage * itemsPerPage,\r\n                        importPreview.samples.length\r\n                      )}{' '}\r\n                      of {importPreview.samples.length} entries\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() =>\r\n                          setCurrentPage((p) => Math.max(1, p - 1))\r\n                        }\r\n                        disabled={currentPage === 1}\r\n                      >\r\n                        Previous\r\n                      </Button>\r\n                      <div className=\"flex items-center px-2 text-sm font-medium\">\r\n                        Page {currentPage} of {totalPages}\r\n                      </div>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() =>\r\n                          setCurrentPage((p) => Math.min(totalPages, p + 1))\r\n                        }\r\n                        disabled={currentPage === totalPages}\r\n                      >\r\n                        Next\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {importPreview.invalidRows > 0 && (\r\n                  <Alert>\r\n                    <AlertTriangle className=\"h-4 w-4\" />\r\n                    <AlertDescription>\r\n                      {importPreview.invalidRows} rows have validation errors\r\n                      and will be skipped during import. Please review your data\r\n                      and field mapping.\r\n                    </AlertDescription>\r\n                  </Alert>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 4: Importing */}\r\n            {currentStep === 'importing' && (\r\n              <div className=\"space-y-6 p-6 text-center\">\r\n                <Loader2 className=\"h-12 w-12 mx-auto animate-spin text-primary\" />\r\n                <h3 className=\"text-lg font-semibold\">Importing Students</h3>\r\n                <p className=\"text-muted-foreground\">\r\n                  {importedStudents.filter((s) => s.isValid).length > 0\r\n                    ? `Processing ${importedStudents.filter((s) => s.isValid).length} students. This may take a few minutes for large imports...`\r\n                    : 'Processing your file. This may take a moment...'}\r\n                </p>\r\n                <div className=\"max-w-md mx-auto space-y-2\">\r\n                  {/* Indeterminate progress bar since we don't have real-time progress from backend yet */}\r\n                  <Progress\r\n                    value={undefined}\r\n                    className=\"w-full animate-pulse\"\r\n                  />\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Please keep this window open. Large imports may take up to 5\r\n                    minutes.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 5: Complete */}\r\n            {currentStep === 'complete' && (\r\n              <div className=\"space-y-6 p-6\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                    <CheckCircle2 className=\"h-8 w-8 text-green-600\" />\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold mb-2\">\r\n                    Import Complete\r\n                  </h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Student import process has been completed\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-green-600\">\r\n                        {importResults.success}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Total Imported\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-blue-600\">\r\n                        {importResults.importedStudents}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">Students</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-purple-600\">\r\n                        {importResults.importedPersonnel}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">Personnel</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                  <Card>\r\n                    <CardContent className=\"p-4 text-center\">\r\n                      <div className=\"text-2xl font-bold text-red-600\">\r\n                        {importResults.failed}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">Failed</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {importResults.errors.length > 0 && (\r\n                  <Alert>\r\n                    <AlertCircle className=\"h-4 w-4\" />\r\n                    <AlertDescription>\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"font-medium\">Import Errors:</p>\r\n                        {importResults.errors\r\n                          .slice(0, 5)\r\n                          .map((error, index) => (\r\n                            <p key={index} className=\"text-sm text-red-600\">\r\n                              {typeof error === 'string'\r\n                                ? error\r\n                                : String(error)}\r\n                            </p>\r\n                          ))}\r\n                        {importResults.errors.length > 5 && (\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            ... and {importResults.errors.length - 5} more\r\n                            errors\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </AlertDescription>\r\n                  </Alert>\r\n                )}\r\n              </div>\r\n            )}\r\n          </ScrollArea>\r\n        </div>\r\n\r\n        <div className=\"p-6 border-t bg-background mt-auto\">\r\n          {currentStep === 'upload' && (\r\n            <div className=\"flex justify-end\">\r\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {currentStep === 'mapping' && (\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Checkbox\r\n                  id=\"skipHeader\"\r\n                  checked={skipHeaderRow}\r\n                  onCheckedChange={(checked) =>\r\n                    setSkipHeaderRow(checked as boolean)\r\n                  }\r\n                />\r\n                <Label htmlFor=\"skipHeader\">Skip first row (header)</Label>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setCurrentStep('upload')}\r\n                  disabled={isProcessingPreview}\r\n                >\r\n                  Back\r\n                </Button>\r\n                <Button\r\n                  onClick={processImportedData}\r\n                  disabled={\r\n                    Object.values(fieldMapping).filter(Boolean).length === 0 ||\r\n                    isProcessingPreview\r\n                  }\r\n                >\r\n                  {isProcessingPreview ? (\r\n                    <>\r\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    'Continue to Preview'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {currentStep === 'preview' && importPreview && (\r\n            <div className=\"flex justify-between w-full items-center\">\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                {importPreview.validRows} valid students ready to import\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setCurrentStep('mapping')}\r\n                >\r\n                  Back\r\n                </Button>\r\n                <Button\r\n                  onClick={handleImport}\r\n                  disabled={importPreview.validRows === 0}\r\n                >\r\n                  Import {importPreview.validRows} Students\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {currentStep === 'complete' && (\r\n            <div className=\"flex justify-between w-full items-center\">\r\n              <div>\r\n                {generatedBarcodes.length > 0 && (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => {\r\n                      const headers = ['row', 'barcode'];\r\n                      const csv = [headers.join(',')]\r\n                        .concat(\r\n                          generatedBarcodes.map((g) => `${g.row},${g.barcode}`)\r\n                        )\r\n                        .join('\\n');\r\n                      const blob = new Blob([csv], { type: 'text/csv' });\r\n                      const url = window.URL.createObjectURL(blob);\r\n                      const a = document.createElement('a');\r\n                      a.href = url;\r\n                      a.download = 'generated-barcodes.csv';\r\n                      document.body.appendChild(a);\r\n                      a.click();\r\n                      document.body.removeChild(a);\r\n                      window.URL.revokeObjectURL(url);\r\n                    }}\r\n                  >\r\n                    Download Generated Barcodes\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              <Button onClick={handleClose}>Done</Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default StudentImportDialog;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\StudentManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\StudentPhotoUpload.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unused-vars').","line":40,"column":3,"severity":1,"nodeType":null,"fix":{"range":[854,896],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState, useRef } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n  useMobileOptimization,\r\n  getOptimalImageSize,\r\n} from '@/hooks/useMobileOptimization';\r\nimport { toast } from 'sonner';\r\nimport {\r\n  Upload,\r\n  Camera,\r\n  X,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  RefreshCw,\r\n  Trash2,\r\n  ZoomIn,\r\n  Image as ImageIcon,\r\n} from 'lucide-react';\r\n\r\ninterface StudentPhotoUploadProps {\r\n  studentId: string;\r\n  studentName: string;\r\n  currentPhotoUrl?: string;\r\n  // eslint-disable-next-line no-unused-vars\r\n  onUploadComplete?: (_photoUrl: string) => void;\r\n}\r\n\r\nexport function StudentPhotoUpload({\r\n  studentId,\r\n  studentName,\r\n  currentPhotoUrl,\r\n  onUploadComplete,\r\n}: StudentPhotoUploadProps) {\r\n  const mobileState = useMobileOptimization();\r\n  const { isMobile } = mobileState;\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [preview, setPreview] = useState<string | null>(\r\n    currentPhotoUrl || null\r\n  );\r\n  const [showCamera, setShowCamera] = useState(false);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [stream, setStream] = useState<MediaStream | null>(null);\r\n\r\n  // Maximum file size: 5MB\r\n  const MAX_FILE_SIZE = 5 * 1024 * 1024;\r\n  const ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/webp'];\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) {\r\n      return;\r\n    }\r\n\r\n    // Validate file type\r\n    if (!ALLOWED_TYPES.includes(file.type)) {\r\n      toast.error('Please upload a JPEG, PNG, or WebP image');\r\n      return;\r\n    }\r\n\r\n    // Validate file size\r\n    if (file.size > MAX_FILE_SIZE) {\r\n      toast.error('File size must be less than 5MB');\r\n      return;\r\n    }\r\n\r\n    // Create preview\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const dataUrl = e.target?.result as string;\r\n      processImage(dataUrl);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const processImage = async (dataUrl: string) => {\r\n    setIsUploading(true);\r\n    try {\r\n      // Calculate optimal image size based on device\r\n      const targetSizeObj = getOptimalImageSize(mobileState, 400, 400);\r\n      const targetSize = targetSizeObj.width;\r\n\r\n      // Create image element\r\n      const img = new Image();\r\n      img.src = dataUrl;\r\n\r\n      await new Promise<void>((resolve) => {\r\n        img.onload = () => resolve();\r\n      });\r\n\r\n      // Create canvas and resize image\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        throw new Error('Canvas context not available');\r\n      }\r\n\r\n      // Calculate dimensions maintaining aspect ratio\r\n      const aspectRatio = img.width / img.height;\r\n      let newWidth: number = targetSize;\r\n      let newHeight: number = targetSize / aspectRatio;\r\n\r\n      if (newHeight > targetSize) {\r\n        newHeight = targetSize;\r\n        newWidth = targetSize * aspectRatio;\r\n      }\r\n\r\n      canvas.width = newWidth;\r\n      canvas.height = newHeight;\r\n\r\n      // Draw and compress\r\n      ctx.drawImage(img, 0, 0, newWidth, newHeight);\r\n      canvas.toBlob(\r\n        (blob) => {\r\n          if (blob) {\r\n            const compressedUrl = URL.createObjectURL(blob);\r\n            setPreview(compressedUrl);\r\n            uploadPhoto(blob);\r\n          }\r\n        },\r\n        'image/jpeg',\r\n        0.85\r\n      );\r\n    } catch (error) {\r\n      toast.error('Failed to process image');\r\n      console.error('Image processing error:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const uploadPhoto = async (blob: Blob) => {\r\n    try {\r\n      // Create FormData\r\n      const formData = new FormData();\r\n      formData.append('photo', blob, `student-${studentId}.jpg`);\r\n      formData.append('studentId', studentId);\r\n\r\n      // Upload to server (implement your upload endpoint)\r\n      // const response = await fetch('/api/students/upload-photo', {\r\n      //   method: 'POST',\r\n      //   body: formData,\r\n      // });\r\n\r\n      // Simulate upload for now\r\n      await new Promise((resolve) => setTimeout(resolve, 1500));\r\n\r\n      toast.success('Photo uploaded successfully!');\r\n      onUploadComplete?.(`/uploads/students/${studentId}.jpg`);\r\n    } catch (error) {\r\n      toast.error('Failed to upload photo');\r\n      console.error('Upload error:', error);\r\n    }\r\n  };\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\r\n        video: {\r\n          facingMode: isMobile ? 'user' : 'environment',\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 },\r\n        },\r\n      });\r\n\r\n      setStream(mediaStream);\r\n      setShowCamera(true);\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = mediaStream;\r\n      }\r\n    } catch (error) {\r\n      toast.error('Failed to access camera');\r\n      console.error('Camera error:', error);\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (stream) {\r\n      stream.getTracks().forEach((track) => track.stop());\r\n      setStream(null);\r\n    }\r\n    setShowCamera(false);\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (!videoRef.current || !canvasRef.current) {\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) {\r\n      return;\r\n    }\r\n\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    ctx.drawImage(video, 0, 0);\r\n\r\n    canvas.toBlob((blob) => {\r\n      if (blob) {\r\n        const url = URL.createObjectURL(blob);\r\n        processImage(url);\r\n        stopCamera();\r\n      }\r\n    }, 'image/jpeg');\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (confirm('Are you sure you want to delete this photo?')) {\r\n      setPreview(null);\r\n      toast.success('Photo deleted');\r\n      onUploadComplete?.('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card className={isMobile ? 'w-full' : ''}>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center justify-between\">\r\n            <span>Student Photo</span>\r\n            {preview && (\r\n              <Badge variant=\"default\" className=\"bg-green-500\">\r\n                <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                Uploaded\r\n              </Badge>\r\n            )}\r\n          </CardTitle>\r\n          <CardDescription>{studentName}</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Photo Preview */}\r\n          <div className=\"relative\">\r\n            {preview ? (\r\n              <div className=\"relative group\">\r\n                <img\r\n                  src={preview}\r\n                  alt={studentName}\r\n                  className=\"w-full h-48 object-cover rounded-lg border-2 border-primary/20\"\r\n                  onClick={() => setShowPreview(true)}\r\n                />\r\n                <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2\">\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"secondary\"\r\n                    onClick={() => setShowPreview(true)}\r\n                  >\r\n                    <ZoomIn className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"destructive\"\r\n                    onClick={handleDelete}\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-muted-foreground/25 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                  <ImageIcon className=\"h-12 w-12 mx-auto mb-2 text-muted-foreground\" />\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    No photo uploaded\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Upload Actions */}\r\n          <div\r\n            className={`grid ${isMobile ? 'grid-cols-1' : 'grid-cols-2'} gap-2`}\r\n          >\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => fileInputRef.current?.click()}\r\n              disabled={isUploading}\r\n              className=\"w-full\"\r\n            >\r\n              {isUploading ? (\r\n                <>\r\n                  <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Uploading...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Upload className=\"h-4 w-4 mr-2\" />\r\n                  Upload Photo\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={startCamera}\r\n              disabled={isUploading}\r\n              className=\"w-full\"\r\n            >\r\n              <Camera className=\"h-4 w-4 mr-2\" />\r\n              Take Photo\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Hidden file input */}\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept={ALLOWED_TYPES.join(',')}\r\n            onChange={handleFileSelect}\r\n            className=\"hidden\"\r\n          />\r\n\r\n          {/* Info */}\r\n          <Alert>\r\n            <AlertCircle className=\"h-4 w-4\" />\r\n            <AlertDescription className=\"text-xs\">\r\n              Accepted formats: JPEG, PNG, WebP. Max size: 5MB. Photos are\r\n              automatically optimized for your device.\r\n            </AlertDescription>\r\n          </Alert>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Camera Dialog */}\r\n      <Dialog open={showCamera} onOpenChange={stopCamera}>\r\n        <DialogContent className={isMobile ? 'w-full' : 'max-w-2xl'}>\r\n          <DialogHeader>\r\n            <DialogTitle>Take Photo</DialogTitle>\r\n            <DialogDescription>\r\n              Position {studentName} in the frame and click capture\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <video\r\n              ref={videoRef}\r\n              autoPlay\r\n              playsInline\r\n              className=\"w-full rounded-lg bg-black\"\r\n            />\r\n            <canvas ref={canvasRef} className=\"hidden\" />\r\n            <div className=\"flex gap-2\">\r\n              <Button onClick={capturePhoto} className=\"flex-1\">\r\n                <Camera className=\"h-4 w-4 mr-2\" />\r\n                Capture\r\n              </Button>\r\n              <Button onClick={stopCamera} variant=\"outline\">\r\n                <X className=\"h-4 w-4 mr-2\" />\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Preview Dialog */}\r\n      <Dialog open={showPreview} onOpenChange={setShowPreview}>\r\n        <DialogContent className={isMobile ? 'w-full' : 'max-w-3xl'}>\r\n          <DialogHeader>\r\n            <DialogTitle>{studentName}</DialogTitle>\r\n          </DialogHeader>\r\n          {preview && (\r\n            <img\r\n              src={preview}\r\n              alt={studentName}\r\n              className=\"w-full rounded-lg\"\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\UserTracking.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\equipment\\DraggableStudent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\equipment\\DroppableEquipment.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\dashboard\\equipment\\SessionHistoryDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\fines\\FinesManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\KioskCharacter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\KioskCheckeredBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\KioskMessage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\KioskSchoolHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\BookActionModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":1,"message":"'date' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"date"},"fix":{"range":[632,645],"text":""},"desc":"Remove unused variable 'date'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\CharacterWithBooks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\CheckeredBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\ReminderScreen.tsx","messages":[{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":42,"column":32,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":42,"endColumn":55}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { CheckeredBackground } from './CheckeredBackground';\r\nimport { SchoolHeader } from './SchoolHeader';\r\nimport { CharacterWithBooks, FloatingBook } from './CharacterWithBooks';\r\nimport { Sparkles } from 'lucide-react';\r\n\r\nconst reminders = [\r\n  {\r\n    title: 'BRING BOOKS TO THE DESK\\nBEFORE READING',\r\n    icon: '',\r\n    fontSize: 'text-2xl',\r\n  },\r\n  {\r\n    title: 'NO FOOD AND DRINKS\\nALLOWED IN THE LIBRARY',\r\n    icon: '',\r\n    fontSize: 'text-2xl',\r\n  },\r\n  {\r\n    title:\r\n      'BORROWING PERIODS:\\nGeneral Collection / Filipiniana  3 days\\nFiction / Story Books  7 days\\nReturn books on time.',\r\n    icon: '',\r\n    fontSize: 'text-lg',\r\n  },\r\n  {\r\n    title: 'ALWAYS BRING YOUR\\nLIBRARY CARD',\r\n    icon: '',\r\n    fontSize: 'text-2xl',\r\n  },\r\n  {\r\n    title: 'KEEP THE LIBRARY QUIET\\nAND ORDERLY',\r\n    icon: '',\r\n    fontSize: 'text-2xl',\r\n  },\r\n];\r\n\r\ninterface ReminderScreenProps {\r\n  // No props needed - kiosk is display-only\r\n}\r\n\r\nexport function ReminderScreen({}: ReminderScreenProps) {\r\n  const [currentReminderIndex, setCurrentReminderIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentReminderIndex((prev) => (prev + 1) % reminders.length);\r\n    }, 6000); // Change reminder every 6 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const currentReminder = reminders[currentReminderIndex];\r\n\r\n  return (\r\n    <div className=\"relative w-full h-screen overflow-hidden\">\r\n      <CheckeredBackground />\r\n\r\n      {/* Floating Book in Top Right */}\r\n      <FloatingBook />\r\n\r\n      <div className=\"relative z-10 flex flex-col h-full px-8 py-2\">\r\n        <SchoolHeader />\r\n\r\n        <div className=\"flex flex-col items-center justify-center flex-1 w-full max-w-6xl mx-auto py-1\">\r\n          <motion.div\r\n            initial={{ scale: 0.8, opacity: 0, y: -30 }}\r\n            animate={{ scale: 1, opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.6, ease: 'easeOut' }}\r\n            className=\"relative mb-4\"\r\n          >\r\n            <h1\r\n              className=\"text-6xl md:text-7xl leading-tight tracking-wider text-white\"\r\n              style={{\r\n                fontWeight: 900,\r\n                WebkitTextStroke: '4px black',\r\n                paintOrder: 'stroke fill',\r\n                textShadow:\r\n                  '4px 4px 0px rgba(0,0,0,0.8), 0 0 30px rgba(0,0,0,0.5)',\r\n              }}\r\n            >\r\n              REMINDER\r\n            </h1>\r\n\r\n            <motion.svg\r\n              initial={{ pathLength: 0 }}\r\n              animate={{ pathLength: 1 }}\r\n              transition={{ duration: 0.8, delay: 0.3 }}\r\n              className=\"absolute -bottom-2 left-1/2 -translate-x-1/2\"\r\n              width=\"320\"\r\n              height=\"25\"\r\n              viewBox=\"0 0 320 25\"\r\n            >\r\n              <motion.path\r\n                d=\"M 10 12 Q 80 7, 160 12 T 310 12\"\r\n                stroke=\"#FCD34D\"\r\n                strokeWidth=\"10\"\r\n                fill=\"none\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n            </motion.svg>\r\n          </motion.div>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={currentReminderIndex}\r\n              initial={{ y: 50, opacity: 0, scale: 0.9 }}\r\n              animate={{ y: 0, opacity: 1, scale: 1 }}\r\n              exit={{ y: -50, opacity: 0, scale: 0.9 }}\r\n              transition={{ duration: 0.5 }}\r\n              className=\"relative px-12 md:px-16 py-6 text-white text-center\"\r\n              style={{\r\n                background: 'linear-gradient(90deg, #3B4BA8 0%, #8B3A62 100%)',\r\n                boxShadow:\r\n                  '0 8px 0 rgba(0,0,0,0.4), 0 12px 20px rgba(0,0,0,0.5), inset 0 2px 10px rgba(255,255,255,0.1)',\r\n                borderRadius: '80px',\r\n                minWidth: '550px',\r\n                maxWidth: '700px',\r\n                minHeight: '140px',\r\n                border: '3px solid rgba(255,255,255,0.2)',\r\n              }}\r\n            >\r\n              <motion.div\r\n                animate={{ y: [0, -5, 0] }}\r\n                transition={{\r\n                  duration: 2,\r\n                  repeat: Infinity,\r\n                  ease: 'easeInOut',\r\n                }}\r\n                className=\"text-4xl mb-3\"\r\n              >\r\n                {currentReminder.icon}\r\n              </motion.div>\r\n              <p\r\n                className={`${currentReminder.fontSize} tracking-wide whitespace-pre-line leading-relaxed`}\r\n                style={{\r\n                  fontWeight: 700,\r\n                  textShadow: '2px 2px 4px rgba(0,0,0,0.5)',\r\n                }}\r\n              >\r\n                {currentReminder.title}\r\n              </p>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-end w-full px-2 pb-1\">\r\n          <CharacterWithBooks type=\"girl\" />\r\n          <CharacterWithBooks type=\"boy\" />\r\n        </div>\r\n\r\n        {/* Animated sparkles - TOP LEFT (moved away from center content) */}\r\n        <motion.div\r\n          animate={{\r\n            scale: [1, 1.2, 1],\r\n            rotate: [0, 180, 360],\r\n          }}\r\n          transition={{ duration: 3, repeat: Infinity, ease: 'linear' }}\r\n          className=\"absolute top-24 left-8 text-yellow-200 opacity-80\"\r\n        >\r\n          <Sparkles size={48} fill=\"currentColor\" />\r\n        </motion.div>\r\n\r\n        {/* Animated sparkles - BOTTOM LEFT */}\r\n        <motion.div\r\n          animate={{\r\n            scale: [1, 1.3, 1],\r\n            rotate: [0, -180, -360],\r\n          }}\r\n          transition={{\r\n            duration: 4,\r\n            repeat: Infinity,\r\n            ease: 'linear',\r\n            delay: 1,\r\n          }}\r\n          className=\"absolute bottom-48 left-16 text-yellow-200 opacity-70\"\r\n        >\r\n          <Sparkles size={40} fill=\"currentColor\" />\r\n        </motion.div>\r\n\r\n        {/* Animated sparkles - TOP RIGHT */}\r\n        <motion.div\r\n          animate={{\r\n            scale: [1, 1.2, 1],\r\n            rotate: [0, -180, -360],\r\n          }}\r\n          transition={{\r\n            duration: 3,\r\n            repeat: Infinity,\r\n            ease: 'linear',\r\n            delay: 0.5,\r\n          }}\r\n          className=\"absolute top-48 right-48 text-yellow-200 opacity-80\"\r\n        >\r\n          <Sparkles size={48} fill=\"currentColor\" />\r\n        </motion.div>\r\n\r\n        {/* Animated sparkles - BOTTOM RIGHT */}\r\n        <motion.div\r\n          animate={{\r\n            scale: [1, 1.3, 1],\r\n            rotate: [0, 180, 360],\r\n          }}\r\n          transition={{\r\n            duration: 4,\r\n            repeat: Infinity,\r\n            ease: 'linear',\r\n            delay: 1.5,\r\n          }}\r\n          className=\"absolute bottom-48 right-16 text-yellow-200 opacity-70\"\r\n        >\r\n          <Sparkles size={40} fill=\"currentColor\" />\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\SchoolHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\ThankYouScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\kiosk\\new\\WelcomeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\layout\\FooterStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\layout\\ResponsiveDrawer.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":12,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[211,225],"text":""},"desc":"Remove unused variable 'value'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet';\n\ninterface ResponsiveDrawerProps {\n  open: boolean;\n  onOpenChange: (value: boolean) => void;\n  title?: string;\n  description?: string;\n  side?: 'left' | 'right';\n  children: React.ReactNode;\n}\n\nexport function ResponsiveDrawer({\n  open,\n  onOpenChange,\n  title,\n  description,\n  children,\n  side = 'left',\n}: ResponsiveDrawerProps) {\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent\n        side={side}\n        className=\"w-[85vw] sm:w-[400px] overflow-y-auto\"\n      >\n        {(title || description) && (\n          <SheetHeader className=\"space-y-1 pb-4\">\n            {title && <SheetTitle>{title}</SheetTitle>}\n            {description && <SheetDescription>{description}</SheetDescription>}\n          </SheetHeader>\n        )}\n        <div className=\"space-y-4\">{children}</div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\AnnouncementManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\BorrowingPolicyManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\FineManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\ImportExportManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'XCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"XCircle"},"fix":{"range":[822,833],"text":""},"desc":"Remove unused variable 'XCircle'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { toast } from 'sonner';\nimport { apiClient } from '@/lib/api';\nimport {\n  Upload,\n  Download,\n  FileSpreadsheet,\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  FileText,\n  Table as TableIcon,\n  Cloud,\n} from 'lucide-react';\n\ninterface ImportPreview {\n  headers: string[];\n  data: any[];\n  totalRows: number;\n  validRows: number;\n  errors: Array<{ row: number; message: string }>;\n}\n\nexport default function ImportExportManager() {\n  const [activeTab, setActiveTab] = useState('import');\n  const [importType, setImportType] = useState<'books' | 'students'>('books');\n  const [exportType, setExportType] = useState<'books' | 'students'>('books');\n  const [file, setFile] = useState<File | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [preview, setPreview] = useState<ImportPreview | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [importResult, setImportResult] = useState<any>(null);\n\n  // Drag and drop handlers\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n\n    const droppedFile = e.dataTransfer.files[0];\n    if (droppedFile) {\n      handleFileSelect(droppedFile);\n    }\n  }, []);\n\n  const handleFileSelect = (selectedFile: File) => {\n    const validTypes = [\n      'text/csv',\n      'application/vnd.ms-excel',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    ];\n\n    if (\n      !validTypes.includes(selectedFile.type) &&\n      !selectedFile.name.endsWith('.csv')\n    ) {\n      toast.error('Please upload a CSV or Excel file');\n      return;\n    }\n\n    setFile(selectedFile);\n    parseFile(selectedFile);\n  };\n\n  const parseFile = async (file: File) => {\n    setIsProcessing(true);\n    setUploadProgress(10);\n\n    try {\n      const text = await file.text();\n      setUploadProgress(40);\n\n      // Simple CSV parsing\n      const lines = text.split(/\\r?\\n/).filter((l) => l.trim());\n      const headers =\n        lines[0]?.split(',').map((h) => h.trim().replace(/^\"|\"$/g, '')) || [];\n\n      setUploadProgress(60);\n\n      const data = lines.slice(1, 11).map((line) => {\n        const values = line\n          .split(',')\n          .map((v) => v.trim().replace(/^\"|\"$/g, ''));\n        const row: any = {};\n        headers.forEach((h, i) => {\n          row[h] = values[i] || '';\n        });\n        return row;\n      });\n\n      setUploadProgress(80);\n\n      // Basic validation\n      const errors: Array<{ row: number; message: string }> = [];\n      if (importType === 'books') {\n        data.forEach((row, idx) => {\n          if (!row['Title']) {\n            errors.push({ row: idx + 2, message: 'Missing title' });\n          }\n        });\n      } else if (importType === 'students') {\n        data.forEach((row, idx) => {\n          if (!row['First Name'] || !row['Last Name']) {\n            errors.push({ row: idx + 2, message: 'Missing name' });\n          }\n        });\n      }\n\n      setPreview({\n        headers,\n        data,\n        totalRows: lines.length - 1,\n        validRows: lines.length - 1 - errors.length,\n        errors,\n      });\n\n      setUploadProgress(100);\n      toast.success('File parsed successfully');\n    } catch (error) {\n      toast.error('Failed to parse file');\n      console.error(error);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!file || !preview) return;\n\n    setIsProcessing(true);\n    setUploadProgress(0);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', importType);\n\n      setUploadProgress(30);\n\n      // Simulate upload progress\n      const progressInterval = setInterval(() => {\n        setUploadProgress((prev) => Math.min(prev + 10, 90));\n      }, 200);\n\n      const response = await apiClient.post(\n        `/api/${importType}/import`,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        }\n      );\n\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      if (response.success) {\n        setImportResult(response.data);\n        toast.success(\n          `Successfully imported ${(response.data as any).imported} ${importType}`\n        );\n      } else {\n        toast.error('Import failed');\n      }\n    } catch (error) {\n      toast.error('Import failed');\n      console.error(error);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleExport = async (format: 'csv' | 'xlsx' | 'google-sheets') => {\n    toast.info(`Exporting ${exportType} to ${format.toUpperCase()}...`);\n\n    try {\n      if (format === 'google-sheets') {\n        // Export as CSV for Google Sheets\n        toast.info('Downloading CSV for Google Sheets...');\n        window.open(`/api/${exportType}/export?format=csv`, '_blank');\n      } else {\n        // Download file\n        window.open(`/api/${exportType}/export?format=${format}`, '_blank');\n      }\n    } catch (error) {\n      toast.error('Export failed');\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div>\n        <h2 className=\"text-3xl font-bold tracking-tight\">\n          Import & Export Manager\n        </h2>\n        <p className=\"text-muted-foreground\">\n          Manage your library data with CSV, Excel, and Google Sheets\n        </p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-2 max-w-md\">\n          <TabsTrigger value=\"import\">\n            <Upload className=\"h-4 w-4 mr-2\" />\n            Import Data\n          </TabsTrigger>\n          <TabsTrigger value=\"export\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export Data\n          </TabsTrigger>\n        </TabsList>\n\n        {/* IMPORT TAB */}\n        <TabsContent value=\"import\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Import Data from File</CardTitle>\n              <CardDescription>\n                Upload CSV or Excel files to import books or students\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Data Type Selector */}\n              <div className=\"space-y-2\">\n                <Label>Data Type</Label>\n                <Select\n                  value={importType}\n                  onValueChange={(v: any) => setImportType(v)}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"books\">Books Collection</SelectItem>\n                    <SelectItem value=\"students\">Students & Users</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* File Upload Area */}\n              <div\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                className={`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${\n                  isDragging\n                    ? 'border-primary bg-primary/5'\n                    : 'border-muted-foreground/25 hover:border-primary/50'\n                }`}\n              >\n                {file ? (\n                  <div className=\"space-y-4\">\n                    <FileSpreadsheet className=\"h-16 w-16 mx-auto text-green-500\" />\n                    <div>\n                      <p className=\"text-lg font-medium\">{file.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {(file.size / 1024).toFixed(2)} KB\n                      </p>\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => {\n                        setFile(null);\n                        setPreview(null);\n                        setImportResult(null);\n                      }}\n                    >\n                      Remove File\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <Upload className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-lg font-medium\">\n                        Drag and drop your file here\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        or click to browse\n                      </p>\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() =>\n                        document.getElementById('file-upload')?.click()\n                      }\n                    >\n                      <FileText className=\"h-4 w-4 mr-2\" />\n                      Choose File\n                    </Button>\n                    <input\n                      id=\"file-upload\"\n                      type=\"file\"\n                      accept=\".csv,.xlsx,.xls\"\n                      className=\"hidden\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) handleFileSelect(file);\n                      }}\n                    />\n                  </div>\n                )}\n              </div>\n\n              {/* Upload Progress */}\n              {isProcessing && (\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Processing...</span>\n                    <span>{uploadProgress}%</span>\n                  </div>\n                  <Progress value={uploadProgress} />\n                </div>\n              )}\n\n              {/* Preview */}\n              {preview && (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-lg font-semibold\">Preview</h3>\n                    <div className=\"flex gap-2\">\n                      <Badge variant=\"outline\">\n                        <CheckCircle className=\"h-3 w-3 mr-1 text-green-500\" />\n                        {preview.validRows} valid\n                      </Badge>\n                      {preview.errors.length > 0 && (\n                        <Badge variant=\"destructive\">\n                          <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                          {preview.errors.length} errors\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"border rounded-lg overflow-hidden\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          {preview.headers.slice(0, 5).map((header, idx) => (\n                            <TableHead key={idx}>{header}</TableHead>\n                          ))}\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {preview.data.map((row, idx) => (\n                          <TableRow key={idx}>\n                            {preview.headers\n                              .slice(0, 5)\n                              .map((header, cellIdx) => (\n                                <TableCell key={cellIdx}>\n                                  {row[header] || '-'}\n                                </TableCell>\n                              ))}\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n\n                  <p className=\"text-sm text-muted-foreground\">\n                    Showing first 10 rows of {preview.totalRows} total\n                  </p>\n\n                  <Button\n                    onClick={handleImport}\n                    disabled={\n                      isProcessing || preview.errors.length >= preview.totalRows\n                    }\n                    className=\"w-full\"\n                  >\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Import {preview.validRows} Records\n                  </Button>\n                </div>\n              )}\n\n              {/* Import Results */}\n              {importResult && (\n                <Card className=\"border-green-200 bg-green-50 dark:bg-green-950/20\">\n                  <CardContent className=\"pt-6\">\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-6 w-6 text-green-600 mt-0.5\" />\n                      <div className=\"space-y-1\">\n                        <p className=\"font-semibold text-green-900 dark:text-green-100\">\n                          Import Successful\n                        </p>\n                        <div className=\"text-sm text-green-700 dark:text-green-300\">\n                          <p> {importResult.imported} records imported</p>\n                          {importResult.updated > 0 && (\n                            <p> {importResult.updated} records updated</p>\n                          )}\n                          {importResult.flagged > 0 && (\n                            <p>\n                               {importResult.flagged} records flagged for\n                              review\n                            </p>\n                          )}\n                          {importResult.errors > 0 && (\n                            <p> {importResult.errors} records failed</p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* EXPORT TAB */}\n        <TabsContent value=\"export\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Export Data</CardTitle>\n              <CardDescription>\n                Download your library data in various formats\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Data Type Selector */}\n              <div className=\"space-y-2\">\n                <Label>Data to Export</Label>\n                <Select\n                  value={exportType}\n                  onValueChange={(v: any) => setExportType(v)}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"books\">Books Collection</SelectItem>\n                    <SelectItem value=\"students\">Students & Users</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Export Options */}\n              <div className=\"grid gap-4\">\n                <Button\n                  variant=\"outline\"\n                  className=\"h-auto p-6 justify-start\"\n                  onClick={() => handleExport('csv')}\n                >\n                  <div className=\"flex items-start gap-4\">\n                    <FileText className=\"h-8 w-8 text-blue-500\" />\n                    <div className=\"text-left\">\n                      <p className=\"font-semibold\">Export as CSV</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Compatible with Excel, Google Sheets, and other\n                        spreadsheet apps\n                      </p>\n                    </div>\n                  </div>\n                </Button>\n\n                <Button\n                  variant=\"outline\"\n                  className=\"h-auto p-6 justify-start\"\n                  onClick={() => handleExport('xlsx')}\n                >\n                  <div className=\"flex items-start gap-4\">\n                    <TableIcon className=\"h-8 w-8 text-green-500\" />\n                    <div className=\"text-left\">\n                      <p className=\"font-semibold\">Export as Excel</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Native Microsoft Excel format (.xlsx)\n                      </p>\n                    </div>\n                  </div>\n                </Button>\n\n                <Button\n                  variant=\"outline\"\n                  className=\"h-auto p-6 justify-start\"\n                  onClick={() => handleExport('google-sheets')}\n                >\n                  <div className=\"flex items-start gap-4\">\n                    <Cloud className=\"h-8 w-8 text-amber-500\" />\n                    <div className=\"text-left\">\n                      <p className=\"font-semibold\">Export for Google Sheets</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Download as CSV (compatible with Google Sheets)\n                      </p>\n                    </div>\n                  </div>\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\LibrarySectionsManager.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":36,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { apiClient } from '@/lib/api';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\n\ninterface Section {\n  id: string;\n  code: string;\n  name: string;\n  description?: string;\n  is_active: boolean;\n}\n\nexport default function LibrarySectionsManager() {\n  const [sections, setSections] = useState<Section[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [code, setCode] = useState('');\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  const loadSections = async () => {\n    setLoading(true);\n    try {\n      const res = await apiClient.get<Section[]>('/api/sections');\n      if (res.success && res.data) setSections(res.data);\n    } catch (e) {\n      toast.error('Failed to load sections');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadSections();\n  }, []);\n\n  const createSection = async () => {\n    if (!code || !name) {\n      toast.warning('Code and name are required');\n      return;\n    }\n    try {\n      const res = await apiClient.post<Section>('/api/sections', {\n        code,\n        name,\n        description,\n      });\n      if (res.success && res.data) {\n        toast.success('Section created');\n        setCode('');\n        setName('');\n        setDescription('');\n        loadSections();\n      }\n    } catch {\n      toast.error('Failed to create section');\n    }\n  };\n\n  const toggleActive = async (id: string, current: boolean) => {\n    try {\n      const res = await apiClient.put<Section>(`/api/sections/${id}`, {\n        is_active: !current,\n      });\n      if (res.success) {\n        toast.success('Section updated');\n        setSections((prev) =>\n          prev.map((s) => (s.id === id ? { ...s, is_active: !current } : s))\n        );\n      }\n    } catch {\n      toast.error('Failed to update section');\n    }\n  };\n\n  const removeSection = async (id: string) => {\n    try {\n      const res = await apiClient.delete(`/api/sections/${id}`);\n      if (res.success) {\n        toast.success('Section deleted');\n        setSections((prev) => prev.filter((s) => s.id !== id));\n      }\n    } catch {\n      toast.error('Failed to delete section');\n    }\n  };\n\n  const seedDefaults = async () => {\n    try {\n      const res = await apiClient.post('/api/sections/ensure-defaults');\n      if (res.success) {\n        toast.success('Defaults ensured');\n        loadSections();\n      }\n    } catch {\n      toast.error('Failed to seed defaults');\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Library Sections</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex gap-2 mb-4\">\n          <Input\n            placeholder=\"Code\"\n            value={code}\n            onChange={(e) => setCode(e.target.value)}\n          />\n          <Input\n            placeholder=\"Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <Input\n            placeholder=\"Description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n          <Button onClick={createSection}>Add</Button>\n          <Button variant=\"outline\" onClick={seedDefaults}>\n            Seed Defaults\n          </Button>\n        </div>\n        <div className=\"border rounded-md\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Code</TableHead>\n                <TableHead>Name</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {loading ? (\n                <TableRow>\n                  <TableCell colSpan={4}>Loading...</TableCell>\n                </TableRow>\n              ) : sections.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={4}>No sections</TableCell>\n                </TableRow>\n              ) : (\n                sections.map((s) => (\n                  <TableRow key={s.id}>\n                    <TableCell>{s.code}</TableCell>\n                    <TableCell>{s.name}</TableCell>\n                    <TableCell>{s.is_active ? 'Active' : 'Inactive'}</TableCell>\n                    <TableCell className=\"flex gap-2\">\n                      <Button\n                        size=\"sm\"\n                        onClick={() => toggleActive(s.id, s.is_active)}\n                      >\n                        {s.is_active ? 'Disable' : 'Enable'}\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => removeSection(s.id)}\n                      >\n                        Delete\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\MonthlyReportGenerator.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[9,19],"text":""},"desc":"Remove unused variable 'useEffect'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { apiClient, analyticsApi } from '@/lib/api';\nimport { toUserMessage } from '@/utils/error-utils';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { downloadCSV, downloadJSON, printReport } from '@/lib/export-utils';\nimport { toast } from 'sonner';\n\ninterface ReportSummary {\n  totalVisits: number;\n  uniqueStudents: number;\n  booksBorrowed: number;\n  booksReturned: number;\n  printingTotal: number;\n  finesCollected: number;\n}\n\nexport default function MonthlyReportGenerator() {\n  const [month, setMonth] = useState<string>('');\n  const [summary, setSummary] = useState<ReportSummary | null>(null);\n  const [busy, setBusy] = useState(false);\n  const [overdue, setOverdue] = useState<any[]>([]);\n  const [printing, setPrinting] = useState<any[]>([]);\n\n  const loadData = async () => {\n    if (!month) {\n      toast.warning('Select month');\n      return;\n    }\n    setBusy(true);\n    try {\n      const metrics = await analyticsApi.getMetrics();\n      const overdueRes = await apiClient.get<any[]>('/api/fines/overdue');\n      const printRes = await apiClient.get<any[]>('/api/printing/jobs');\n      const s: ReportSummary = {\n        totalVisits: (metrics.data as any)?.visits || 0,\n        uniqueStudents: (metrics.data as any)?.uniqueStudents || 0,\n        booksBorrowed: (metrics.data as any)?.booksBorrowed || 0,\n        booksReturned: (metrics.data as any)?.booksReturned || 0,\n        printingTotal: (printRes.data || []).reduce(\n          (sum: number, j: any) => sum + (j.total_cost || 0),\n          0\n        ),\n        finesCollected: 0,\n      };\n      setSummary(s);\n      setOverdue(overdueRes.data || []);\n      setPrinting(printRes.data || []);\n      toast.success('Report ready');\n    } catch (e) {\n      toast.error(toUserMessage(e));\n      setSummary({\n        totalVisits: 0,\n        uniqueStudents: 0,\n        booksBorrowed: 0,\n        booksReturned: 0,\n        printingTotal: 0,\n        finesCollected: 0,\n      });\n      setOverdue([]);\n      setPrinting([]);\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const exportCSV = () => {\n    if (!summary) return;\n    const data = [\n      { Metric: 'Total Visits', Value: summary.totalVisits },\n      { Metric: 'Unique Students', Value: summary.uniqueStudents },\n      { Metric: 'Books Borrowed', Value: summary.booksBorrowed },\n      { Metric: 'Books Returned', Value: summary.booksReturned },\n      { Metric: 'Printing Total', Value: summary.printingTotal },\n      { Metric: 'Fines Collected', Value: summary.finesCollected },\n    ];\n    downloadCSV(data, `monthly-summary-${month}`);\n  };\n\n  const exportJSONAll = () => {\n    const data = { month, summary, overdue, printing };\n    downloadJSON(data, `monthly-full-${month}`);\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Monthly Report Generator</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex gap-2 mb-4\">\n          <Input\n            type=\"month\"\n            value={month}\n            onChange={(e) => setMonth(e.target.value)}\n          />\n          <Button onClick={loadData} disabled={busy}>\n            {busy ? 'Generating...' : 'Generate'}\n          </Button>\n          <Button variant=\"outline\" onClick={exportCSV} disabled={!summary}>\n            Export CSV\n          </Button>\n          <Button variant=\"outline\" onClick={exportJSONAll} disabled={!summary}>\n            Export JSON\n          </Button>\n          <Button variant=\"secondary\" onClick={printReport}>\n            Print\n          </Button>\n        </div>\n        {summary && (\n          <div className=\"border rounded-md mb-4\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Metric</TableHead>\n                  <TableHead>Value</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                <TableRow>\n                  <TableCell>Total Visits</TableCell>\n                  <TableCell>{summary.totalVisits}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Unique Students</TableCell>\n                  <TableCell>{summary.uniqueStudents}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Books Borrowed</TableCell>\n                  <TableCell>{summary.booksBorrowed}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Books Returned</TableCell>\n                  <TableCell>{summary.booksReturned}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Printing Total</TableCell>\n                  <TableCell>{summary.printingTotal}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Fines Collected</TableCell>\n                  <TableCell>{summary.finesCollected}</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </div>\n        )}\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <div className=\"border rounded-md\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Overdue Student</TableHead>\n                  <TableHead>Book</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {overdue.map((o: any) => (\n                  <TableRow key={o.id}>\n                    <TableCell>\n                      {`${o.student?.first_name || ''} ${o.student?.last_name || ''}`.trim()}\n                    </TableCell>\n                    <TableCell>{o.book?.title || ''}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n          <div className=\"border rounded-md\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Printing Student</TableHead>\n                  <TableHead>Total</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {printing.map((p: any) => (\n                  <TableRow key={p.id}>\n                    <TableCell>{p.student_id}</TableCell>\n                    <TableCell>{p.total_cost}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\PricingConfiguration.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\PrintingTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\management\\StudentSearchDropdown.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'student' is defined but never used. Allowed unused args must match /^_/u.","line":8,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"student"},"fix":{"range":[352,408],"text":""},"desc":"Remove unused variable 'student'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'selectedStudentId' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"selectedStudentId"},"fix":{"range":[601,623],"text":""},"desc":"Remove unused variable 'selectedStudentId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Search, Clock, User, X, Briefcase, CheckCircle } from 'lucide-react';\r\nimport { apiClient, enhancedLibraryApi } from '@/lib/api';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface StudentSearchDropdownProps {\r\n  onSelect: (student: { id: string; name: string; studentId: string }) => void;\r\n  selectedStudentId?: string;\r\n  /** If true, only shows currently checked-in (active) students */\r\n  activeOnly?: boolean;\r\n}\r\n\r\nexport function StudentSearchDropdown({\r\n  onSelect,\r\n  selectedStudentId,\r\n  activeOnly = false,\r\n}: StudentSearchDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [query, setQuery] = useState('');\r\n  const [recentScans, setRecentScans] = useState<any[]>([]);\r\n  const [activeStudents, setActiveStudents] = useState<any[]>([]);\r\n  const [searchResults, setSearchResults] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Fetch recent scans or active students on mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        if (activeOnly) {\r\n          // Fetch currently checked-in students\r\n          const res = await enhancedLibraryApi.getCurrentPatrons();\r\n          if (res.success && res.data) {\r\n            const patrons = (res.data as any).patrons || [];\r\n            setActiveStudents(patrons);\r\n          }\r\n        } else {\r\n          // Fetch recent scans\r\n          const res = await apiClient.get<any[]>('/api/kiosk/recent-scans');\r\n          if (res.success && res.data) {\r\n            setRecentScans(res.data);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to fetch data', e);\r\n      }\r\n    };\r\n    fetchData();\r\n\r\n    // Refresh active students periodically if activeOnly\r\n    if (activeOnly) {\r\n      const interval = setInterval(fetchData, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [activeOnly]);\r\n\r\n  // Search students when query changes - Google style (start from 1 char)\r\n  useEffect(() => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    // Start searching immediately from 1 character\r\n    const timer = setTimeout(async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        if (activeOnly) {\r\n          // Filter active students locally\r\n          const filtered = activeStudents.filter((s) => {\r\n            const name =\r\n              s.studentName?.toLowerCase() || s.name?.toLowerCase() || '';\r\n            const studentId = s.studentId?.toLowerCase() || '';\r\n            const q = query.toLowerCase();\r\n            return name.includes(q) || studentId.includes(q);\r\n          });\r\n          setSearchResults(filtered);\r\n        } else {\r\n          // Search all students via API (min 1 char for Google-style)\r\n          if (query.length >= 1) {\r\n            const res = await apiClient.get<{\r\n              success: boolean;\r\n              data: any[];\r\n              count: number;\r\n            }>(`/api/students/search?q=${encodeURIComponent(query)}`);\r\n            if (res.success && res.data) {\r\n              // Check if data is nested (server response wrapped by apiClient)\r\n              const students = Array.isArray(res.data)\r\n                ? res.data\r\n                : res.data.data || [];\r\n              setSearchResults(students);\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Search failed', e);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }, 150); // Faster debounce for Google-style feel\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [query, activeOnly, activeStudents]);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (\r\n        wrapperRef.current &&\r\n        !wrapperRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleSelect = (student: any) => {\r\n    const normalized = {\r\n      id: student.id,\r\n      studentId: student.student_id || student.studentId,\r\n      name: student.name || `${student.first_name} ${student.last_name}`,\r\n    };\r\n    onSelect(normalized);\r\n    setQuery(normalized.name); // Show name in input\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const clearSelection = () => {\r\n    onSelect({ id: '', name: '', studentId: '' });\r\n    setQuery('');\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={wrapperRef}>\r\n      <div className=\"relative\">\r\n        <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n        <Input\r\n          placeholder=\"Search student or select recent...\"\r\n          value={query}\r\n          onChange={(e) => {\r\n            setQuery(e.target.value);\r\n            setIsOpen(true);\r\n          }}\r\n          onFocus={() => setIsOpen(true)}\r\n          className=\"pl-8 pr-8\"\r\n        />\r\n        {query && (\r\n          <button\r\n            onClick={clearSelection}\r\n            className=\"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute z-50 w-full mt-1 bg-popover text-popover-foreground border rounded-md shadow-md max-h-60 overflow-auto\">\r\n          {isLoading && (\r\n            <div className=\"p-2 text-sm text-center text-muted-foreground\">\r\n              Searching...\r\n            </div>\r\n          )}\r\n\r\n          {/* Show active students when activeOnly and no query */}\r\n          {!query && activeOnly && activeStudents.length > 0 && (\r\n            <div className=\"p-1\">\r\n              <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground flex items-center gap-1\">\r\n                <CheckCircle className=\"h-3 w-3 text-green-500\" /> Active\r\n                Students ({activeStudents.length})\r\n              </div>\r\n              {activeStudents.map((student) => {\r\n                const isPersonnel = student.studentId?.startsWith('PN');\r\n                return (\r\n                  <div\r\n                    key={student.id}\r\n                    className=\"flex items-center gap-2 px-2 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground rounded-sm transition-colors duration-200\"\r\n                    onClick={() =>\r\n                      handleSelect({\r\n                        id: student.id,\r\n                        studentId: student.studentId,\r\n                        name: student.studentName || student.name,\r\n                      })\r\n                    }\r\n                  >\r\n                    {isPersonnel ? (\r\n                      <Briefcase className=\"h-4 w-4 text-blue-500 dark:text-blue-400\" />\r\n                    ) : (\r\n                      <User className=\"h-4 w-4 text-green-500\" />\r\n                    )}\r\n                    <div className=\"flex flex-col\">\r\n                      <span className=\"font-medium\">\r\n                        {student.studentName || student.name}\r\n                      </span>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {student.studentId}\r\n                      </span>\r\n                    </div>\r\n                    <Badge\r\n                      variant=\"outline\"\r\n                      className=\"ml-auto text-xs text-green-600 dark:text-green-400\"\r\n                    >\r\n                      {student.purpose || 'Checked In'}\r\n                    </Badge>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* Show recent scans when NOT activeOnly and no query */}\r\n          {!query && !activeOnly && recentScans.length > 0 && (\r\n            <div className=\"p-1\">\r\n              <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground flex items-center gap-1\">\r\n                <Clock className=\"h-3 w-3\" /> Recent Scans\r\n              </div>\r\n              {recentScans.map((student) => {\r\n                const isPersonnel = student.studentId?.startsWith('PN');\r\n                return (\r\n                  <div\r\n                    key={student.id}\r\n                    className=\"flex items-center gap-2 px-2 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground rounded-sm transition-colors duration-200\"\r\n                    onClick={() => handleSelect(student)}\r\n                  >\r\n                    {isPersonnel ? (\r\n                      <Briefcase className=\"h-4 w-4 text-blue-500 dark:text-blue-400\" />\r\n                    ) : (\r\n                      <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                    )}\r\n                    <div className=\"flex flex-col\">\r\n                      <span className=\"font-medium\">{student.name}</span>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {student.studentId}\r\n                      </span>\r\n                    </div>\r\n                    {isPersonnel && (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"ml-auto text-xs text-blue-600 dark:text-blue-400\"\r\n                      >\r\n                        Personnel\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {query && searchResults.length > 0 && (\r\n            <div className=\"p-1\">\r\n              <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">\r\n                {activeOnly ? 'Matching Active Students' : 'Search Results'}\r\n              </div>\r\n              {searchResults.map((student) => {\r\n                const studentId = student.student_id || student.studentId;\r\n                const isPersonnel =\r\n                  studentId?.startsWith('PN') || student.type === 'PERSONNEL';\r\n                const displayName =\r\n                  student.studentName ||\r\n                  student.name ||\r\n                  (student.first_name\r\n                    ? `${student.first_name} ${student.last_name}`\r\n                    : 'Unknown');\r\n                return (\r\n                  <div\r\n                    key={student.id}\r\n                    className=\"flex items-center gap-2 px-2 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground rounded-sm transition-colors duration-200\"\r\n                    onClick={() =>\r\n                      handleSelect({\r\n                        id: student.id,\r\n                        studentId: studentId,\r\n                        name: displayName,\r\n                        ...student,\r\n                      })\r\n                    }\r\n                  >\r\n                    {isPersonnel ? (\r\n                      <Briefcase className=\"h-4 w-4 text-blue-500 dark:text-blue-400\" />\r\n                    ) : (\r\n                      <User\r\n                        className={`h-4 w-4 ${activeOnly ? 'text-green-500' : 'text-muted-foreground'}`}\r\n                      />\r\n                    )}\r\n                    <div className=\"flex flex-col\">\r\n                      <span className=\"font-medium\">{displayName}</span>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {studentId}\r\n                      </span>\r\n                    </div>\r\n                    <Badge\r\n                      variant=\"outline\"\r\n                      className={`ml-auto text-xs ${activeOnly ? 'text-green-600 dark:text-green-400' : ''}`}\r\n                    >\r\n                      {activeOnly && student.purpose\r\n                        ? student.purpose\r\n                        : isPersonnel\r\n                          ? 'Personnel'\r\n                          : student.grade_level > 0\r\n                            ? `Grade ${student.grade_level}`\r\n                            : student.gradeLevel || student.grade_category}\r\n                    </Badge>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {query && !isLoading && searchResults.length === 0 && (\r\n            <div className=\"p-4 text-sm text-center text-muted-foreground\">\r\n              {activeOnly\r\n                ? 'No active students match your search.'\r\n                : 'No students found.'}\r\n            </div>\r\n          )}\r\n\r\n          {!query && !activeOnly && recentScans.length === 0 && (\r\n            <div className=\"p-4 text-sm text-center text-muted-foreground\">\r\n              No recent scans.\r\n            </div>\r\n          )}\r\n\r\n          {!query && activeOnly && activeStudents.length === 0 && (\r\n            <div className=\"p-4 text-sm text-center text-muted-foreground\">\r\n              No students currently checked in.\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\mobile\\MobileBottomNavigation.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'tabId' is defined but never used. Allowed unused args must match /^_/u.","line":108,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":108,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"tabId"},"fix":{"range":[2135,2148],"text":""},"desc":"Remove unused variable 'tabId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  useMobileOptimization,\r\n  useTouchOptimization,\r\n} from '@/hooks/useMobileOptimization';\r\nimport { useOfflineSync } from '@/hooks/useOfflineSync';\r\nimport { useAppStore } from '@/store/useAppStore';\r\nimport {\r\n  Wifi,\r\n  WifiOff,\r\n  AlertCircle,\r\n  ChevronUp,\r\n  X,\r\n  Home,\r\n  Camera,\r\n  Library,\r\n  Users,\r\n  BookOpen,\r\n  Laptop,\r\n  BarChart,\r\n  Settings,\r\n  ClipboardList,\r\n} from 'lucide-react';\r\nimport type { AppNotification } from '@/services/notificationApi';\r\n\r\ninterface NavigationItem {\r\n  id: string;\r\n  label: string;\r\n  icon: React.ComponentType<{ className?: string }>;\r\n  activeIcon?: React.ComponentType<{ className?: string }>;\r\n  badge?: number;\r\n  shortcut?: string;\r\n  color?: string;\r\n}\r\n\r\nconst mobileNavigationItems: NavigationItem[] = [\r\n  {\r\n    id: 'dashboard',\r\n    label: 'Home',\r\n    icon: Home,\r\n    shortcut: '1',\r\n    color: 'text-blue-500',\r\n  },\r\n  {\r\n    id: 'scan',\r\n    label: 'Scan',\r\n    icon: Camera,\r\n    shortcut: '2',\r\n    color: 'text-green-500',\r\n  },\r\n  {\r\n    id: 'checkout',\r\n    label: 'Checkout',\r\n    icon: Library,\r\n    shortcut: '3',\r\n    color: 'text-purple-500',\r\n  },\r\n  {\r\n    id: 'students',\r\n    label: 'Students',\r\n    icon: Users,\r\n    shortcut: '4',\r\n    color: 'text-orange-500',\r\n  },\r\n  {\r\n    id: 'books',\r\n    label: 'Books',\r\n    icon: BookOpen,\r\n    shortcut: '5',\r\n    color: 'text-indigo-500',\r\n  },\r\n];\r\n\r\nconst moreNavigationItems: NavigationItem[] = [\r\n  {\r\n    id: 'attendance',\r\n    label: 'Attendance',\r\n    icon: ClipboardList,\r\n    shortcut: '6',\r\n    color: 'text-emerald-500',\r\n  },\r\n  {\r\n    id: 'equipment',\r\n    label: 'Equipment',\r\n    icon: Laptop,\r\n    shortcut: '7',\r\n    color: 'text-teal-500',\r\n  },\r\n  {\r\n    id: 'analytics',\r\n    label: 'Analytics',\r\n    icon: BarChart,\r\n    shortcut: '8',\r\n    color: 'text-pink-500',\r\n  },\r\n  {\r\n    id: 'settings',\r\n    label: 'Settings',\r\n    icon: Settings,\r\n    shortcut: '9',\r\n    color: 'text-gray-500',\r\n  },\r\n];\r\n\r\ninterface MobileBottomNavigationProps {\r\n  activeTab: string;\r\n  onTabChange: (tabId: string) => void;\r\n}\r\n\r\nexport const MobileBottomNavigation: React.FC<MobileBottomNavigationProps> = ({\r\n  activeTab,\r\n  onTabChange,\r\n}) => {\r\n  const { isMobile, isTablet } = useMobileOptimization();\r\n  const { isOnline, queueCount } = useOfflineSync();\r\n  const { notifications } = useAppStore();\r\n  const [showMore, setShowMore] = useState(false);\r\n  const { handleTouchStart, handleTouchEnd } = useTouchOptimization();\r\n\r\n  // Only show on mobile devices\r\n  if (!isMobile && !isTablet) {\r\n    return null;\r\n  }\r\n\r\n  // Find current navigation item\r\n  const getCurrentItem = () => {\r\n    const allItems = [...mobileNavigationItems, ...moreNavigationItems];\r\n    return (\r\n      allItems.find((item) => item.id === activeTab) || mobileNavigationItems[0]\r\n    );\r\n  };\r\n\r\n  const currentItem = getCurrentItem();\r\n\r\n  // Handle navigation\r\n  const handleNavigation = (item: NavigationItem) => {\r\n    onTabChange(item.id);\r\n    setShowMore(false);\r\n\r\n    // Haptic feedback if available\r\n    if ('vibrate' in navigator) {\r\n      navigator.vibrate(50);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Main Bottom Navigation */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 z-50 safe-area-inset-bottom\">\r\n        {/* Status Bar */}\r\n        <div className=\"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-b border-slate-100 dark:border-slate-800\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {isOnline ? (\r\n              <Wifi className=\"h-3 w-3 text-green-500\" />\r\n            ) : (\r\n              <WifiOff className=\"h-3 w-3 text-red-500\" />\r\n            )}\r\n            <span className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n              {isOnline ? 'Online' : 'Offline'}\r\n            </span>\r\n          </div>\r\n\r\n          {queueCount > 0 && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <AlertCircle className=\"h-3 w-3 text-amber-500\" />\r\n              <span className=\"text-xs text-amber-600 dark:text-amber-400\">\r\n                {queueCount} pending\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Navigation Items */}\r\n        <div className=\"flex items-center justify-around py-2\">\r\n          {mobileNavigationItems.map((item) => {\r\n            const Icon = item.icon;\r\n            const isActive = activeTab === item.id;\r\n\r\n            return (\r\n              <Button\r\n                key={item.id}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className={`flex flex-col items-center gap-1 h-auto py-2 px-3 rounded-lg transition-all ${\r\n                  isActive\r\n                    ? 'bg-primary/10 text-primary dark:bg-primary/20'\r\n                    : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100'\r\n                }`}\r\n                onClick={() => handleNavigation(item)}\r\n                onTouchStart={handleTouchStart}\r\n                onTouchEnd={handleTouchEnd}\r\n              >\r\n                <div className=\"relative\">\r\n                  <Icon className={`h-5 w-5 ${isActive ? item.color : ''}`} />\r\n                  {notifications?.some(\r\n                    (n: AppNotification) => n.type === item.id\r\n                  ) && (\r\n                    <span className=\"absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full\" />\r\n                  )}\r\n                </div>\r\n                <span className=\"text-xs font-medium\">{item.label}</span>\r\n                {item.shortcut && (\r\n                  <span className=\"text-[10px] text-slate-400 dark:text-slate-500\">\r\n                    {item.shortcut}\r\n                  </span>\r\n                )}\r\n              </Button>\r\n            );\r\n          })}\r\n\r\n          {/* More Button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className={`flex flex-col items-center gap-1 h-auto py-2 px-3 rounded-lg transition-all ${\r\n              showMore\r\n                ? 'bg-primary/10 text-primary dark:bg-primary/20'\r\n                : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100'\r\n            }`}\r\n            onClick={() => setShowMore(!showMore)}\r\n          >\r\n            <ChevronUp\r\n              className={`h-5 w-5 transition-transform ${showMore ? 'rotate-180' : ''}`}\r\n            />\r\n            <span className=\"text-xs font-medium\">More</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* More Options Overlay */}\r\n      {showMore && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/50 z-40\"\r\n          onClick={() => setShowMore(false)}\r\n        >\r\n          <div\r\n            className=\"absolute bottom-20 left-4 right-4 bg-white dark:bg-slate-900 rounded-t-2xl shadow-2xl p-4\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n                More Options\r\n              </h3>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setShowMore(false)}\r\n                className=\"h-8 w-8 p-0\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {moreNavigationItems.map((item) => {\r\n                const Icon = item.icon;\r\n                const isActive = activeTab === item.id;\r\n\r\n                return (\r\n                  <Button\r\n                    key={item.id}\r\n                    variant={isActive ? 'default' : 'outline'}\r\n                    size=\"sm\"\r\n                    className={`flex flex-col items-center gap-2 h-auto py-3 rounded-lg transition-all ${\r\n                      isActive\r\n                        ? item.color\r\n                        : 'text-slate-600 dark:text-slate-400'\r\n                    }`}\r\n                    onClick={() => handleNavigation(item)}\r\n                  >\r\n                    <Icon className=\"h-5 w-5\" />\r\n                    <span className=\"text-xs font-medium\">{item.label}</span>\r\n                    {item.shortcut && (\r\n                      <span className=\"text-[10px] text-slate-400 dark:text-slate-500\">\r\n                        {item.shortcut}\r\n                      </span>\r\n                    )}\r\n                  </Button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Current Tab Info */}\r\n            <div className=\"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-lg\">\r\n              <div className=\"flex items-center gap-2\">\r\n                {currentItem && (\r\n                  <currentItem.icon\r\n                    className={`h-4 w-4 ${currentItem.color}`}\r\n                  />\r\n                )}\r\n                <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                  Currently: {currentItem?.label || 'Dashboard'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add padding for bottom navigation */}\r\n      <div className=\"h-20 lg:hidden\" />\r\n\r\n      {/* Add extra padding for tablets with smaller bottom nav */}\r\n      {isTablet && <div className=\"h-4 md:hidden\" />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MobileBottomNavigation;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\mobile\\MobileQuickActions.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'actionId' is defined but never used. Allowed unused args must match /^_/u.","line":39,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"actionId"},"fix":{"range":[908,924],"text":""},"desc":"Remove unused variable 'actionId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  useMobileOptimization,\n  useTouchOptimization,\n} from '@/hooks/useMobileOptimization';\nimport { useOfflineSync } from '@/hooks/useOfflineSync';\nimport { toast } from 'sonner';\nimport {\n  Zap,\n  ArrowRight,\n  Library,\n  BookOpen,\n  Users,\n  Camera,\n  Clock,\n  BarChart3,\n  Settings,\n  Plus,\n} from 'lucide-react';\n\ninterface QuickAction {\n  id: string;\n  label: string;\n  description: string;\n  icon: React.ComponentType<{ className?: string }>;\n  color: string;\n  bgColor: string;\n  onClick: () => void | Promise<void>;\n  badge?: number;\n  shortcut?: string;\n  requiresAuth?: boolean;\n  isPrimary?: boolean;\n}\n\ninterface MobileQuickActionsProps {\n  onActionClick?: (actionId: string) => void;\n  customActions?: QuickAction[];\n}\n\nexport const MobileQuickActions: React.FC<MobileQuickActionsProps> = ({\n  onActionClick,\n}) => {\n  const { isMobile, isTablet } = useMobileOptimization();\n  const { queueAction, isOnline } = useOfflineSync();\n  const { handleTouchStart, handleTouchEnd } = useTouchOptimization();\n  const [actionInProgress, setActionInProgress] = useState<string | null>(null);\n\n  // Default quick actions\n  const defaultActions: QuickAction[] = [\n    {\n      id: 'quick-checkout',\n      label: 'Quick Checkout',\n      description: 'Fast book checkout',\n      icon: Library,\n      color: 'text-purple-600 dark:text-purple-400',\n      bgColor: 'bg-purple-100 dark:bg-purple-900/20',\n      onClick: async () => {\n        await handleQuickCheckout();\n      },\n      isPrimary: true,\n      shortcut: '1',\n    },\n    {\n      id: 'quick-checkin',\n      label: 'Quick Check-in',\n      description: 'Fast book return',\n      icon: BookOpen,\n      color: 'text-green-600 dark:text-green-400',\n      bgColor: 'bg-green-100 dark:bg-green-900/20',\n      onClick: async () => {\n        await handleQuickCheckin();\n      },\n      shortcut: '2',\n    },\n    {\n      id: 'student-lookup',\n      label: 'Student Lookup',\n      description: 'Find student info',\n      icon: Users,\n      color: 'text-blue-600 dark:text-blue-400',\n      bgColor: 'bg-blue-100 dark:bg-blue-900/20',\n      onClick: () => {\n        // Navigate to student _search\n        window.location.hash = '#students?_search=true';\n      },\n      shortcut: '3',\n    },\n    {\n      id: 'quick-scan',\n      label: 'Quick Scan',\n      description: 'Scan barcode/QR',\n      icon: Camera,\n      color: 'text-orange-600 dark:text-orange-400',\n      bgColor: 'bg-orange-100 dark:bg-orange-900/20',\n      onClick: () => {\n        // Navigate to scanner\n        window.location.hash = '#scan';\n      },\n      isPrimary: true,\n      shortcut: '4',\n    },\n  ];\n\n  const secondaryActions: QuickAction[] = [\n    {\n      id: 'activity-log',\n      label: 'Activity Log',\n      description: 'Recent activities',\n      icon: Clock,\n      color: 'text-slate-600 dark:text-slate-400',\n      bgColor: 'bg-slate-100 dark:bg-slate-900/20',\n      onClick: () => {\n        window.location.hash = '#analytics?tab=activities';\n      },\n      shortcut: '5',\n    },\n    {\n      id: 'dashboard',\n      label: 'Dashboard',\n      description: 'Overview',\n      icon: BarChart3,\n      color: 'text-indigo-600 dark:text-indigo-400',\n      bgColor: 'bg-indigo-100 dark:bg-indigo-900/20',\n      onClick: () => {\n        window.location.hash = '#dashboard';\n      },\n      shortcut: '6',\n    },\n    {\n      id: 'settings',\n      label: 'Settings',\n      description: 'App settings',\n      icon: Settings,\n      color: 'text-gray-600 dark:text-gray-400',\n      bgColor: 'bg-gray-100 dark:bg-gray-900/20',\n      onClick: () => {\n        window.location.hash = '#settings';\n      },\n      shortcut: '7',\n    },\n    {\n      id: 'add-item',\n      label: 'Add Item',\n      description: 'Add book/student',\n      icon: Plus,\n      color: 'text-teal-600 dark:text-teal-400',\n      bgColor: 'bg-teal-100 dark:bg-teal-900/20',\n      onClick: () => {\n        toast.info('Choose what to add (book, student, equipment)');\n      },\n      shortcut: '8',\n    },\n  ];\n\n  // Quick checkout handler\n  const handleQuickCheckout = useCallback(async () => {\n    if (actionInProgress) {\n      return;\n    }\n\n    try {\n      setActionInProgress('quick-checkout');\n\n      // Simulate quick checkout flow\n      toast.info('Scanning for checkout...');\n\n      // In a real app, this would open a scanner interface\n      setTimeout(() => {\n        const mockBookId = `BOOK-${Date.now().toString(36)}`;\n        const mockStudentId = `STU-${Math.floor(Math.random() * 1000)\n          .toString()\n          .padStart(3, '0')}`;\n\n        toast.success(`Checked out ${mockBookId} to Student ${mockStudentId}`);\n\n        // Queue action if offline\n        if (!isOnline) {\n          queueAction({\n            type: 'create',\n            endpoint: '/api/activities',\n            data: {\n              action: 'checkout',\n              bookId: mockBookId,\n              studentId: mockStudentId,\n              timestamp: Date.now(),\n            },\n            maxRetries: 3,\n          });\n        }\n      }, 1500);\n    } catch (error) {\n      console.error('[MobileQuickActions] Quick checkout failed:', error);\n      toast.error('Quick checkout failed');\n    } finally {\n      setActionInProgress(null);\n    }\n  }, [actionInProgress, isOnline, queueAction]);\n\n  // Quick checkin handler\n  const handleQuickCheckin = useCallback(async () => {\n    if (actionInProgress) {\n      return;\n    }\n\n    try {\n      setActionInProgress('quick-checkin');\n\n      toast.info('Scanning for check-in...');\n\n      setTimeout(() => {\n        const mockBookId = `BOOK-${Date.now().toString(36)}`;\n\n        toast.success(`Checked in ${mockBookId}`);\n\n        // Queue action if offline\n        if (!isOnline) {\n          queueAction({\n            type: 'create',\n            endpoint: '/api/activities',\n            data: {\n              action: 'checkin',\n              bookId: mockBookId,\n              timestamp: Date.now(),\n            },\n            maxRetries: 3,\n          });\n        }\n      }, 1500);\n    } catch (error) {\n      console.error('[MobileQuickActions] Quick checkin failed:', error);\n      toast.error('Quick checkin failed');\n    } finally {\n      setActionInProgress(null);\n    }\n  }, [actionInProgress, isOnline, queueAction]);\n\n  // Handle action click\n  const handleActionClick = useCallback(\n    async (action: QuickAction) => {\n      if (actionInProgress === action.id) {\n        return;\n      }\n\n      try {\n        // Provide haptic feedback\n        if ('vibrate' in navigator) {\n          navigator.vibrate(50);\n        }\n\n        // Execute action\n        await action.onClick();\n\n        // Notify parent\n        onActionClick?.(action.id);\n      } catch (error) {\n        console.error('[MobileQuickActions] Action failed:', error);\n        toast.error(`Failed to execute ${action.label}`);\n      }\n    },\n    [actionInProgress, onActionClick]\n  );\n\n  // Don't show on desktop\n  if (!isMobile && !isTablet) {\n    return null;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Primary Actions */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <Zap className=\"h-5 w-5 text-yellow-500\" />\n            Quick Actions\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {defaultActions.map((action) => {\n              const Icon = action.icon;\n              const isLoading = actionInProgress === action.id;\n\n              return (\n                <Button\n                  key={action.id}\n                  variant=\"outline\"\n                  className={`h-auto p-4 flex flex-col items-center gap-2 rounded-xl border-2 transition-all ${\n                    action.isPrimary\n                      ? 'border-primary/20 hover:border-primary/40 hover:bg-primary/5'\n                      : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n                  }`}\n                  onClick={() => handleActionClick(action)}\n                  onTouchStart={handleTouchStart}\n                  onTouchEnd={handleTouchEnd}\n                  disabled={isLoading}\n                >\n                  <div className={`p-3 rounded-full ${action.bgColor}`}>\n                    <Icon\n                      className={`h-6 w-6 ${action.color} ${isLoading ? 'animate-pulse' : ''}`}\n                    />\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm font-medium text-slate-900 dark:text-slate-100\">\n                      {action.label}\n                    </p>\n                    <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                      {action.description}\n                    </p>\n                  </div>\n                  {action.shortcut && (\n                    <Badge\n                      variant=\"secondary\"\n                      className=\"text-[10px] px-1 py-0\"\n                    >\n                      {action.shortcut}\n                    </Badge>\n                  )}\n                  {action.badge && action.badge > 0 && (\n                    <Badge\n                      variant=\"destructive\"\n                      className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs\"\n                    >\n                      {action.badge}\n                    </Badge>\n                  )}\n                </Button>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Secondary Actions */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg\">More Actions</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2\">\n            {secondaryActions.map((action) => {\n              const Icon = action.icon;\n              const isLoading = actionInProgress === action.id;\n\n              return (\n                <Button\n                  key={action.id}\n                  variant=\"ghost\"\n                  className=\"w-full justify-between h-auto p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\n                  onClick={() => handleActionClick(action)}\n                  onTouchStart={handleTouchStart}\n                  onTouchEnd={handleTouchEnd}\n                  disabled={isLoading}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`p-2 rounded-lg ${action.bgColor}`}>\n                      <Icon className={`h-4 w-4 ${action.color}`} />\n                    </div>\n                    <div className=\"text-left\">\n                      <p className=\"text-sm font-medium text-slate-900 dark:text-slate-100\">\n                        {action.label}\n                      </p>\n                      <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n                        {action.description}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {action.shortcut && (\n                      <Badge variant=\"outline\" className=\"text-[10px]\">\n                        {action.shortcut}\n                      </Badge>\n                    )}\n                    <ArrowRight className=\"h-4 w-4 text-slate-400\" />\n                  </div>\n                </Button>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Action Status */}\n      {actionInProgress && (\n        <Card className=\"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\" />\n              <div>\n                <p className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                  Processing action...\n                </p>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  This will be synced when you're back online\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default MobileQuickActions;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\mobile\\MobileScanner.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'code' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"code"},"fix":{"range":[900,913],"text":""},"desc":"Remove unused variable 'code'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[912,926],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[926,942],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":37,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[969,982],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { useMobileOptimization } from '@/hooks/useMobileOptimization';\nimport { useOfflineSync } from '@/hooks/useOfflineSync';\nimport { toast } from 'sonner';\nimport {\n  Camera,\n  CameraOff,\n  Zap,\n  History as HistoryIcon,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  RotateCcw,\n  Flashlight,\n  FlashlightOff,\n  Keyboard,\n  X,\n  Search,\n} from 'lucide-react';\n\ninterface ScanResult {\n  id: string;\n  code: string;\n  type: 'barcode' | 'qr' | 'manual';\n  timestamp: number;\n  status: 'success' | 'error' | 'pending';\n  data?: unknown;\n  error?: string;\n}\n\ninterface MobileScannerProps {\n  onScanSuccess: (code: string, type: string, data?: unknown) => void;\n  onScanError: (error: string) => void;\n  placeholder?: string;\n  allowedTypes?: ('barcode' | 'qr' | 'manual')[];\n}\n\nexport const MobileScanner: React.FC<MobileScannerProps> = ({\n  onScanSuccess,\n  onScanError,\n  placeholder = 'Scan barcode or QR code',\n  allowedTypes = ['barcode', 'qr', 'manual'],\n}) => {\n  const { isMobile } = useMobileOptimization();\n  const { queueAction } = useOfflineSync();\n\n  // Scanner state\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanMode, setScanMode] = useState<'camera' | 'manual'>('camera');\n  const [manualInput, setManualInput] = useState('');\n  const [flashlightEnabled, setFlashlightEnabled] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n\n  // Scanner history\n  const [scanHistory, setScanHistory] = useState<ScanResult[]>([]);\n  const [currentScan, setCurrentScan] = useState<string>('');\n\n  // Camera refs\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  // Auto-focus for manual input on mobile\n  const manualInputRef = useRef<HTMLInputElement>(null);\n\n  // Initialize camera\n  const startCamera = useCallback(async () => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    try {\n      const constraints: MediaStreamConstraints = {\n        video: {\n          facingMode: isMobile ? 'environment' : 'user',\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n          // @ts-expect-error - torch is not in standard MediaTrackConstraints but supported by browsers\n          torch: flashlightEnabled,\n        },\n      };\n\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      videoRef.current.srcObject = stream;\n      streamRef.current = stream;\n      setIsScanning(true);\n\n      // Start scanning loop\n      requestAnimationFrame(scanFrame);\n    } catch (error) {\n      console.error('[MobileScanner] Camera access failed:', error);\n      toast.error('Failed to access camera');\n      setScanMode('manual');\n    }\n  }, [isMobile, flashlightEnabled]);\n\n  // Stop camera\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n    setIsScanning(false);\n  }, []);\n\n  // Toggle flashlight\n  const toggleFlashlight = useCallback(async () => {\n    if (!streamRef.current) {\n      return;\n    }\n\n    try {\n      const track = streamRef.current.getVideoTracks()[0];\n      if (!track) {\n        return;\n      }\n\n      const capabilities = track.getCapabilities() as MediaTrackCapabilities & {\n        torch?: boolean;\n      };\n\n      if (capabilities.torch) {\n        await track.applyConstraints({\n          // @ts-expect-error - torch is not in standard MediaTrackConstraints but supported by browsers\n          advanced: [{ torch: !flashlightEnabled }],\n        });\n        setFlashlightEnabled(!flashlightEnabled);\n      } else {\n        toast.error('Flashlight not available');\n      }\n    } catch (error) {\n      console.error('[MobileScanner] Flashlight toggle failed:', error);\n      toast.error('Failed to toggle flashlight');\n    }\n  }, [flashlightEnabled]);\n\n  // Scan frame for barcodes/QR codes\n  const scanFrame = useCallback(() => {\n    if (!isScanning || !videoRef.current || !canvasRef.current) {\n      return;\n    }\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n\n    if (!context || video.readyState !== 4) {\n      requestAnimationFrame(scanFrame);\n      return;\n    }\n\n    // Draw video frame to canvas\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0);\n\n    // Here you would integrate with a barcode scanning library\n    // For now, we'll simulate scanning\n    const mockScannedCode = `DEMO-${Date.now().toString(36)}`;\n\n    if (Math.random() < 0.01) {\n      // Simulate successful scan\n      handleScanResult(mockScannedCode, 'barcode');\n    }\n\n    requestAnimationFrame(scanFrame);\n  }, [isScanning]);\n\n  // Handle scan result\n  const handleScanResult = useCallback(\n    async (code: string, type: 'barcode' | 'qr' | 'manual', data?: unknown) => {\n      try {\n        // Create scan result entry\n        const result: ScanResult = {\n          id: `scan-${Date.now()}`,\n          code,\n          type,\n          timestamp: Date.now(),\n          status: 'success',\n          data,\n        };\n\n        // Add to history\n        setScanHistory((prev) => [result, ...prev.slice(0, 9)]); // Keep last 10\n\n        // Provide haptic feedback\n        if ('vibrate' in navigator) {\n          navigator.vibrate(100);\n        }\n\n        // Call success callback\n        onScanSuccess(code, type, data);\n\n        // Queue action if offline\n        if (!navigator.onLine) {\n          await queueAction({\n            type: 'create',\n            endpoint: '/api/activities',\n            data: {\n              action: 'scan',\n              code,\n              type,\n              timestamp: result.timestamp,\n              data,\n            },\n            maxRetries: 5,\n          });\n        }\n\n        // Clear current scan\n        setCurrentScan('');\n        if (scanMode === 'manual') {\n          setManualInput('');\n        }\n\n        toast.success(`Scanned: ${code}`);\n      } catch (error) {\n        console.error('[MobileScanner] Scan handling failed:', error);\n        toast.error('Failed to process scan');\n        onScanError?.('Failed to process scan');\n      }\n    },\n    [onScanSuccess, onScanError, scanMode, queueAction]\n  );\n\n  // Handle manual input\n  const handleManualSubmit = useCallback(() => {\n    if (!manualInput.trim()) {\n      return;\n    }\n\n    handleScanResult(manualInput.trim(), 'manual');\n  }, [manualInput, handleScanResult]);\n\n  // Retry failed scan\n  const retryScan = useCallback(\n    (result: ScanResult) => {\n      handleScanResult(result.code, result.type, result.data);\n    },\n    [handleScanResult]\n  );\n\n  // Clear history\n  const clearHistory = useCallback(() => {\n    setScanHistory([]);\n    toast.success('Scan history cleared');\n  }, []);\n\n  // Initialize camera on mount\n  useEffect(() => {\n    if (scanMode === 'camera' && !isScanning) {\n      startCamera();\n    }\n\n    return () => {\n      stopCamera();\n    };\n  }, [scanMode, startCamera, stopCamera, isScanning]);\n\n  // Auto-focus manual input\n  useEffect(() => {\n    if (scanMode === 'manual' && manualInputRef.current) {\n      manualInputRef.current.focus();\n    }\n  }, [scanMode]);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Scanner Header */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-lg\">Mobile Scanner</CardTitle>\n            <div className=\"flex items-center gap-2\">\n              <Badge variant={isScanning ? 'default' : 'secondary'}>\n                {isScanning ? 'Active' : 'Inactive'}\n              </Badge>\n              {scanHistory.length > 0 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setShowHistory(!showHistory)}\n                  className=\"flex items-center gap-1\"\n                >\n                  <HistoryIcon className=\"h-4 w-4\" />\n                  {scanHistory.length}\n                </Button>\n              )}\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Mode Selection */}\n          <div className=\"flex gap-2\">\n            {allowedTypes.includes('barcode') &&\n              allowedTypes.includes('qr') && (\n                <Button\n                  variant={scanMode === 'camera' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setScanMode('camera')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Camera className=\"h-4 w-4\" />\n                  Camera\n                </Button>\n              )}\n            {allowedTypes.includes('manual') && (\n              <Button\n                variant={scanMode === 'manual' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setScanMode('manual')}\n                className=\"flex items-center gap-2\"\n              >\n                <Keyboard className=\"h-4 w-4\" />\n                Manual\n              </Button>\n            )}\n          </div>\n\n          {/* Camera Scanner */}\n          {scanMode === 'camera' && (\n            <div className=\"space-y-4\">\n              <div\n                className=\"relative bg-black rounded-lg overflow-hidden\"\n                style={{ aspectRatio: '16/9' }}\n              >\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  muted\n                  className=\"w-full h-full object-cover\"\n                />\n                <canvas ref={canvasRef} className=\"hidden\" />\n\n                {/* Scan Overlay */}\n                <div className=\"absolute inset-0 pointer-events-none\">\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\" />\n                  <div className=\"absolute inset-x-4 top-1/2 -translate-y-1/2\">\n                    <div className=\"border-2 border-green-400 rounded-lg aspect-square max-w-xs mx-auto animate-pulse\" />\n                  </div>\n                  <div className=\"absolute bottom-4 left-4 right-4 text-center\">\n                    <p className=\"text-white text-sm font-medium\">\n                      Position code within frame\n                    </p>\n                  </div>\n                </div>\n\n                {/* Camera Controls */}\n                <div className=\"absolute top-4 right-4 flex flex-col gap-2\">\n                  {isMobile && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={toggleFlashlight}\n                      className=\"bg-black/50 border-white/20 text-white hover:bg-black/70\"\n                    >\n                      {flashlightEnabled ? (\n                        <FlashlightOff className=\"h-4 w-4\" />\n                      ) : (\n                        <Flashlight className=\"h-4 w-4\" />\n                      )}\n                    </Button>\n                  )}\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={isScanning ? stopCamera : startCamera}\n                    className=\"bg-black/50 border-white/20 text-white hover:bg-black/70\"\n                  >\n                    {isScanning ? (\n                      <CameraOff className=\"h-4 w-4\" />\n                    ) : (\n                      <Camera className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n\n              {/* Current Scan Display */}\n              {currentScan && (\n                <div className=\"p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg\">\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n                    <span className=\"text-sm font-medium text-green-800 dark:text-green-200\">\n                      Last Scan: {currentScan}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Manual Input */}\n          {scanMode === 'manual' && (\n            <div className=\"space-y-4\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  ref={manualInputRef}\n                  type=\"text\"\n                  placeholder={placeholder}\n                  value={manualInput}\n                  onChange={(e) => setManualInput(e.target.value)}\n                  onKeyDown={(e) => e.key === 'Enter' && handleManualSubmit()}\n                  className=\"pl-10 pr-12 text-base\"\n                  autoComplete=\"off\"\n                  autoCorrect=\"off\"\n                  autoCapitalize=\"off\"\n                  spellCheck=\"false\"\n                />\n                {manualInput && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setManualInput('')}\n                    className=\"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                )}\n              </div>\n\n              <Button\n                onClick={handleManualSubmit}\n                disabled={!manualInput.trim()}\n                className=\"w-full\"\n                size=\"lg\"\n              >\n                <Zap className=\"h-4 w-4 mr-2\" />\n                Submit Code\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Scan History */}\n      {showHistory && scanHistory.length > 0 && (\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">Scan History</CardTitle>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearHistory}\n                className=\"text-red-600 dark:text-red-400\"\n              >\n                Clear\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              {scanHistory.map((result) => (\n                <div\n                  key={result.id}\n                  className={`p-3 rounded-lg border ${\n                    result.status === 'success'\n                      ? 'bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800'\n                      : result.status === 'error'\n                        ? 'bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800'\n                        : 'bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      {result.status === 'success' && (\n                        <CheckCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n                      )}\n                      {result.status === 'error' && (\n                        <XCircle className=\"h-4 w-4 text-red-600 dark:text-red-400\" />\n                      )}\n                      {result.status === 'pending' && (\n                        <AlertCircle className=\"h-4 w-4 text-yellow-600 dark:text-yellow-400\" />\n                      )}\n                      <div>\n                        <p className=\"text-sm font-medium\">{result.code}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {result.type} {' '}\n                          {new Date(result.timestamp).toLocaleTimeString()}\n                        </p>\n                      </div>\n                    </div>\n                    {result.status === 'error' && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => retryScan(result)}\n                        className=\"text-blue-600 dark:text-blue-400\"\n                      >\n                        <RotateCcw className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default MobileScanner;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\mobile\\PWAInstallPrompt.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":18,"suggestions":[{"fix":{"range":[2424,2472],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":108,"endColumn":20,"suggestions":[{"fix":{"range":[3345,3410],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useMobileOptimization } from '@/hooks/useMobileOptimization';\nimport { toast } from 'sonner';\nimport { Download, X, Zap, Shield, Wifi, Check, Info } from 'lucide-react';\n\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  prompt(): Promise<void>;\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n}\n\ninterface PWAInstallPromptProps {\n  onInstall?: () => void;\n  onDismiss?: () => void;\n}\n\nexport const PWAInstallPrompt: React.FC<PWAInstallPromptProps> = ({\n  onInstall,\n  onDismiss,\n}) => {\n  const { isMobile } = useMobileOptimization();\n  const [deferredPrompt, setDeferredPrompt] =\n    useState<BeforeInstallPromptEvent | null>(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [dismissed, setDismissed] = useState(false);\n  const [installStatus, setInstallStatus] = useState<\n    'idle' | 'installing' | 'success' | 'error'\n  >('idle');\n\n  // Check if app is already installed\n  const checkIfInstalled = useCallback(() => {\n    // Check if running in standalone mode\n    const isStandalone =\n      window.matchMedia('(display-mode: standalone)').matches ||\n      (window.navigator as any).standalone === true ||\n      document.referrer.includes('android-app://');\n\n    // Check if app is installed (different methods for different platforms)\n    const isInInstalledState =\n      isStandalone || localStorage.getItem('pwa-installed') === 'true';\n\n    setIsInstalled(isInInstalledState);\n    return isInInstalledState;\n  }, []);\n\n  // Handle beforeinstallprompt event\n  const handleBeforeInstallPrompt = useCallback(\n    (e: Event) => {\n      // Prevent the mini-infobar from appearing on mobile\n      e.preventDefault();\n\n      const promptEvent = e as BeforeInstallPromptEvent;\n      setDeferredPrompt(promptEvent);\n\n      // Only show prompt if not dismissed and not installed\n      if (!dismissed && !checkIfInstalled()) {\n        // Show prompt after a delay\n        setTimeout(() => {\n          setShowPrompt(true);\n        }, 3000);\n      }\n    },\n    [dismissed, checkIfInstalled]\n  );\n\n  // Handle app installed event\n  const handleAppInstalled = useCallback(() => {\n    console.debug('[PWAInstall] App was installed');\n    setIsInstalled(true);\n    localStorage.setItem('pwa-installed', 'true');\n    setShowPrompt(false);\n    setInstallStatus('success');\n    toast.success('App installed successfully!');\n    onInstall?.();\n\n    // Hide success message after delay\n    setTimeout(() => {\n      setInstallStatus('idle');\n    }, 3000);\n  }, [onInstall]);\n\n  // Install the PWA\n  const handleInstall = useCallback(async () => {\n    if (!deferredPrompt) {\n      // Fallback to manual instructions\n      setShowPrompt(false);\n      return;\n    }\n\n    try {\n      setInstallStatus('installing');\n      if (typeof deferredPrompt.prompt !== 'function') {\n        setInstallStatus('idle');\n        setShowPrompt(false);\n        return;\n      }\n      await deferredPrompt.prompt();\n\n      // Wait for the user to respond to the prompt\n      const { outcome } = await deferredPrompt.userChoice;\n\n      console.debug(`[PWAInstall] User ${outcome} the install prompt`);\n\n      if (outcome === 'accepted') {\n        setInstallStatus('success');\n        toast.success('Installing app...');\n        onInstall?.();\n      } else {\n        setInstallStatus('idle');\n        toast.info('Install cancelled');\n      }\n\n      // Clear the deferred prompt\n      setDeferredPrompt(null);\n      setShowPrompt(false);\n    } catch (error) {\n      console.error('[PWAInstall] Install failed:', error);\n      setInstallStatus('error');\n      toast.error('Failed to install app');\n\n      setTimeout(() => {\n        setInstallStatus('idle');\n      }, 3000);\n    }\n  }, [deferredPrompt, onInstall]);\n\n  // Dismiss the prompt\n  const handleDismiss = useCallback(() => {\n    setShowPrompt(false);\n    setDismissed(true);\n    localStorage.setItem('pwa-install-dismissed', 'true');\n    onDismiss?.();\n  }, [onDismiss]);\n\n  // Get platform-specific install instructions\n  const getInstallInstructions = useCallback(() => {\n    const userAgent = navigator.userAgent.toLowerCase();\n\n    if (userAgent.includes('iphone') || userAgent.includes('ipad')) {\n      return {\n        title: 'Install on iOS',\n        steps: [\n          'Tap the Share button at the bottom',\n          'Scroll down and tap \"Add to Home Screen\"',\n          'Tap \"Add\" to install the app',\n        ],\n        icon: '',\n      };\n    }\n\n    if (userAgent.includes('android')) {\n      return {\n        title: 'Install on Android',\n        steps: [\n          'Tap the menu button () in Chrome',\n          'Tap \"Add to Home screen\"',\n          'Tap \"Add\" to install the app',\n        ],\n        icon: '',\n      };\n    }\n\n    return {\n      title: 'Install App',\n      steps: [\n        'Look for the install icon in your browser',\n        'Click to add to your device',\n        'Launch from your home screen',\n      ],\n      icon: '',\n    };\n  }, []);\n\n  // Check installation status on mount\n  useEffect(() => {\n    checkIfInstalled();\n\n    // Check if user previously dismissed the prompt\n    const wasDismissed =\n      localStorage.getItem('pwa-install-dismissed') === 'true';\n    setDismissed(wasDismissed);\n  }, [checkIfInstalled]);\n\n  // Set up event listeners\n  useEffect(() => {\n    if (!isMobile) {\n      return;\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    return () => {\n      window.removeEventListener(\n        'beforeinstallprompt',\n        handleBeforeInstallPrompt\n      );\n      window.removeEventListener('appinstalled', handleAppInstalled);\n    };\n  }, [isMobile, handleBeforeInstallPrompt, handleAppInstalled]);\n\n  // Don't show if not mobile, already installed, or dismissed\n  if (!isMobile || isInstalled || dismissed || !showPrompt) {\n    return null;\n  }\n\n  const instructions = getInstallInstructions();\n\n  return (\n    <Card className=\"fixed bottom-4 left-4 right-4 z-50 border-2 border-blue-200 dark:border-blue-800 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 shadow-xl\">\n      <CardContent className=\"p-4\">\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-full\">\n                <Download className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">\n                  Install CLMS App\n                </h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Get the full experience on your device\n                </p>\n              </div>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleDismiss}\n              className=\"h-8 w-8 p-0\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Features */}\n          <div className=\"grid grid-cols-3 gap-2\">\n            <div className=\"flex flex-col items-center gap-1 p-2 bg-white/50 dark:bg-slate-800/50 rounded-lg\">\n              <Zap className=\"h-4 w-4 text-yellow-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Fast\n              </span>\n            </div>\n            <div className=\"flex flex-col items-center gap-1 p-2 bg-white/50 dark:bg-slate-800/50 rounded-lg\">\n              <Wifi className=\"h-4 w-4 text-green-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Offline\n              </span>\n            </div>\n            <div className=\"flex flex-col items-center gap-1 p-2 bg-white/50 dark:bg-slate-800/50 rounded-lg\">\n              <Shield className=\"h-4 w-4 text-blue-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Secure\n              </span>\n            </div>\n          </div>\n\n          {/* Install Button */}\n          {deferredPrompt ? (\n            <Button\n              onClick={handleInstall}\n              disabled={installStatus === 'installing'}\n              className=\"w-full\"\n              size=\"lg\"\n            >\n              {installStatus === 'installing' ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                  Installing...\n                </>\n              ) : installStatus === 'success' ? (\n                <>\n                  <Check className=\"h-4 w-4 mr-2\" />\n                  Installed!\n                </>\n              ) : (\n                <>\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  Install App\n                </>\n              )}\n            </Button>\n          ) : (\n            <div className=\"space-y-3\">\n              {/* Manual Instructions */}\n              <div className=\"bg-white/50 dark:bg-slate-800/50 rounded-lg p-3\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <span className=\"text-lg\">{instructions.icon}</span>\n                  <h4 className=\"font-medium text-slate-900 dark:text-slate-100\">\n                    {instructions.title}\n                  </h4>\n                </div>\n                <ol className=\"space-y-1\">\n                  {instructions.steps.map((step, index) => (\n                    <li\n                      key={index}\n                      className=\"text-xs text-slate-600 dark:text-slate-400 flex items-start gap-2\"\n                    >\n                      <span className=\"text-blue-500 font-medium\">\n                        {index + 1}.\n                      </span>\n                      {step}\n                    </li>\n                  ))}\n                </ol>\n              </div>\n\n              <Button\n                variant=\"outline\"\n                onClick={handleDismiss}\n                className=\"w-full\"\n              >\n                Maybe Later\n              </Button>\n            </div>\n          )}\n\n          {/* Install Status Messages */}\n          {installStatus === 'success' && (\n            <div className=\"flex items-center gap-2 p-2 bg-green-100 dark:bg-green-900/20 rounded-lg\">\n              <Check className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n              <span className=\"text-sm text-green-800 dark:text-green-200\">\n                App installed successfully! Check your home screen.\n              </span>\n            </div>\n          )}\n\n          {installStatus === 'error' && (\n            <div className=\"flex items-center gap-2 p-2 bg-red-100 dark:bg-red-900/20 rounded-lg\">\n              <Info className=\"h-4 w-4 text-red-600 dark:text-red-400\" />\n              <span className=\"text-sm text-red-800 dark:text-red-200\">\n                Installation failed. Please try again or follow the manual\n                instructions.\n              </span>\n            </div>\n          )}\n\n          {/* Benefits */}\n          <div className=\"grid grid-cols-2 gap-2 pt-2 border-t border-slate-200 dark:border-slate-700\">\n            <div className=\"flex items-center gap-2\">\n              <Check className=\"h-3 w-3 text-green-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Works offline\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Check className=\"h-3 w-3 text-green-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Full-screen mode\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Check className=\"h-3 w-3 text-green-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Push notifications\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Check className=\"h-3 w-3 text-green-500\" />\n              <span className=\"text-xs text-slate-600 dark:text-slate-400\">\n                Faster loading\n              </span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PWAInstallPrompt;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\patterns\\CompoundComponent.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[304,317],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":43,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[910,923],"text":""},"desc":"Remove unused variable 'value'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\n  createContext,\n  useContext,\n  type ReactNode,\n  type ComponentType,\n} from 'react';\nimport { cn } from '@/lib/utils';\n\n/**\n * Compound component pattern for building flexible, composable UI components\n */\n\ninterface CompoundComponentContextValue {\n  value?: string;\n  onValueChange?: (value: string) => void;\n  disabled?: boolean;\n  error?: string;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nconst CompoundComponentContext = createContext<CompoundComponentContextValue>(\n  {}\n);\n\n/**\n * Hook to access compound component context\n */\nexport function useCompoundComponent() {\n  const context = useContext(CompoundComponentContext);\n  if (!context) {\n    throw new Error(\n      'Compound components must be used within a CompoundComponent.Provider'\n    );\n  }\n  return context;\n}\n\n/**\n * Base compound component interface\n */\nexport interface CompoundComponentProps {\n  value?: string;\n  onValueChange?: (value: string) => void;\n  disabled?: boolean;\n  error?: string;\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n  children: ReactNode;\n}\n\n/**\n * Compound component provider\n */\nexport function CompoundComponentProvider({\n  value,\n  onValueChange,\n  disabled = false,\n  error,\n  size = 'md',\n  className,\n  children,\n}: CompoundComponentProps) {\n  const contextValue: CompoundComponentContextValue = {\n    ...(value !== undefined && { value }),\n    ...(onValueChange && { onValueChange }),\n    ...(disabled !== undefined && { disabled }),\n    ...(error !== undefined && { error }),\n    ...(size && { size }),\n  };\n\n  return (\n    <CompoundComponentContext.Provider value={contextValue}>\n      <div className={cn('compound-component', `size-${size}`, className)}>\n        {children}\n      </div>\n    </CompoundComponentContext.Provider>\n  );\n}\n\n/**\n * Sub-component interface\n */\nexport interface SubComponentProps {\n  className?: string;\n  children?: ReactNode;\n}\n\n/**\n * Higher-order component to create sub-components\n */\nexport function createSubComponent<T extends SubComponentProps>(\n  displayName: string,\n  defaultClasses: string = ''\n): ComponentType<T> {\n  const SubComponent = ({ className, children, ...props }: T) => {\n    const { disabled, error, size } = useCompoundComponent();\n\n    const combinedClasses = cn(\n      defaultClasses,\n      `sub-component-${displayName.toLowerCase()}`,\n      disabled && 'disabled',\n      error && 'error',\n      size && `size-${size}`,\n      className\n    );\n\n    return (\n      <div className={combinedClasses} {...props}>\n        {children}\n      </div>\n    );\n  };\n\n  SubComponent.displayName = `CompoundComponent.${displayName}`;\n  return SubComponent as ComponentType<T>;\n}\n\n/**\n * Interactive sub-component (like tabs, buttons, etc.)\n */\nexport interface InteractiveSubComponentProps extends SubComponentProps {\n  value: string;\n  active?: boolean;\n}\n\nexport function createInteractiveSubComponent<\n  T extends InteractiveSubComponentProps,\n>(displayName: string, defaultClasses: string = ''): ComponentType<T> {\n  const InteractiveSubComponent = ({\n    value,\n    active = false,\n    className,\n    children,\n    ...props\n  }: T) => {\n    const { onValueChange, disabled, size } = useCompoundComponent();\n\n    const handleClick = () => {\n      if (!disabled && onValueChange) {\n        onValueChange(value);\n      }\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n      if (!disabled && (e.key === 'Enter' || e.key === ' ') && onValueChange) {\n        e.preventDefault();\n        onValueChange(value);\n      }\n    };\n\n    const combinedClasses = cn(\n      defaultClasses,\n      `interactive-sub-component-${displayName.toLowerCase()}`,\n      active && 'active',\n      disabled && 'disabled',\n      size && `size-${size}`,\n      'cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500',\n      className\n    );\n\n    return (\n      <div\n        className={combinedClasses}\n        role=\"button\"\n        tabIndex={disabled ? -1 : 0}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        aria-pressed={active}\n        aria-disabled={disabled}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  };\n\n  InteractiveSubComponent.displayName = `CompoundComponent.${displayName}`;\n  return InteractiveSubComponent as ComponentType<T>;\n}\n\n/**\n * Content sub-component (conditional rendering)\n */\nexport interface ContentSubComponentProps extends SubComponentProps {\n  when?: string | boolean;\n  show?: boolean;\n}\n\nexport function createContentSubComponent<T extends ContentSubComponentProps>(\n  displayName: string,\n  defaultClasses: string = ''\n): ComponentType<T> {\n  const ContentSubComponent = ({\n    when,\n    show = true,\n    className,\n    children,\n    ...props\n  }: T) => {\n    const { value } = useCompoundComponent();\n\n    const shouldShow =\n      show &&\n      (when === undefined ||\n        (typeof when === 'boolean' && when) ||\n        (typeof when === 'string' && when === value));\n\n    if (!shouldShow) {\n      return null;\n    }\n\n    const combinedClasses = cn(\n      defaultClasses,\n      `content-sub-component-${displayName.toLowerCase()}`,\n      className\n    );\n\n    return (\n      <div className={combinedClasses} {...props}>\n        {children}\n      </div>\n    );\n  };\n\n  ContentSubComponent.displayName = `CompoundComponent.${displayName}`;\n  return ContentSubComponent as ComponentType<T>;\n}\n\n/**\n * Utility to build compound components\n */\nexport function createCompoundComponent<\n  T extends Record<string, ComponentType<any>>,\n>(\n  name: string,\n  subComponents: T,\n  Provider: ComponentType<CompoundComponentProps> = CompoundComponentProvider\n) {\n  const Compound = Object.assign(Provider, subComponents);\n  Compound.displayName = name;\n\n  return Compound as typeof Compound & T;\n}\n\n/**\n * Example: Creating a Tab component using the compound pattern\n */\nexport const Tab = createCompoundComponent('Tab', {\n  Root: CompoundComponentProvider,\n\n  List: createSubComponent('TabList', 'flex border-b border-gray-200'),\n\n  Trigger: createInteractiveSubComponent(\n    'TabTrigger',\n    'px-4 py-2 border-b-2 border-transparent hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'\n  ),\n\n  Content: createContentSubComponent('TabContent', 'p-4 focus:outline-none'),\n});\n\n/**\n * Example: Creating an Accordion component using the compound pattern\n */\nexport const Accordion = createCompoundComponent('Accordion', {\n  Root: CompoundComponentProvider,\n\n  Item: createSubComponent(\n    'AccordionItem',\n    'border border-gray-200 rounded-lg mb-2'\n  ),\n\n  Trigger: createInteractiveSubComponent(\n    'AccordionTrigger',\n    'w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500'\n  ),\n\n  Content: createContentSubComponent(\n    'AccordionContent',\n    'px-4 py-3 border-t border-gray-200'\n  ),\n});\n\n/**\n * Example: Creating a Card component using the compound pattern\n */\nexport const Card = createCompoundComponent('Card', {\n  Root: createSubComponent(\n    'CardRoot',\n    'bg-white border border-gray-200 rounded-lg shadow-sm'\n  ),\n\n  Header: createSubComponent(\n    'CardHeader',\n    'px-6 py-4 border-b border-gray-200'\n  ),\n\n  Title: createSubComponent('CardTitle', 'text-lg font-semibold text-gray-900'),\n\n  Description: createSubComponent(\n    'CardDescription',\n    'text-sm text-gray-600 mt-1'\n  ),\n\n  Content: createSubComponent('CardContent', 'px-6 py-4'),\n\n  Footer: createSubComponent(\n    'CardFooter',\n    'px-6 py-4 border-t border-gray-200 bg-gray-50'\n  ),\n});\n\nexport default CompoundComponentProvider;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\patterns\\RenderProps.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":11,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[233,240],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'state' is defined but never used. Allowed unused args must match /^_/u.","line":18,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[377,386],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'actions' is defined but never used. Allowed unused args must match /^_/u.","line":18,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"actions"},"fix":{"range":[385,397],"text":""},"desc":"Remove unused variable 'actions'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":25,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[553,560],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[591,598],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[769,776],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[817,824],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":76,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[1816,1924],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":82,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[1952,2060],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":136,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":141,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[3168,3278],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'on' is defined but never used. Allowed unused args must match /^_/u.","line":139,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"on"},"fix":{"range":[3229,3240],"text":""},"desc":"Remove unused variable 'on'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":142,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[3306,3416],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'on' is defined but never used. Allowed unused args must match /^_/u.","line":145,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":145,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"on"},"fix":{"range":[3367,3378],"text":""},"desc":"Remove unused variable 'on'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":188,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":196,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[4216,4416],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'count' is defined but never used. Allowed unused args must match /^_/u.","line":192,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":192,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"count"},"fix":{"range":[4312,4325],"text":""},"desc":"Remove unused variable 'count'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":197,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[4444,4644],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'count' is defined but never used. Allowed unused args must match /^_/u.","line":201,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":201,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"count"},"fix":{"range":[4540,4553],"text":""},"desc":"Remove unused variable 'count'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":272,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":287,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[6209,6794],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'callback' is defined but never used. Allowed unused args must match /^_/u.","line":274,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[6246,6285],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":274,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6257,6265],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":274,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6264,6279],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":275,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[6308,6354],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":275,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6320,6328],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":275,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6327,6342],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'callback' is defined but never used. Allowed unused args must match /^_/u.","line":277,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[6387,6443],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'accumulator' is defined but never used. Allowed unused args must match /^_/u.","line":277,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"accumulator"},"fix":{"range":[6398,6413],"text":""},"desc":"Remove unused variable 'accumulator'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":277,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6412,6421],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":277,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6421,6436],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'initialValue' is defined but never used. Allowed unused args must match /^_/u.","line":278,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":278,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"initialValue"},"fix":{"range":[6442,6465],"text":""},"desc":"Remove unused variable 'initialValue'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":280,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[6489,6535],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":280,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6501,6509],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":280,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6508,6523],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":281,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":281,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[6566,6612],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":281,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":281,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6578,6586],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":281,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":281,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6585,6600],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[6638,6684],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6650,6658],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6657,6672],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":288,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[6822,7407],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'callback' is defined but never used. Allowed unused args must match /^_/u.","line":290,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":290,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[6859,6898],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":290,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":290,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6870,6878],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":290,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":290,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6877,6892],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":291,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[6921,6967],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":291,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[6933,6941],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":291,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[6940,6955],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'callback' is defined but never used. Allowed unused args must match /^_/u.","line":293,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"callback"},"fix":{"range":[7000,7056],"text":""},"desc":"Remove unused variable 'callback'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'accumulator' is defined but never used. Allowed unused args must match /^_/u.","line":293,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"accumulator"},"fix":{"range":[7011,7026],"text":""},"desc":"Remove unused variable 'accumulator'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":293,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7025,7034],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":293,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7034,7049],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'initialValue' is defined but never used. Allowed unused args must match /^_/u.","line":294,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":294,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"initialValue"},"fix":{"range":[7055,7078],"text":""},"desc":"Remove unused variable 'initialValue'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":296,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":296,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[7102,7148],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":296,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":296,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7114,7122],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":296,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":296,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7121,7136],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":297,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[7179,7225],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":297,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7191,7199],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":297,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7198,7213],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'predicate' is defined but never used. Allowed unused args must match /^_/u.","line":298,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":298,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"predicate"},"fix":{"range":[7251,7297],"text":""},"desc":"Remove unused variable 'predicate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":298,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":298,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7263,7271],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":298,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":298,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7270,7285],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":312,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":312,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7578,7586],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":312,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":312,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7585,7600],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":317,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7716,7724],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":317,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7723,7738],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'accumulator' is defined but never used. Allowed unused args must match /^_/u.","line":324,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":324,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"accumulator"},"fix":{"range":[7879,7894],"text":""},"desc":"Remove unused variable 'accumulator'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":324,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":324,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[7893,7902],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":324,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":324,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[7902,7917],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":331,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":331,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[8074,8082],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":331,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":331,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[8081,8096],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":337,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":337,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[8234,8242],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":337,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":337,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[8241,8256],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":343,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":343,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[8389,8397],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":343,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":343,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[8396,8411],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":371,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":385,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[9036,9555],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":377,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":377,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9231,9240],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":377,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":377,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[9239,9252],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":378,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":378,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9297,9306],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":378,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":378,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[9305,9320],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":379,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":379,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9367,9376],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'touched' is defined but never used. Allowed unused args must match /^_/u.","line":379,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":379,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"touched"},"fix":{"range":[9375,9394],"text":""},"desc":"Remove unused variable 'touched'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'onSubmit' is defined but never used. Allowed unused args must match /^_/u.","line":383,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":383,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"onSubmit"},"fix":{"range":[9483,9512],"text":""},"desc":"Remove unused variable 'onSubmit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'values' is defined but never used. Allowed unused args must match /^_/u.","line":383,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":383,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[9494,9503],"text":""},"desc":"Remove unused variable 'values'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":384,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":384,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[9523,9541],"text":""},"desc":"Remove unused variable 'e'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":386,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":400,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[9583,10102],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":392,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":392,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9778,9787],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":392,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":392,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[9786,9799],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":393,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":393,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9844,9853],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":393,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":393,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[9852,9867],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'field' is defined but never used. Allowed unused args must match /^_/u.","line":394,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":394,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"field"},"fix":{"range":[9914,9923],"text":""},"desc":"Remove unused variable 'field'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'touched' is defined but never used. Allowed unused args must match /^_/u.","line":394,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":394,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"touched"},"fix":{"range":[9922,9941],"text":""},"desc":"Remove unused variable 'touched'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'onSubmit' is defined but never used. Allowed unused args must match /^_/u.","line":398,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":398,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"onSubmit"},"fix":{"range":[10030,10059],"text":""},"desc":"Remove unused variable 'onSubmit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'values' is defined but never used. Allowed unused args must match /^_/u.","line":398,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":398,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[10041,10050],"text":""},"desc":"Remove unused variable 'values'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":399,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":399,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[10070,10088],"text":""},"desc":"Remove unused variable 'e'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'values' is defined but never used. Allowed unused args must match /^_/u.","line":401,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":401,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[10132,10141],"text":""},"desc":"Remove unused variable 'values'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'values' is defined but never used. Allowed unused args must match /^_/u.","line":453,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":453,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[11618,11627],"text":""},"desc":"Remove unused variable 'values'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":508,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":508,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[13074,13078],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":517,"column":6,"nodeType":"Identifier","messageId":"unusedVar","endLine":517,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[13292,13299],"text":""},"desc":"Remove unused variable 'data'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":96,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { type ReactNode, type ComponentType } from 'react';\n\n/**\n * Render prop patterns for flexible component composition\n */\n\n/**\n * Basic render prop interface\n */\nexport interface RenderProps<T = unknown> {\n  children: ((data: T) => ReactNode) | ReactNode;\n}\n\n/**\n * State render prop interface\n */\nexport interface StateRenderProps<T, S = unknown> {\n  children: ((state: S, actions: T) => ReactNode) | ReactNode;\n}\n\n/**\n * Enhanced render prop with multiple render functions\n */\nexport interface MultiRenderProps<T = unknown> {\n  render?: (data: T) => ReactNode;\n  children?: ((data: T) => ReactNode) | ReactNode;\n  component?: ComponentType<T>;\n}\n\n/**\n * Data provider with render prop\n */\nexport interface DataProviderProps<T> {\n  data: T;\n  children: ((data: T) => ReactNode) | ReactNode;\n  render?: (data: T) => ReactNode;\n  component?: ComponentType<T>;\n}\n\nexport function DataProvider<T>({\n  data,\n  children,\n  render,\n  component: Component,\n}: DataProviderProps<T>) {\n  const renderFunction =\n    render || (typeof children === 'function' ? children : undefined);\n\n  // Only use Component prop, don't try to cast children to ComponentType\n  const ChildComponent = Component;\n\n  if (renderFunction) {\n    return React.createElement(React.Fragment, null, renderFunction(data));\n  }\n\n  if (ChildComponent) {\n    // Ensure data is treated as props object\n    const props =\n      typeof data === 'object' && data !== null ? data : ({ data } as any);\n    return React.createElement(ChildComponent as any, props);\n  }\n\n  if (typeof children !== 'function') {\n    return React.createElement(React.Fragment, null, children);\n  }\n\n  return null;\n}\n\n/**\n * Async data provider with render props\n */\nexport interface AsyncDataProviderProps<T> {\n  fetcher: () => Promise<T>;\n  initialData?: T;\n  children: (data: {\n    data: T | undefined;\n    loading: boolean;\n    error: Error | null;\n    refetch: () => void;\n  }) => ReactNode;\n  render?: (data: {\n    data: T | undefined;\n    loading: boolean;\n    error: Error | null;\n    refetch: () => void;\n  }) => ReactNode;\n}\n\nexport function AsyncDataProvider<T>({\n  fetcher,\n  initialData,\n  children,\n  render,\n}: AsyncDataProviderProps<T>) {\n  const [data, setData] = React.useState<T | undefined>(initialData);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const fetchData = React.useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await fetcher();\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Unknown error'));\n    } finally {\n      setLoading(false);\n    }\n  }, [fetcher]);\n\n  React.useEffect(() => {\n    if (initialData === undefined) {\n      fetchData();\n    }\n  }, [fetchData, initialData]);\n\n  const renderData = {\n    data,\n    loading,\n    error,\n    refetch: fetchData,\n  };\n\n  const renderFunction = render || children;\n  return React.createElement(React.Fragment, null, renderFunction(renderData));\n}\n\n/**\n * Toggle provider with render props\n */\nexport interface ToggleProviderProps {\n  initialOn?: boolean;\n  children: (data: {\n    on: boolean;\n    toggle: () => void;\n    setOn: (on: boolean) => void;\n    setOff: () => void;\n  }) => ReactNode;\n  render?: (data: {\n    on: boolean;\n    toggle: () => void;\n    setOn: (on: boolean) => void;\n    setOff: () => void;\n  }) => ReactNode;\n}\n\nexport function ToggleProvider({\n  initialOn = false,\n  children,\n  render,\n}: ToggleProviderProps) {\n  const [on, setOn] = React.useState(initialOn);\n\n  const toggle = React.useCallback(() => {\n    setOn((prev) => !prev);\n  }, []);\n\n  const setOnState = React.useCallback((newOn: boolean) => {\n    setOn(newOn);\n  }, []);\n\n  const setOff = React.useCallback(() => {\n    setOn(false);\n  }, []);\n\n  const renderData = {\n    on,\n    toggle,\n    setOn: setOnState,\n    setOff,\n  };\n\n  const renderFunction = render || children;\n  return React.createElement(React.Fragment, null, renderFunction(renderData));\n}\n\n/**\n * Counter provider with render props\n */\nexport interface CounterProviderProps {\n  initialCount?: number;\n  step?: number;\n  min?: number;\n  max?: number;\n  children: (data: {\n    count: number;\n    increment: () => void;\n    decrement: () => void;\n    setCount: (count: number) => void;\n    reset: () => void;\n    canIncrement: boolean;\n    canDecrement: boolean;\n  }) => ReactNode;\n  render?: (data: {\n    count: number;\n    increment: () => void;\n    decrement: () => void;\n    setCount: (count: number) => void;\n    reset: () => void;\n    canIncrement: boolean;\n    canDecrement: boolean;\n  }) => ReactNode;\n}\n\nexport function CounterProvider({\n  initialCount = 0,\n  step = 1,\n  min,\n  max,\n  children,\n  render,\n}: CounterProviderProps) {\n  const [count, setCount] = React.useState(initialCount);\n\n  const increment = React.useCallback(() => {\n    setCount((prev) => {\n      const newValue = prev + step;\n      return max !== undefined ? Math.min(newValue, max) : newValue;\n    });\n  }, [step, max]);\n\n  const decrement = React.useCallback(() => {\n    setCount((prev) => {\n      const newValue = prev - step;\n      return min !== undefined ? Math.max(newValue, min) : newValue;\n    });\n  }, [step, min]);\n\n  const setCountValue = React.useCallback(\n    (newCount: number) => {\n      let validatedCount = newCount;\n      if (min !== undefined) {\n        validatedCount = Math.max(validatedCount, min);\n      }\n      if (max !== undefined) {\n        validatedCount = Math.min(validatedCount, max);\n      }\n      setCount(validatedCount);\n    },\n    [min, max]\n  );\n\n  const reset = React.useCallback(() => {\n    setCount(initialCount);\n  }, [initialCount]);\n\n  const canIncrement = max === undefined || count < max;\n  const canDecrement = min === undefined || count > min;\n\n  const renderData = {\n    count,\n    increment,\n    decrement,\n    setCount: setCountValue,\n    reset,\n    canIncrement,\n    canDecrement,\n  };\n\n  const renderFunction = render || children;\n  return React.createElement(React.Fragment, null, renderFunction(renderData));\n}\n\n/**\n * List provider with render props\n */\nexport interface ListProviderProps<T> {\n  items: T[];\n  children: (data: {\n    items: T[];\n    map: <U>(callback: (item: T, index: number) => U) => U[];\n    filter: (predicate: (item: T, index: number) => boolean) => T[];\n    reduce: <U>(\n      callback: (accumulator: U, item: T, index: number) => U,\n      initialValue: U\n    ) => U;\n    find: (predicate: (item: T, index: number) => boolean) => T | undefined;\n    some: (predicate: (item: T, index: number) => boolean) => boolean;\n    every: (predicate: (item: T, index: number) => boolean) => boolean;\n    length: number;\n    isEmpty: boolean;\n    first: T | undefined;\n    last: T | undefined;\n  }) => ReactNode;\n  render?: (data: {\n    items: T[];\n    map: <U>(callback: (item: T, index: number) => U) => U[];\n    filter: (predicate: (item: T, index: number) => boolean) => T[];\n    reduce: <U>(\n      callback: (accumulator: U, item: T, index: number) => U,\n      initialValue: U\n    ) => U;\n    find: (predicate: (item: T, index: number) => boolean) => T | undefined;\n    some: (predicate: (item: T, index: number) => boolean) => boolean;\n    every: (predicate: (item: T, index: number) => boolean) => boolean;\n    length: number;\n    isEmpty: boolean;\n    first: T | undefined;\n    last: T | undefined;\n  }) => ReactNode;\n}\n\nexport function ListProvider<T>({\n  items,\n  children,\n  render,\n}: ListProviderProps<T>) {\n  const mapCallback = React.useCallback(\n    <U>(callback: (item: T, index: number) => U): U[] => items.map(callback),\n    [items]\n  );\n\n  const filterCallback = React.useCallback(\n    (predicate: (item: T, index: number) => boolean): T[] =>\n      items.filter(predicate),\n    [items]\n  );\n\n  const reduceCallback = React.useCallback(\n    <U>(\n      callback: (accumulator: U, item: T, index: number) => U,\n      initialValue: U\n    ): U => items.reduce(callback, initialValue),\n    [items]\n  );\n\n  const findCallback = React.useCallback(\n    (predicate: (item: T, index: number) => boolean): T | undefined =>\n      items.find(predicate),\n    [items]\n  );\n\n  const someCallback = React.useCallback(\n    (predicate: (item: T, index: number) => boolean): boolean =>\n      items.some(predicate),\n    [items]\n  );\n\n  const everyCallback = React.useCallback(\n    (predicate: (item: T, index: number) => boolean): boolean =>\n      items.every(predicate),\n    [items]\n  );\n\n  const renderData = {\n    items,\n    map: mapCallback,\n    filter: filterCallback,\n    reduce: reduceCallback,\n    find: findCallback,\n    some: someCallback,\n    every: everyCallback,\n    length: items.length,\n    isEmpty: items.length === 0,\n    first: items[0],\n    last: items[items.length - 1],\n  };\n\n  const renderFunction = render || children;\n  return React.createElement(React.Fragment, null, renderFunction(renderData));\n}\n\n/**\n * Form provider with render props\n */\nexport interface FormProviderProps<T> {\n  initialValues: T;\n  children: (data: {\n    values: T;\n    errors: Partial<Record<keyof T, string>>;\n    touched: Partial<Record<keyof T, boolean>>;\n    isValid: boolean;\n    isDirty: boolean;\n    setValue: <K extends keyof T>(field: K, value: T[K]) => void;\n    setError: <K extends keyof T>(field: K, error: string) => void;\n    setTouched: <K extends keyof T>(field: K, touched?: boolean) => void;\n    validate: () => boolean;\n    reset: () => void;\n    handleSubmit: (\n      onSubmit: (values: T) => void\n    ) => (e: React.FormEvent) => void;\n  }) => ReactNode;\n  render?: (data: {\n    values: T;\n    errors: Partial<Record<keyof T, string>>;\n    touched: Partial<Record<keyof T, boolean>>;\n    isValid: boolean;\n    isDirty: boolean;\n    setValue: <K extends keyof T>(field: K, value: T[K]) => void;\n    setError: <K extends keyof T>(field: K, error: string) => void;\n    setTouched: <K extends keyof T>(field: K, touched?: boolean) => void;\n    validate: () => boolean;\n    reset: () => void;\n    handleSubmit: (\n      onSubmit: (values: T) => void\n    ) => (e: React.FormEvent) => void;\n  }) => ReactNode;\n  validate?: (values: T) => Partial<Record<keyof T, string>>;\n}\n\nexport function FormProvider<T extends Record<string, any>>({\n  initialValues,\n  children,\n  render,\n  validate,\n}: FormProviderProps<T>) {\n  const [values, setValues] = React.useState<T>(initialValues);\n  const [errors, setErrors] = React.useState<Partial<Record<keyof T, string>>>(\n    {}\n  );\n  const [touched, setTouched] = React.useState<\n    Partial<Record<keyof T, boolean>>\n  >({});\n\n  const setValueCallback = React.useCallback(\n    <K extends keyof T>(field: K, value: T[K]) => {\n      setValues((prev) => ({ ...prev, [field]: value }));\n      setTouched((prev) => ({ ...prev, [field]: true }));\n    },\n    []\n  );\n\n  const setErrorCallback = React.useCallback(\n    <K extends keyof T>(field: K, error: string) => {\n      setErrors((prev) => ({ ...prev, [field]: error }));\n    },\n    []\n  );\n\n  const setTouchedFieldCallback = React.useCallback(\n    <K extends keyof T>(field: K, touchedValue: boolean = true) => {\n      setTouched((prev) => ({ ...prev, [field]: touchedValue }));\n    },\n    []\n  );\n\n  const validateFormCallback = React.useCallback(() => {\n    const newErrors = validate ? validate(values) : {};\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [values, validate]);\n\n  const resetCallback = React.useCallback(() => {\n    setValues(initialValues);\n    setErrors({});\n    setTouched({});\n  }, [initialValues]);\n\n  const handleSubmitCallback = React.useCallback(\n    (onSubmit: (values: T) => void) => {\n      return (e: React.FormEvent) => {\n        e.preventDefault();\n        if (validateFormCallback()) {\n          onSubmit(values);\n        }\n      };\n    },\n    [values, validateFormCallback]\n  );\n\n  const isValid = Object.keys(errors).length === 0;\n  const isDirty = JSON.stringify(values) !== JSON.stringify(initialValues);\n\n  const renderData = {\n    values,\n    errors,\n    touched,\n    isValid,\n    isDirty,\n    setValue: setValueCallback,\n    setError: setErrorCallback,\n    setTouched: setTouchedFieldCallback,\n    validate: validateFormCallback,\n    reset: resetCallback,\n    handleSubmit: handleSubmitCallback,\n  };\n\n  const renderFunction = render || children;\n  return React.createElement(React.Fragment, null, renderFunction(renderData));\n}\n\n/**\n * Higher-order component that converts a component to use render props\n */\nexport function withRenderProps<T extends Record<string, any>>(\n  Component: ComponentType<T>,\n  propName: string = 'children'\n) {\n  return function WithRenderProps(\n    props: Omit<T, typeof propName> & { [key: string]: any }\n  ) {\n    const { [propName]: children, ...rest } = props;\n\n    if (typeof children === 'function') {\n      return React.createElement(React.Fragment, null, children(rest as T));\n    }\n\n    return React.createElement(Component, rest as T);\n  };\n}\n\n/**\n * Utility to determine if a prop is a render function\n */\nexport function isRenderFunction(prop: any): prop is (...args: any[]) => any {\n  return typeof prop === 'function';\n}\n\n/**\n * Utility to get the render function from props\n */\nexport function getRenderFunction<T = unknown>(\n  props: RenderProps<T> | MultiRenderProps<T>\n): ((data: T) => ReactNode) | null {\n  if ('render' in props && typeof props.render === 'function') {\n    return props.render;\n  }\n\n  if ('children' in props && typeof props.children === 'function') {\n    return props.children;\n  }\n\n  return null;\n}\n\nexport default DataProvider;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\Image.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":190,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":190,"endColumn":26,"suggestions":[{"fix":{"range":[5159,5225],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\n  useState,\n  useRef,\n  useEffect,\n  forwardRef,\n  type ComponentType,\n} from 'react';\nimport OptimizedImage from './OptimizedImage';\nimport { imageOptimizationService } from '@/services/imageOptimizationService';\nimport {\n  generateResponsiveSizes,\n  generateOptimizedImageUrl,\n  generateBlurPlaceholder,\n  preloadCriticalImages,\n  getImagePriority,\n  createPictureSources,\n  DEFAULT_IMAGE_CONFIG,\n} from '@/utils/imageUtils';\n\ninterface ImageProps {\n  src: string;\n  alt: string;\n  useCase?:\n    | 'AVATAR'\n    | 'STUDENT_PHOTO'\n    | 'BOOK_COVER'\n    | 'EQUIPMENT'\n    | 'BARCODE'\n    | 'BACKGROUND';\n  size?: 'small' | 'medium' | 'large';\n  width?: number;\n  height?: number;\n  className?: string;\n  priority?: boolean;\n  position?: 'above-fold' | 'below-fold' | 'hidden';\n  quality?: number;\n  format?: 'webp' | 'avif' | 'png' | 'jpg';\n  lazy?: boolean;\n  placeholder?: 'blur' | 'solid' | 'gradient' | 'none';\n  aspectRatio?: number;\n  objectFit?: 'cover' | 'contain' | 'fill' | 'none' | 'scale-down';\n  onLoad?: () => void;\n  onError?: () => void;\n  style?: React.CSSProperties;\n  sizes?: string;\n  srcSet?: string;\n  // Advanced options\n  enableResponsive?: boolean;\n  breakpoints?: {\n    mobile?: { width?: number; height?: number };\n    tablet?: { width?: number; height?: number };\n    desktop?: { width?: number; height?: number };\n  };\n  // Performance monitoring\n  trackPerformance?: boolean;\n  // Fallback options\n  fallbackSrc?: string;\n  retryCount?: number;\n  maxRetries?: number;\n}\n\nconst PerformanceImage: ComponentType<ImageProps> = forwardRef<\n  HTMLDivElement,\n  ImageProps\n>(\n  (\n    {\n      src,\n      alt,\n      useCase,\n      size = 'medium',\n      width,\n      height,\n      className = '',\n      priority = false,\n      position = 'below-fold',\n      quality = DEFAULT_IMAGE_CONFIG.quality,\n      format,\n      lazy = true,\n      placeholder = 'blur',\n      aspectRatio,\n      objectFit = 'cover',\n      onLoad,\n      onError,\n      style,\n      sizes,\n      srcSet,\n      enableResponsive = true,\n      breakpoints,\n      trackPerformance = true,\n      fallbackSrc,\n      maxRetries = 3,\n    },\n    ref\n  ) => {\n    const [imageState, setImageState] = useState({\n      isLoading: true,\n      isLoaded: false,\n      hasError: false,\n      currentSrc: src,\n      retryCount: 0,\n    });\n\n    const [blurPlaceholder, setBlurPlaceholder] = useState<string>('');\n    const [_performanceMetrics, setPerformanceMetrics] =\n      useState<unknown>(null);\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const imageRef = useRef<HTMLImageElement>(null);\n\n    // Generate optimized image URL\n    const optimizedSrc = React.useMemo(() => {\n      if (useCase) {\n        return generateOptimizedImageUrl(src, useCase, size, quality);\n      }\n\n      return imageOptimizationService.generateOptimizedUrl(src, {\n        quality,\n        format: format || imageOptimizationService.getOptimalFormat(),\n        ...(width !== undefined ? { width } : {}),\n        ...(height !== undefined ? { height } : {}),\n      });\n    }, [src, useCase, size, width, height, quality, format]);\n\n    // Generate responsive sizes\n    const responsiveSizes = React.useMemo(() => {\n      if (sizes) {\n        return sizes;\n      }\n      if (enableResponsive) {\n        return generateResponsiveSizes(size);\n      }\n      return undefined;\n    }, [sizes, enableResponsive, size]);\n\n    // Generate srcSet\n    const generatedSrcSet = React.useMemo(() => {\n      if (srcSet) {\n        return srcSet;\n      }\n      if (useCase) {\n        return imageOptimizationService.generateSrcSet(optimizedSrc, {\n          quality,\n          format: format || imageOptimizationService.getOptimalFormat(),\n        });\n      }\n      return undefined;\n    }, [srcSet, useCase, optimizedSrc, quality, format]);\n\n    // Generate blur placeholder\n    useEffect(() => {\n      if (placeholder === 'blur' && !blurPlaceholder) {\n        generateBlurPlaceholder(optimizedSrc)\n          .then(setBlurPlaceholder)\n          .catch(() => {\n            // Fallback to solid placeholder\n            setBlurPlaceholder(\n              imageOptimizationService.generatePlaceholder(\n                width || 300,\n                height || 200\n              )\n            );\n          });\n      }\n    }, [placeholder, optimizedSrc, width, height, blurPlaceholder]);\n\n    // Preload priority images\n    useEffect(() => {\n      if (priority && optimizedSrc) {\n        preloadCriticalImages([optimizedSrc], 'high');\n      }\n    }, [priority, optimizedSrc]);\n\n    // Track performance\n    useEffect(() => {\n      if (trackPerformance && !imageState.isLoaded && !imageState.hasError) {\n        const startTime = performance.now();\n\n        const handleLoad = () => {\n          const loadTime = performance.now() - startTime;\n          setPerformanceMetrics({\n            loadTime: Math.round(loadTime),\n            format: format || imageOptimizationService.getOptimalFormat(),\n            src: optimizedSrc,\n            timestamp: new Date().toISOString(),\n          });\n\n          // Log performance in development\n          if (process.env.NODE_ENV === 'development') {\n            console.debug(`Image loaded: ${alt} in ${loadTime.toFixed(2)}ms`);\n          }\n        };\n\n        const img = new window.Image();\n        img.onload = handleLoad;\n        img.onerror = () =>\n          console.warn('Failed to load image for performance tracking');\n        img.src = optimizedSrc;\n      }\n    }, [\n      trackPerformance,\n      imageState.isLoaded,\n      imageState.hasError,\n      alt,\n      optimizedSrc,\n      format,\n    ]);\n\n    // Handle image load\n    const handleLoad = () => {\n      setImageState((prev) => ({\n        ...prev,\n        isLoading: false,\n        isLoaded: true,\n      }));\n      onLoad?.();\n    };\n\n    // Handle image error\n    const handleError = () => {\n      const shouldRetry = imageState.retryCount < maxRetries;\n\n      if (shouldRetry && fallbackSrc && imageState.retryCount === 0) {\n        // Try fallback source (already validated as non-null by the if condition)\n        setImageState((prev) => ({\n          ...prev,\n          currentSrc: fallbackSrc,\n          retryCount: prev.retryCount + 1,\n        }));\n      } else if (shouldRetry) {\n        // Retry the same image\n        setTimeout(\n          () => {\n            setImageState((prev) => ({\n              ...prev,\n              retryCount: prev.retryCount + 1,\n            }));\n          },\n          1000 * Math.pow(2, imageState.retryCount)\n        ); // Exponential backoff\n      } else {\n        // Final error state\n        setImageState((prev) => ({\n          ...prev,\n          isLoading: false,\n          hasError: true,\n        }));\n        onError?.();\n      }\n    };\n\n    // Reset state when src changes\n    useEffect(() => {\n      setImageState({\n        isLoading: true,\n        isLoaded: false,\n        hasError: false,\n        currentSrc: src,\n        retryCount: 0,\n      });\n      setPerformanceMetrics(null);\n    }, [src]);\n\n    // Calculate fetch priority\n    const fetchPriority = getImagePriority(position);\n\n    // Generate picture sources for responsive images\n    const pictureSources = React.useMemo(() => {\n      if (!enableResponsive || !breakpoints) {\n        return [];\n      }\n      return createPictureSources(optimizedSrc, breakpoints);\n    }, [enableResponsive, breakpoints, optimizedSrc]);\n\n    // Render responsive picture element\n    if (enableResponsive && pictureSources.length > 0) {\n      return (\n        <div\n          ref={ref || containerRef}\n          className={`relative ${className}`}\n          style={style}\n        >\n          <picture className=\"w-full h-full\">\n            {pictureSources.map((source, index) => (\n              <source\n                key={index}\n                srcSet={source.srcSet}\n                media={source.media}\n                type={source.type}\n              />\n            ))}\n            <OptimizedImage\n              ref={imageRef}\n              src={imageState.currentSrc}\n              alt={alt}\n              width={width}\n              height={height}\n              quality={quality}\n              format={format}\n              sizes={responsiveSizes}\n              srcSet={generatedSrcSet}\n              onLoad={handleLoad}\n              onError={handleError}\n              placeholder={placeholder === 'blur' ? blurPlaceholder : undefined}\n              aspectRatio={aspectRatio}\n              objectFit={objectFit}\n              loading={priority ? 'eager' : lazy ? 'lazy' : 'eager'}\n              fetchPriority={fetchPriority}\n              className=\"w-full h-full\"\n            />\n          </picture>\n        </div>\n      );\n    }\n\n    // Render simple optimized image\n    return (\n      <div\n        ref={ref || containerRef}\n        className={`relative ${className}`}\n        style={style}\n      >\n        <OptimizedImage\n          ref={imageRef}\n          src={imageState.currentSrc}\n          alt={alt}\n          width={width ?? undefined}\n          height={height ?? undefined}\n          quality={quality ?? undefined}\n          format={format ?? undefined}\n          sizes={responsiveSizes ?? undefined}\n          srcSet={generatedSrcSet ?? undefined}\n          onLoad={handleLoad}\n          onError={handleError}\n          placeholder={placeholder === 'blur' ? blurPlaceholder : undefined}\n          aspectRatio={aspectRatio ?? undefined}\n          objectFit={objectFit ?? undefined}\n          loading={priority ? 'eager' : lazy ? 'lazy' : 'eager'}\n          fetchPriority={fetchPriority ?? undefined}\n          className=\"w-full h-full\"\n        />\n      </div>\n    );\n  }\n);\n\nPerformanceImage.displayName = 'PerformanceImage';\n\nexport default PerformanceImage;\n\n// Specialized components for common use cases\nexport const AvatarImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => <PerformanceImage {...props} useCase=\"AVATAR\" />;\n\nexport const StudentPhotoImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => <PerformanceImage {...props} useCase=\"STUDENT_PHOTO\" />;\n\nexport const BookCoverImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => <PerformanceImage {...props} useCase=\"BOOK_COVER\" />;\n\nexport const EquipmentImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => <PerformanceImage {...props} useCase=\"EQUIPMENT\" />;\n\nexport const BarcodeImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => (\n  <PerformanceImage {...props} useCase=\"BARCODE\" lazy={false} priority={true} />\n);\n\nexport const BackgroundImage: ComponentType<\n  Omit<ImageProps, 'useCase' | 'size'>\n> = (props) => (\n  <PerformanceImage\n    {...props}\n    useCase=\"BACKGROUND\"\n    lazy={false}\n    priority={props.priority || false}\n  />\n);\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\ImagePerformanceMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\LazyLoad.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[500,512],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":147,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":479,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":479,"endColumn":22,"suggestions":[{"fix":{"range":[13653,13876],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":503,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":503,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[14298,14306],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":503,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":503,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[14305,14320],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\n  Suspense,\n  lazy,\n  memo,\n  type ComponentType,\n  type ReactNode,\n} from 'react';\nimport { Loader2, AlertCircle, Wifi, WifiOff } from 'lucide-react';\n\n// Lazy loading component states\ntype LoadingState = 'idle' | 'loading' | 'success' | 'error' | 'retry';\n\ninterface LazyLoadProps {\n  loader?: ReactNode;\n  fallback?: ReactNode;\n  errorFallback?: ReactNode;\n  delay?: number;\n  retryCount?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  onRetry?: () => void;\n  onError?: (error: Error) => void;\n  onLoad?: () => void;\n  prefetch?: boolean;\n  threshold?: number;\n  rootMargin?: string;\n  trigger?: boolean;\n}\n\ninterface LoadingIndicatorProps {\n  size?: 'sm' | 'md' | 'lg';\n  message?: string;\n  showSpinner?: boolean;\n  skeleton?: boolean;\n}\n\ninterface ErrorFallbackProps {\n  error: Error;\n  retryCount: number;\n  onRetry: () => void;\n  maxRetries: number;\n  component?: string;\n}\n\n// Loading indicator component\nconst LoadingIndicator = memo(\n  ({\n    size = 'md',\n    message = 'Loading...',\n    showSpinner = true,\n    skeleton = false,\n  }: LoadingIndicatorProps) => {\n    if (skeleton) {\n      return (\n        <div className=\"animate-pulse\">\n          <div className=\"bg-slate-200 dark:bg-slate-700 rounded-lg h-32 w-full mb-2\"></div>\n          <div className=\"bg-slate-200 dark:bg-slate-700 rounded h-4 w-3/4 mb-2\"></div>\n          <div className=\"bg-slate-200 dark:bg-slate-700 rounded h-4 w-1/2\"></div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n        {showSpinner && (\n          <Loader2\n            className={`animate-spin ${\n              size === 'sm' ? 'h-4 w-4' : size === 'lg' ? 'h-8 w-8' : 'h-6 w-6'\n            } text-primary mb-4`}\n          />\n        )}\n        <p className=\"text-sm text-muted-foreground font-medium\">{message}</p>\n      </div>\n    );\n  }\n);\n\n// Error fallback component\nconst ErrorFallback = memo(\n  ({\n    error,\n    retryCount,\n    onRetry,\n    maxRetries,\n    component = 'Component',\n  }: ErrorFallbackProps) => {\n    const canRetry = retryCount < maxRetries;\n\n    return (\n      <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n        <div className=\"rounded-full bg-red-100 dark:bg-red-900/20 p-3 mb-4\">\n          <AlertCircle className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n          Failed to Load {component}\n        </h3>\n        <p className=\"text-sm text-muted-foreground mb-4 max-w-md\">\n          {error.message || 'An error occurred while loading this component.'}\n        </p>\n        {canRetry && (\n          <div className=\"space-y-2\">\n            <p className=\"text-xs text-muted-foreground\">\n              Retry {retryCount} of {maxRetries}\n            </p>\n            <button\n              onClick={onRetry}\n              className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n            >\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              Try Again\n            </button>\n          </div>\n        )}\n        {!canRetry && (\n          <p className=\"text-xs text-red-600 dark:text-red-400\">\n            Maximum retries reached. Please refresh the page.\n          </p>\n        )}\n      </div>\n    );\n  }\n);\n\n// Network detection component\nconst NetworkStatus = memo(() => {\n  const [isOnline, setIsOnline] = React.useState(navigator.onLine);\n  const [hasConnection, setHasConnection] = React.useState(true);\n\n  React.useEffect(() => {\n    const handleOnline = () => {\n      setIsOnline(true);\n      setHasConnection(true);\n    };\n\n    const handleOffline = () => {\n      setIsOnline(false);\n    };\n\n    const checkConnection = async () => {\n      try {\n        const response = await fetch(`${import.meta.env.VITE_API_URL}/health`, {\n          method: 'HEAD',\n          cache: 'no-store',\n          signal: AbortSignal.timeout(3000),\n        });\n        setHasConnection(response.ok);\n      } catch (error) {\n        setHasConnection(false);\n      }\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Check connection every 30 seconds\n    const interval = setInterval(checkConnection, 30000);\n    checkConnection();\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <div className=\"flex items-center gap-2 px-3 py-1 text-sm rounded-md border\">\n      {isOnline && hasConnection ? (\n        <>\n          <Wifi className=\"h-3 w-3 text-green-500\" />\n          <span className=\"text-green-600 dark:text-green-400\">Online</span>\n        </>\n      ) : (\n        <>\n          <WifiOff className=\"h-3 w-3 text-red-500\" />\n          <span className=\"text-red-600 dark:text-red-400\">\n            {!isOnline ? 'Offline' : 'No Connection'}\n          </span>\n        </>\n      )}\n    </div>\n  );\n});\n\n// Advanced lazy load component with retry and prefetch\nexport const createLazyLoad = <\n  T extends ComponentType<Record<string, unknown>>,\n>(\n  importFunc: () => Promise<{ default: T }>,\n  options: Partial<LazyLoadProps> = {}\n) => {\n  const {\n    loader: _loader = <LoadingIndicator />,\n    fallback = <LoadingIndicator />,\n    delay = 200,\n    maxRetries = 3,\n    onRetry,\n    onError,\n    onLoad,\n    prefetch = false,\n    threshold = 0.1,\n    rootMargin = '50px',\n    trigger = true,\n  } = options;\n\n  const LazyComponent = lazy(importFunc);\n\n  return memo((props: Record<string, unknown>) => {\n    const [loadingState, setLoadingState] =\n      React.useState<LoadingState>('idle');\n    const [currentRetryCount, setCurrentRetryCount] = React.useState(0);\n\n    React.useCallback(() => {\n      setCurrentRetryCount((prev) => prev + 1);\n      setLoadingState('retry');\n      onRetry?.();\n\n      // Reset loading state after delay\n      setTimeout(() => {\n        setLoadingState('loading');\n      }, 100);\n    }, []); // onRetry is a prop and doesn't need to be in deps\n\n    const handleError = React.useCallback(\n      (error: Error) => {\n        setLoadingState('error');\n        onError?.(error);\n        console.error('Lazy loading error:', error);\n      },\n      [] // onError is a prop and doesn't need to be in deps\n    );\n\n    const handleLoad = React.useCallback(() => {\n      setLoadingState('success');\n      onLoad?.();\n    }, []); // onLoad is a prop and doesn't need to be in deps\n\n    // Component implementation with Intersection Observer for prefetching\n    const observerRef = React.useRef<IntersectionObserver | null>(null);\n    const elementRef = React.useRef<HTMLDivElement>(null);\n\n    React.useEffect(() => {\n      if (prefetch && elementRef.current && trigger) {\n        observerRef.current = new IntersectionObserver(\n          (entries) => {\n            entries.forEach((entry) => {\n              if (entry.isIntersecting) {\n                // Prefetch the component\n                importFunc();\n                observerRef.current?.disconnect();\n              }\n            });\n          },\n          { threshold, rootMargin }\n        );\n\n        observerRef.current.observe(elementRef.current);\n      }\n\n      return () => {\n        observerRef.current?.disconnect();\n      };\n      // Props like prefetch, trigger, threshold, rootMargin, importFunc don't need to be deps\n      // Dependencies intentionally excluded for performance\n    }, []);\n\n    // Reset state when component changes\n    React.useEffect(() => {\n      setCurrentRetryCount(0);\n      setLoadingState('loading');\n      // importFunc is a prop and doesn't need to be in deps\n      // Dependencies intentionally excluded for performance\n    }, []);\n\n    if (loadingState === 'retry' && currentRetryCount > 0) {\n      return (\n        <div>\n          <LoadingIndicator\n            message={`Retrying... (${currentRetryCount}/${maxRetries})`}\n            showSpinner\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div ref={elementRef}>\n        <Suspense\n          fallback={\n            <div style={{ minHeight: delay ? '0px' : '200px' }}>\n              {delay === 0 ? (\n                fallback\n              ) : (\n                <div\n                  style={{ opacity: 0, transition: 'opacity 0.3s ease-in-out' }}\n                >\n                  {fallback}\n                </div>\n              )}\n            </div>\n          }\n        >\n          {React.createElement(\n            LazyComponent as unknown as ComponentType<Record<string, unknown>>,\n            {\n              ...props,\n              onError: handleError,\n              onLoad: handleLoad,\n            }\n          )}\n        </Suspense>\n      </div>\n    );\n  });\n};\n\n// Preload component for critical resources\nexport const usePreloadComponent = <\n  T extends ComponentType<Record<string, unknown>>,\n>(\n  importFunc: () => Promise<{ default: T }>\n) => {\n  React.useEffect(() => {\n    importFunc();\n  }, [importFunc]);\n};\n\n// Intersection Observer based lazy loading for images\nexport const LazyImage = memo(\n  ({\n    src,\n    alt,\n    className,\n    placeholder,\n    onLoad,\n    onError,\n    ...props\n  }: {\n    src: string;\n    alt: string;\n    className?: string;\n    placeholder?: string;\n    onLoad?: () => void;\n    onError?: () => void;\n  } & React.ImgHTMLAttributes<HTMLImageElement>) => {\n    const [isLoaded, setIsLoaded] = React.useState(false);\n    const [isInView, setIsInView] = React.useState(false);\n    const [hasError, setHasError] = React.useState(false);\n    const imgRef = React.useRef<HTMLImageElement>(null);\n\n    React.useEffect(() => {\n      const observer = new IntersectionObserver(\n        ([entry]) => {\n          if (entry && entry.isIntersecting) {\n            setIsInView(true);\n          }\n        },\n        { threshold: 0.1 }\n      );\n\n      if (imgRef.current) {\n        observer.observe(imgRef.current);\n      }\n\n      return () => observer.disconnect();\n    }, []);\n\n    React.useEffect(() => {\n      if (isInView && src && !isLoaded && !hasError) {\n        if (imgRef.current) {\n          imgRef.current.src = src;\n        }\n      }\n    }, [isInView, src, isLoaded, hasError]);\n\n    return (\n      <div className={`relative overflow-hidden ${className || ''}`}>\n        {!isLoaded && (\n          <div className=\"absolute inset-0 bg-slate-200 dark:bg-slate-700 animate-pulse flex items-center justify-center\">\n            {placeholder ? (\n              <img\n                src={placeholder}\n                alt={alt}\n                className=\"w-full h-full object-cover opacity-50\"\n              />\n            ) : (\n              <div className=\"w-full h-full bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-700 to-slate-800\" />\n            )}\n          </div>\n        )}\n        <img\n          ref={imgRef}\n          alt={alt}\n          className={`w-full h-full object-cover transition-opacity duration-300 ${\n            isLoaded ? 'opacity-100' : 'opacity-0'\n          } ${hasError ? 'opacity-50' : ''}`}\n          onLoad={() => {\n            setIsLoaded(true);\n            onLoad?.();\n          }}\n          onError={() => {\n            setHasError(true);\n            onError?.();\n          }}\n          {...props}\n        />\n      </div>\n    );\n  }\n);\n\nLazyImage.displayName = 'LazyImage';\n\n// Bundle analysis and reporting\nexport const BundleAnalyzer = memo(() => {\n  const [bundleSize, setBundleSize] = React.useState(0);\n  const [loadTime, setLoadTime] = React.useState(0);\n  const [chunkCount, setChunkCount] = React.useState(0);\n\n  React.useEffect(() => {\n    // Analyze bundle size if performance API is available\n    if ('performance' in window && 'memory' in performance) {\n      const analyzeBundle = () => {\n        const navigation = performance.getEntriesByType(\n          'navigation'\n        )[0] as PerformanceNavigationTiming;\n        if (navigation) {\n          setLoadTime(\n            Math.round(navigation.loadEventEnd - navigation.loadEventStart)\n          );\n        }\n\n        // Get resource timing info for chunks\n        const resources = performance.getEntriesByType(\n          'resource'\n        ) as PerformanceResourceTiming[];\n        const jsResources = resources.filter((r) => r.name.endsWith('.js'));\n        setChunkCount(jsResources.length);\n\n        // Calculate approximate bundle size\n        const totalSize = jsResources.reduce((sum, resource) => {\n          return sum + (resource.transferSize || 0);\n        }, 0);\n        setBundleSize(totalSize);\n      };\n\n      // Analyze after initial load\n      setTimeout(analyzeBundle, 1000);\n    }\n  }, []);\n\n  return (\n    <div className=\"hidden lg:block fixed bottom-4 right-4 bg-black/80 text-white p-3 rounded-lg text-xs\">\n      <div className=\"space-y-1\">\n        <div>Bundle: {(bundleSize / 1024).toFixed(1)}KB</div>\n        <div>Chunks: {chunkCount}</div>\n        <div>Load: {loadTime}ms</div>\n      </div>\n    </div>\n  );\n});\n\n// Performance monitoring HOC\nexport const withPerformanceMonitoring = <P extends object>(\n  Component: ComponentType<P>\n) => {\n  const MonitoredComponent = memo((props: P) => {\n    const [renderCount, setRenderCount] = React.useState(0);\n    const [lastRenderTime, setLastRenderTime] = React.useState<number>(\n      Date.now()\n    );\n\n    React.useEffect(() => {\n      const now = Date.now();\n      const timeSinceLastRender = now - lastRenderTime;\n\n      // Log performance metrics in development\n      if (process.env.NODE_ENV === 'development') {\n        console.debug(`Component ${Component.displayName} rendered:`, {\n          renderCount: renderCount + 1,\n          timeSinceLastRender: `${timeSinceLastRender}ms`,\n          props: Object.keys(props).slice(0, 3),\n        });\n      }\n\n      setRenderCount((prev) => prev + 1);\n      setLastRenderTime(now);\n    });\n\n    return <Component {...props} />;\n  });\n\n  MonitoredComponent.displayName = `withPerformanceMonitoring(${Component.displayName || Component.name})`;\n\n  return MonitoredComponent;\n};\n\n// Virtual list for large datasets\ninterface VirtualListProps<T> {\n  items: T[];\n  itemHeight: number;\n  containerHeight: number;\n  renderItem: (item: T, index: number) => ReactNode;\n  overscan?: number;\n  className?: string;\n}\n\nexport const VirtualList = <T,>({\n  items,\n  itemHeight,\n  containerHeight,\n  renderItem,\n  overscan = 5,\n  className,\n}: VirtualListProps<T>) => {\n  const [scrollTop, setScrollTop] = React.useState(0);\n  const [startIndex, setStartIndex] = React.useState(0);\n  const [endIndex, setEndIndex] = React.useState(0);\n\n  const containerRef = React.useRef<HTMLDivElement>(null);\n\n  // Calculate visible range\n  React.useEffect(() => {\n    const start = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n    const end = Math.min(\n      items.length - 1,\n      Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan\n    );\n\n    setStartIndex(start);\n    setEndIndex(end);\n  }, [scrollTop, containerHeight, itemHeight, items.length, overscan]);\n\n  const handleScroll = React.useCallback((e: React.UIEvent<HTMLDivElement>) => {\n    setScrollTop(e.currentTarget.scrollTop);\n  }, []);\n\n  const visibleItems = items.slice(startIndex, endIndex + 1);\n\n  return (\n    <div\n      ref={containerRef}\n      className={`overflow-auto ${className || ''}`}\n      style={{ height: containerHeight }}\n      onScroll={handleScroll}\n    >\n      <div style={{ height: startIndex * itemHeight, position: 'relative' }}>\n        {visibleItems.map((item, index) => (\n          <div\n            key={startIndex + index}\n            style={{\n              position: 'absolute',\n              top: (startIndex + index) * itemHeight,\n              height: itemHeight,\n              width: '100%',\n            }}\n          >\n            {renderItem(item, startIndex + index)}\n          </div>\n        ))}\n      </div>\n      {items.length > endIndex + 1 && (\n        <div style={{ height: (items.length - endIndex - 1) * itemHeight }}>\n          {/* Spacer for remaining items */}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Preload critical components\nexport const usePreloadCriticalComponents = () => {\n  usePreloadComponent(() => import('@/components/dashboard/DashboardOverview'));\n  usePreloadComponent(() => import('@/components/dashboard/StudentManagement'));\n  usePreloadComponent(\n    () => import('@/components/dashboard/EquipmentDashboard')\n  );\n};\n\nexport default {\n  createLazyLoad,\n  usePreloadComponent,\n  LazyImage,\n  BundleAnalyzer,\n  withPerformanceMonitoring,\n  VirtualList,\n  usePreloadCriticalComponents,\n  LoadingIndicator,\n  ErrorFallback,\n  NetworkStatus,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\OptimizedImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\OptimizedList.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[540,548],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[547,562],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'style' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"style"},"fix":{"range":[562,590],"text":""},"desc":"Remove unused variable 'style'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":24,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[620,628],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":24,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[627,642],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[778,791],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'scrollInfo' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"scrollInfo"},"fix":{"range":[819,910],"text":""},"desc":"Remove unused variable 'scrollInfo'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":63,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[1595,1603],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":64,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[1602,1624],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'style' is defined but never used. Allowed unused args must match /^_/u.","line":65,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"style"},"fix":{"range":[1624,1659],"text":""},"desc":"Remove unused variable 'style'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'query' is defined but never used. Allowed unused args must match /^_/u.","line":104,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[2699,2712],"text":""},"desc":"Remove unused variable 'query'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":105,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[2735,2748],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'direction' is defined but never used. Allowed unused args must match /^_/u.","line":105,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"direction"},"fix":{"range":[2747,2774],"text":""},"desc":"Remove unused variable 'direction'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":106,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[2799,2812],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":106,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[2811,2827],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":302,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":302,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[8643,8656],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":453,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":453,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[12783,12796],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":455,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":455,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[12850,12864],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":455,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":455,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[12863,12878],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'info' is defined but never used. Allowed unused args must match /^_/u.","line":457,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":460,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"info"},"fix":{"range":[12934,13025],"text":""},"desc":"Remove unused variable 'info'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":469,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":469,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[13225,13238],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\r\n  memo,\r\n  useMemo,\r\n  useCallback,\r\n  useState,\r\n  useRef,\r\n  useEffect,\r\n  type ComponentType,\r\n  type ReactNode,\r\n  type Key,\r\n} from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Search, Filter, ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\n// Types\r\ninterface OptimizedListProps<T> {\r\n  items: T[];\r\n  itemHeight: number;\r\n  height: number;\r\n  width?: number | string;\r\n  renderItem: (item: T, index: number, style: React.CSSProperties) => ReactNode;\r\n  itemKey?: (item: T, index: number) => Key;\r\n  className?: string;\r\n  overscanCount?: number;\r\n  estimatedItemSize?: number;\r\n  variableSize?: boolean;\r\n  getItemSize?: (index: number) => number;\r\n  onScroll?: (scrollInfo: {\r\n    scrollOffset: number;\r\n    scrollDirection: 'forward' | 'backward';\r\n  }) => void;\r\n  loadingIndicator?: ReactNode;\r\n  emptyState?: ReactNode;\r\n  searchPlaceholder?: string;\r\n  searchable?: boolean;\r\n  sortable?: boolean;\r\n  sortOptions?: Array<{\r\n    key: keyof T;\r\n    label: string;\r\n    direction?: 'asc' | 'desc';\r\n  }>;\r\n  filterable?: boolean;\r\n  filterOptions?: Array<{\r\n    key: keyof T;\r\n    label: string;\r\n    options: Array<{ value: unknown; label: string }>;\r\n  }>;\r\n  infiniteScroll?: boolean;\r\n  hasNextPage?: boolean;\r\n  isNextPageLoading?: boolean;\r\n  loadNextPage?: () => void;\r\n  itemCount?: number;\r\n}\r\n\r\ninterface ListRowProps<T> {\r\n  index: number;\r\n  style: React.CSSProperties;\r\n  data: {\r\n    items: T[];\r\n    renderItem: (\r\n      item: T,\r\n      index: number,\r\n      style: React.CSSProperties\r\n    ) => ReactNode;\r\n  };\r\n}\r\n\r\n// Memoized list row component\r\nconst ListRow = memo(<T,>({ index, style, data }: ListRowProps<T>) => {\r\n  const { items, renderItem } = data;\r\n  const item = items[index];\r\n\r\n  if (!item) {\r\n    return (\r\n      <div style={style} className=\"flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{renderItem(item, index, style)}</>;\r\n}) as ComponentType<ListRowProps<unknown>>;\r\n\r\nListRow.displayName = 'ListRow';\r\n\r\n// _Search and Filter Component\r\ninterface SearchFilterProps<T> {\r\n  searchable?: boolean;\r\n  sortable?: boolean;\r\n  filterable?: boolean;\r\n  searchPlaceholder?: string | undefined;\r\n  sortOptions?:\r\n    | Array<{ key: keyof T; label: string; direction?: 'asc' | 'desc' }>\r\n    | undefined;\r\n  filterOptions?:\r\n    | Array<{\r\n        key: keyof T;\r\n        label: string;\r\n        options: Array<{ value: unknown; label: string }>;\r\n      }>\r\n    | undefined;\r\n  onSearch: (query: string) => void;\r\n  onSort: (key: keyof T, direction: 'asc' | 'desc') => void;\r\n  onFilter: (key: keyof T, value: unknown) => void;\r\n  totalCount: number;\r\n  filteredCount: number;\r\n}\r\n\r\nconst SearchFilter = <T,>({\r\n  searchable = true,\r\n  sortable = true,\r\n  filterable = true,\r\n  searchPlaceholder = '_Search...',\r\n  sortOptions = [],\r\n  filterOptions = [],\r\n  onSearch,\r\n  onSort,\r\n  onFilter,\r\n  totalCount,\r\n  filteredCount,\r\n}: SearchFilterProps<T>) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [currentSort, setCurrentSort] = useState<{\r\n    key: keyof T;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  const handleSearchChange = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const query = event.target.value;\r\n      setSearchQuery(query);\r\n      onSearch(query);\r\n    },\r\n    [onSearch]\r\n  );\r\n\r\n  const handleSort = useCallback(\r\n    (key: keyof T, direction: 'asc' | 'desc') => {\r\n      setCurrentSort({ key, direction });\r\n      onSort(key, direction);\r\n    },\r\n    [onSort]\r\n  );\r\n\r\n  const handleFilter = useCallback(\r\n    (key: keyof T, value: unknown) => {\r\n      onFilter(key, value);\r\n    },\r\n    [onFilter]\r\n  );\r\n\r\n  const toggleSortDirection = useCallback(\r\n    (key: keyof T) => {\r\n      const newDirection =\r\n        currentSort?.key === key && currentSort.direction === 'asc'\r\n          ? 'desc'\r\n          : 'asc';\r\n      handleSort(key, newDirection);\r\n    },\r\n    [currentSort, handleSort]\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-4 p-4 border-b\">\r\n      {/* _Search */}\r\n      {searchable && (\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchQuery}\r\n            onChange={handleSearchChange}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Controls */}\r\n      <div className=\"flex items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Sort */}\r\n          {sortable && sortOptions.length > 0 && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-muted-foreground\">Sort:</span>\r\n              <div className=\"flex gap-1\">\r\n                {sortOptions.map((option) => (\r\n                  <Button\r\n                    key={String(option.key)}\r\n                    variant={\r\n                      currentSort?.key === option.key ? 'default' : 'outline'\r\n                    }\r\n                    size=\"sm\"\r\n                    onClick={() => toggleSortDirection(option.key)}\r\n                    className=\"flex items-center gap-1\"\r\n                  >\r\n                    {option.label}\r\n                    {currentSort?.key === option.key &&\r\n                      (currentSort.direction === 'asc' ? (\r\n                        <ChevronUp className=\"h-3 w-3\" />\r\n                      ) : (\r\n                        <ChevronDown className=\"h-3 w-3\" />\r\n                      ))}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Filter Toggle */}\r\n          {filterable && filterOptions.length > 0 && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setShowFilters(!showFilters)}\r\n              className=\"flex items-center gap-1\"\r\n            >\r\n              <Filter className=\"h-3 w-3\" />\r\n              Filters\r\n              {showFilters && <ChevronUp className=\"h-3 w-3\" />}\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Results Count */}\r\n        <div className=\"text-sm text-muted-foreground px-2 py-1 border rounded\">\r\n          {filteredCount} of {totalCount} items\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      {showFilters && filterable && filterOptions.length > 0 && (\r\n        <div className=\"space-y-3\">\r\n          {filterOptions.map((filter) => (\r\n            <div key={String(filter.key)} className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-muted-foreground min-w-fit\">\r\n                {filter.label}:\r\n              </span>\r\n              <select\r\n                className=\"flex-1 px-2 py-1 text-sm border rounded\"\r\n                onChange={(e) => handleFilter(filter.key, e.target.value)}\r\n                defaultValue=\"\"\r\n              >\r\n                <option value=\"\">All</option>\r\n                {filter.options.map((option) => (\r\n                  <option\r\n                    key={String(option.value)}\r\n                    value={String(option.value)}\r\n                  >\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Main Optimized List Component\r\nexport const OptimizedList = <T,>({\r\n  items,\r\n  itemHeight,\r\n  height,\r\n  width = '100%',\r\n  renderItem,\r\n  itemKey,\r\n  className = '',\r\n  overscanCount = 5,\r\n  variableSize = false,\r\n  getItemSize,\r\n  onScroll,\r\n  loadingIndicator,\r\n  emptyState,\r\n  searchPlaceholder,\r\n  searchable = true,\r\n  sortable = true,\r\n  sortOptions,\r\n  filterable = true,\r\n  filterOptions,\r\n  infiniteScroll = false,\r\n  hasNextPage,\r\n  isNextPageLoading,\r\n  loadNextPage,\r\n  itemCount,\r\n}: OptimizedListProps<T>) => {\r\n  const [filteredItems, setFilteredItems] = useState<T[]>(items);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [currentSort, setCurrentSort] = useState<{\r\n    key: keyof T;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [currentFilters, setCurrentFilters] = useState<Record<string, unknown>>(\r\n    {}\r\n  );\r\n  const listRef = useRef<{\r\n    scrollToItem?: (index: number) => void;\r\n    _outerRef?: {\r\n      scrollHeight: number;\r\n      clientHeight: number;\r\n      scrollTop: number;\r\n    };\r\n  } | null>(null);\r\n\r\n  // Apply _search, sort, and filters\r\n  const processedItems = useMemo(() => {\r\n    let result = [...items];\r\n\r\n    // Apply _search\r\n    if (searchQuery) {\r\n      result = result.filter((item) => {\r\n        return Object.values(item as Record<string, unknown>).some((value) =>\r\n          String(value).toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n      });\r\n    }\r\n\r\n    // Apply filters\r\n    Object.entries(currentFilters).forEach(([key, value]) => {\r\n      if (value !== '' && value !== null && value !== undefined) {\r\n        result = result.filter((item) => {\r\n          const itemValue = (item as Record<string, unknown>)[key];\r\n          return (\r\n            String(itemValue).toLowerCase() === String(value).toLowerCase()\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    // Apply sort\r\n    if (currentSort) {\r\n      result.sort((a, b) => {\r\n        const aValue = a[currentSort.key];\r\n        const bValue = b[currentSort.key];\r\n\r\n        if (aValue < bValue) {\r\n          return currentSort.direction === 'asc' ? -1 : 1;\r\n        }\r\n        if (aValue > bValue) {\r\n          return currentSort.direction === 'asc' ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }, [items, searchQuery, currentSort, currentFilters]);\r\n\r\n  // Update filtered items when processed items change\r\n  useEffect(() => {\r\n    setFilteredItems(processedItems);\r\n  }, [processedItems]);\r\n\r\n  // Handle _search\r\n  const handleSearch = useCallback((query: string) => {\r\n    setSearchQuery(query);\r\n  }, []);\r\n\r\n  // Handle sort\r\n  const handleSort = useCallback((key: keyof T, direction: 'asc' | 'desc') => {\r\n    setCurrentSort({ key, direction });\r\n  }, []);\r\n\r\n  // Handle filter\r\n  const handleFilter = useCallback((key: keyof T, value: unknown) => {\r\n    setCurrentFilters((prev) => ({\r\n      ...prev,\r\n      [String(key)]: value,\r\n    }));\r\n  }, []);\r\n\r\n  // Get item key\r\n  const getItemKey = useCallback(\r\n    (index: number): Key => {\r\n      const item = filteredItems[index];\r\n      if (item && itemKey) {\r\n        return itemKey(item, index);\r\n      }\r\n      return index;\r\n    },\r\n    [filteredItems, itemKey]\r\n  );\r\n\r\n  // Render row\r\n  const renderRow = useCallback(\r\n    ({ index, style }: { index: number; style: React.CSSProperties }) => {\r\n      const item = filteredItems[index];\r\n\r\n      if (!item && infiniteScroll && isNextPageLoading) {\r\n        return (\r\n          <div style={style} className=\"flex items-center justify-center\">\r\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      if (!item) {\r\n        return <div style={style}></div>;\r\n      }\r\n\r\n      return <>{renderItem(item, index, style)}</>;\r\n    },\r\n    [filteredItems, renderItem, infiniteScroll, isNextPageLoading]\r\n  );\r\n\r\n  // Handle scroll\r\n  const handleScroll = useCallback(\r\n    ({\r\n      scrollOffset,\r\n      scrollDirection,\r\n    }: {\r\n      scrollOffset: number;\r\n      scrollDirection: 'forward' | 'backward';\r\n    }) => {\r\n      if (onScroll) {\r\n        onScroll({ scrollOffset, scrollDirection });\r\n      }\r\n\r\n      // Infinite scroll loading\r\n      if (infiniteScroll && hasNextPage && !isNextPageLoading) {\r\n        const listElement = listRef.current;\r\n        if (listElement) {\r\n          const { scrollHeight, clientHeight, scrollTop } =\r\n            listElement._outerRef;\r\n          if (scrollHeight - scrollTop <= clientHeight * 1.5) {\r\n            loadNextPage?.();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [onScroll, infiniteScroll, hasNextPage, isNextPageLoading, loadNextPage]\r\n  );\r\n\r\n  // Item data for list\r\n  const itemData = useMemo(\r\n    () => ({\r\n      items: filteredItems,\r\n      renderItem,\r\n    }),\r\n    [filteredItems, renderItem]\r\n  );\r\n\r\n  // Custom List component to replace react-window\r\n  interface CustomListProps {\r\n    height: number;\r\n    width: number | string;\r\n    itemCount: number;\r\n    itemSize: number | ((index: number) => number);\r\n    itemData: unknown;\r\n    itemKey?: (index: number, data: unknown) => Key;\r\n    overscanCount?: number;\r\n    onScroll?: (info: {\r\n      scrollOffset: number;\r\n      scrollDirection: 'forward' | 'backward';\r\n    }) => void;\r\n    children: ComponentType<{\r\n      index: number;\r\n      style: React.CSSProperties;\r\n      data: unknown;\r\n    }>;\r\n  }\r\n\r\n  const CustomList = React.forwardRef<\r\n    { scrollToItem?: (index: number) => void },\r\n    CustomListProps\r\n  >(\r\n    (\r\n      {\r\n        height,\r\n        width,\r\n        itemCount,\r\n        itemSize,\r\n        itemData,\r\n        itemKey,\r\n        overscanCount = 5,\r\n        onScroll,\r\n        children: RowComponent,\r\n      },\r\n      ref\r\n    ) => {\r\n      const [scrollTop, setScrollTop] = useState(0);\r\n      const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n      const getItemHeight = useCallback(\r\n        (index: number) => {\r\n          return typeof itemSize === 'function' ? itemSize(index) : itemSize;\r\n        },\r\n        [itemSize]\r\n      );\r\n\r\n      const itemHeights = useMemo(() => {\r\n        const heights: number[] = [];\r\n        let totalHeight = 0;\r\n        for (let i = 0; i < itemCount; i++) {\r\n          const height = getItemHeight(i);\r\n          heights.push(totalHeight);\r\n          totalHeight += height;\r\n        }\r\n        return { heights, totalHeight };\r\n      }, [itemCount, getItemHeight]);\r\n\r\n      const getVisibleRange = useCallback(() => {\r\n        const { heights } = itemHeights;\r\n        let startIndex = 0;\r\n        let endIndex = itemCount - 1;\r\n\r\n        // Find start index\r\n        for (let i = 0; i < heights.length; i++) {\r\n          if ((heights[i] ?? 0) + getItemHeight(i) > scrollTop) {\r\n            startIndex = Math.max(0, i - overscanCount);\r\n            break;\r\n          }\r\n        }\r\n\r\n        // Find end index\r\n        for (let i = startIndex; i < heights.length; i++) {\r\n          if ((heights[i] ?? 0) > scrollTop + height) {\r\n            endIndex = Math.min(itemCount - 1, i + overscanCount);\r\n            break;\r\n          }\r\n        }\r\n\r\n        return { startIndex, endIndex };\r\n      }, [\r\n        scrollTop,\r\n        height,\r\n        itemCount,\r\n        itemHeights,\r\n        overscanCount,\r\n        getItemHeight,\r\n      ]);\r\n\r\n      const { startIndex, endIndex } = getVisibleRange();\r\n\r\n      const handleScroll = useCallback(\r\n        (e: React.UIEvent<HTMLDivElement>) => {\r\n          const newScrollTop = e.currentTarget.scrollTop;\r\n          const scrollDirection =\r\n            newScrollTop > scrollTop ? 'forward' : 'backward';\r\n          setScrollTop(newScrollTop);\r\n\r\n          if (onScroll) {\r\n            onScroll({ scrollOffset: newScrollTop, scrollDirection });\r\n          }\r\n        },\r\n        [scrollTop, onScroll]\r\n      );\r\n\r\n      React.useImperativeHandle(ref, () => ({\r\n        _outerRef: containerRef.current,\r\n        scrollTo: (offset: number) => {\r\n          if (containerRef.current) {\r\n            containerRef.current.scrollTop = offset;\r\n          }\r\n        },\r\n        scrollToItem: (index: number) => {\r\n          if (\r\n            containerRef.current &&\r\n            itemHeights.heights[index] !== undefined\r\n          ) {\r\n            containerRef.current.scrollTop = itemHeights.heights[index];\r\n          }\r\n        },\r\n      }));\r\n\r\n      const visibleItems = [];\r\n      for (let i = startIndex; i <= endIndex; i++) {\r\n        const top = itemHeights.heights[i] || 0;\r\n        const itemHeight = getItemHeight(i);\r\n        const key = itemKey ? itemKey(i, itemData) : i;\r\n\r\n        visibleItems.push(\r\n          <RowComponent\r\n            key={key}\r\n            index={i}\r\n            style={{\r\n              position: 'absolute',\r\n              top,\r\n              height: itemHeight,\r\n              width: '100%',\r\n            }}\r\n            data={itemData}\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <div\r\n          ref={containerRef}\r\n          style={{\r\n            height,\r\n            width,\r\n            overflow: 'auto',\r\n            position: 'relative',\r\n          }}\r\n          onScroll={handleScroll}\r\n        >\r\n          <div\r\n            style={{ height: itemHeights.totalHeight, position: 'relative' }}\r\n          >\r\n            {visibleItems}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  );\r\n\r\n  CustomList.displayName = 'CustomList';\r\n\r\n  // Determine which list component to use - react-window only has List component\r\n  const ListComponent = CustomList;\r\n  const actualItemCount = infiniteScroll\r\n    ? itemCount || filteredItems.length\r\n    : filteredItems.length;\r\n\r\n  return (\r\n    <Card className={className}>\r\n      {(searchable || sortable || filterable) && (\r\n        <SearchFilter\r\n          searchable={searchable}\r\n          sortable={sortable}\r\n          filterable={filterable}\r\n          searchPlaceholder={searchPlaceholder ?? undefined}\r\n          sortOptions={sortOptions ?? undefined}\r\n          filterOptions={filterOptions ?? undefined}\r\n          onSearch={handleSearch}\r\n          onSort={handleSort}\r\n          onFilter={handleFilter}\r\n          totalCount={items.length}\r\n          filteredCount={filteredItems.length}\r\n        />\r\n      )}\r\n\r\n      <CardContent className=\"p-0\">\r\n        {filteredItems.length === 0 ? (\r\n          emptyState || (\r\n            <div className=\"flex flex-col items-center justify-center p-8 text-center\">\r\n              <div className=\"text-muted-foreground mb-2\">No items found</div>\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                {searchQuery || Object.keys(currentFilters).length > 0\r\n                  ? 'Try adjusting your _search or filters'\r\n                  : 'No items available'}\r\n              </div>\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div style={{ height, width }}>\r\n            <ListComponent\r\n              ref={listRef}\r\n              height={height}\r\n              width={width}\r\n              itemCount={actualItemCount}\r\n              itemSize={\r\n                variableSize ? getItemSize || (() => itemHeight) : itemHeight\r\n              }\r\n              itemData={itemData}\r\n              itemKey={getItemKey}\r\n              overscanCount={overscanCount}\r\n              onScroll={handleScroll}\r\n            >\r\n              {renderRow}\r\n            </ListComponent>\r\n          </div>\r\n        )}\r\n\r\n        {loadingIndicator && isNextPageLoading && (\r\n          <div className=\"flex items-center justify-center p-4\">\r\n            {loadingIndicator}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nOptimizedList.displayName = 'OptimizedList';\r\n\r\n// Specialized list components for common use cases\r\nexport const StudentList = (\r\n  props: Omit<\r\n    OptimizedListProps<Record<string, unknown>>,\r\n    'sortOptions' | 'filterOptions'\r\n  >\r\n) => (\r\n  <OptimizedList\r\n    {...props}\r\n    sortOptions={[\r\n      { key: 'name', label: 'Name' },\r\n      { key: 'grade', label: 'Grade' },\r\n      { key: 'section', label: 'Section' },\r\n      { key: 'lrn', label: 'LRN' },\r\n    ]}\r\n    filterOptions={[\r\n      {\r\n        key: 'grade',\r\n        label: 'Grade Level',\r\n        options: [\r\n          { value: 'GRADE_7', label: 'Grade 7' },\r\n          { value: 'GRADE_8', label: 'Grade 8' },\r\n          { value: 'GRADE_9', label: 'Grade 9' },\r\n          { value: 'GRADE_10', label: 'Grade 10' },\r\n          { value: 'GRADE_11', label: 'Grade 11' },\r\n          { value: 'GRADE_12', label: 'Grade 12' },\r\n        ],\r\n      },\r\n      {\r\n        key: 'section',\r\n        label: 'Section',\r\n        options: [\r\n          { value: 'A', label: 'Section A' },\r\n          { value: 'B', label: 'Section B' },\r\n          { value: 'C', label: 'Section C' },\r\n          { value: 'D', label: 'Section D' },\r\n        ],\r\n      },\r\n    ]}\r\n    searchPlaceholder=\"Search students by name, LRN, or grade...\"\r\n  />\r\n);\r\n\r\nexport const BookList = (\r\n  props: Omit<\r\n    OptimizedListProps<Record<string, unknown>>,\r\n    'sortOptions' | 'filterOptions'\r\n  >\r\n) => (\r\n  <OptimizedList\r\n    {...props}\r\n    sortOptions={[\r\n      { key: 'title', label: 'Title' },\r\n      { key: 'author', label: 'Author' },\r\n      { key: 'accessionNumber', label: 'Accession No.' },\r\n      { key: 'category', label: 'Category' },\r\n    ]}\r\n    filterOptions={[\r\n      {\r\n        key: 'category',\r\n        label: 'Category',\r\n        options: [\r\n          { value: 'FICTION', label: 'Fiction' },\r\n          { value: 'NON_FICTION', label: 'Non-Fiction' },\r\n          { value: 'REFERENCE', label: 'Reference' },\r\n          { value: 'TEXTBOOK', label: 'Textbook' },\r\n        ],\r\n      },\r\n      {\r\n        key: 'status',\r\n        label: 'Status',\r\n        options: [\r\n          { value: 'AVAILABLE', label: 'Available' },\r\n          { value: 'BORROWED', label: 'Borrowed' },\r\n          { value: 'RESERVED', label: 'Reserved' },\r\n          { value: 'LOST', label: 'Lost' },\r\n        ],\r\n      },\r\n    ]}\r\n    searchPlaceholder=\"Search books by title, author, or accession number...\"\r\n  />\r\n);\r\n\r\nexport const EquipmentList = (\r\n  props: Omit<\r\n    OptimizedListProps<Record<string, unknown>>,\r\n    'sortOptions' | 'filterOptions'\r\n  >\r\n) => (\r\n  <OptimizedList\r\n    {...props}\r\n    sortOptions={[\r\n      { key: 'name', label: 'Name' },\r\n      { key: 'category', label: 'Category' },\r\n      { key: 'serialNumber', label: 'Serial No.' },\r\n      { key: 'status', label: 'Status' },\r\n    ]}\r\n    filterOptions={[\r\n      {\r\n        key: 'category',\r\n        label: 'Category',\r\n        options: [\r\n          { value: 'COMPUTER', label: 'Computer' },\r\n          { value: 'PRINTER', label: 'Printer' },\r\n          { value: 'PROJECTOR', label: 'Projector' },\r\n          { value: 'SCANNER', label: 'Scanner' },\r\n        ],\r\n      },\r\n      {\r\n        key: 'status',\r\n        label: 'Status',\r\n        options: [\r\n          { value: 'AVAILABLE', label: 'Available' },\r\n          { value: 'IN_USE', label: 'In Use' },\r\n          { value: 'MAINTENANCE', label: 'Maintenance' },\r\n          { value: 'DAMAGED', label: 'Damaged' },\r\n        ],\r\n      },\r\n    ]}\r\n    searchPlaceholder=\"Search equipment by name, category, or serial number...\"\r\n  />\r\n);\r\n\r\nexport default OptimizedList;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\PerformanceDashboard.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":83,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":83,"endColumn":20,"suggestions":[{"fix":{"range":[2179,2224],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Activity,\n  Clock,\n  AlertTriangle,\n  CheckCircle,\n  TrendingUp,\n  TrendingDown,\n  Zap,\n  Database,\n  Monitor,\n  RefreshCw,\n  Trash2,\n} from 'lucide-react';\nimport {\n  usePerformanceMetrics,\n  usePerformanceLogs,\n  usePerformanceSession,\n} from './PerformanceProvider';\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  change?: number;\n  icon: React.ReactNode;\n  color?: 'green' | 'yellow' | 'red' | 'blue';\n}\n\nfunction MetricCard({\n  title,\n  value,\n  change,\n  icon,\n  color = 'blue',\n}: MetricCardProps) {\n  const colorClasses = {\n    green: 'text-green-600 bg-green-50',\n    yellow: 'text-yellow-600 bg-yellow-50',\n    red: 'text-red-600 bg-red-50',\n    blue: 'text-blue-600 bg-blue-50',\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n          {title}\n        </CardTitle>\n        <div className={`p-2 rounded-full ${colorClasses[color]}`}>{icon}</div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"text-2xl font-bold\">{value}</div>\n        {change !== undefined && (\n          <div className=\"flex items-center text-xs text-muted-foreground\">\n            {change > 0 ? (\n              <TrendingUp className=\"h-3 w-3 mr-1 text-green-500\" />\n            ) : (\n              <TrendingDown className=\"h-3 w-3 mr-1 text-red-500\" />\n            )}\n            {Math.abs(change)}% from last period\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function PerformanceDashboard() {\n  const metrics = usePerformanceMetrics();\n  const logs = usePerformanceLogs();\n  const { sessionId, flush, getSummary } = usePerformanceSession();\n\n  // Mock performance monitor object\n  const performanceMonitor = {\n    clear: () => {\n      // Clear performance data\n      console.debug('Performance monitor cleared');\n    },\n  };\n\n  // Calculate derived metrics\n  const summary = getSummary();\n  const recentMetrics = metrics.slice(-50);\n  const recentLogs = logs.slice(-20);\n\n  // Core Web Vitals\n  const lcpMetric = metrics.find((m) => m.name === 'largest_contentful_paint');\n  const fidMetric = metrics.find((m) => m.name === 'first_input_delay');\n  const fcpMetric = metrics.find((m) => m.name === 'first-contentful-paint');\n\n  // Resource metrics\n  const resourceMetrics = metrics.filter((m) => m.name.startsWith('resource_'));\n  const totalResources = metrics.filter(\n    (m) => m.name === 'resource_duration'\n  ).length;\n  const avgResourceTime =\n    resourceMetrics.length > 0\n      ? resourceMetrics.reduce((sum, m) => sum + m.value, 0) /\n        resourceMetrics.length\n      : 0;\n\n  // Error tracking\n  const errorLogs = logs.filter((log) => log.level === 'error');\n\n  const handleRefresh = () => {\n    flush();\n  };\n\n  const handleClear = () => {\n    performanceMonitor.clear();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold tracking-tight\">\n            Performance Dashboard\n          </h2>\n          <p className=\"text-muted-foreground\">\n            Real-time monitoring and analytics\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"outline\">Session: {sessionId.slice(-8)}</Badge>\n          <Button variant=\"outline\" size=\"sm\" onClick={handleRefresh}>\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={handleClear}>\n            <Trash2 className=\"h-4 w-4 mr-2\" />\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <MetricCard\n          title=\"Total Metrics\"\n          value={summary.metricsCount}\n          icon={<Activity className=\"h-4 w-4\" />}\n          color=\"blue\"\n        />\n        <MetricCard\n          title=\"Active Timers\"\n          value={summary.activeEntriesCount}\n          icon={<Clock className=\"h-4 w-4\" />}\n          color=\"yellow\"\n        />\n        <MetricCard\n          title=\"Errors\"\n          value={errorLogs.length}\n          change={errorLogs.length > 0 ? 10 : -5}\n          icon={<AlertTriangle className=\"h-4 w-4\" />}\n          color={errorLogs.length > 0 ? 'red' : 'green'}\n        />\n        <MetricCard\n          title=\"Resources\"\n          value={totalResources}\n          icon={<Database className=\"h-4 w-4\" />}\n          color=\"blue\"\n        />\n      </div>\n\n      {/* Detailed Tabs */}\n      <Tabs defaultValue=\"metrics\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"metrics\">Performance Metrics</TabsTrigger>\n          <TabsTrigger value=\"logs\">System Logs</TabsTrigger>\n          <TabsTrigger value=\"vitals\">Core Web Vitals</TabsTrigger>\n          <TabsTrigger value=\"resources\">Resource Analysis</TabsTrigger>\n        </TabsList>\n\n        {/* Performance Metrics Tab */}\n        <TabsContent value=\"metrics\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Recent Performance Metrics</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {recentMetrics.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8\">\n                    No metrics available yet\n                  </p>\n                ) : (\n                  recentMetrics.map((metric, index) => (\n                    <div\n                      key={`${metric.name}-${metric.timestamp}-${index}`}\n                      className=\"flex items-center justify-between p-2 border-b\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\" />\n                        <span className=\"font-medium\">{metric.name}</span>\n                        {metric.tags && Object.keys(metric.tags).length > 0 && (\n                          <div className=\"flex gap-1\">\n                            {Object.entries(metric.tags).map(([key, value]) => (\n                              <Badge\n                                key={key}\n                                variant=\"outline\"\n                                className=\"text-xs\"\n                              >\n                                {key}: {String(value)}\n                              </Badge>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"font-mono text-sm\">\n                          {metric.value.toFixed(2)} {metric.unit || ''}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {new Date(metric.timestamp).toLocaleTimeString()}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* System Logs Tab */}\n        <TabsContent value=\"logs\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Recent System Logs</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {recentLogs.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8\">\n                    No logs available yet\n                  </p>\n                ) : (\n                  recentLogs.map((log, index) => (\n                    <div\n                      key={`${log.timestamp}-${index}`}\n                      className=\"flex items-start gap-3 p-2 border-b\"\n                    >\n                      <div\n                        className={`w-2 h-2 rounded-full mt-2 ${\n                          log.level === 'error'\n                            ? 'bg-red-500'\n                            : log.level === 'warn'\n                              ? 'bg-yellow-500'\n                              : log.level === 'info'\n                                ? 'bg-blue-500'\n                                : 'bg-gray-500'\n                        }`}\n                      />\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <Badge\n                            variant={\n                              log.level === 'error'\n                                ? 'destructive'\n                                : log.level === 'warn'\n                                  ? 'secondary'\n                                  : log.level === 'info'\n                                    ? 'default'\n                                    : 'outline'\n                            }\n                          >\n                            {log.level.toUpperCase()}\n                          </Badge>\n                          <span className=\"font-medium\">{log.message}</span>\n                        </div>\n                        {log.context && (\n                          <div className=\"text-xs text-muted-foreground mt-1\">\n                            {JSON.stringify(log.context, null, 2)}\n                          </div>\n                        )}\n                        <div className=\"text-xs text-muted-foreground mt-1\">\n                          {new Date(log.timestamp).toLocaleString()}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Core Web Vitals Tab */}\n        <TabsContent value=\"vitals\" className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <MetricCard\n              title=\"Largest Contentful Paint\"\n              value={lcpMetric ? `${lcpMetric.value.toFixed(0)}ms` : 'N/A'}\n              icon={<Monitor className=\"h-4 w-4\" />}\n              color={\n                lcpMetric && lcpMetric.value > 2500\n                  ? 'red'\n                  : lcpMetric && lcpMetric.value > 1000\n                    ? 'yellow'\n                    : 'green'\n              }\n            />\n            <MetricCard\n              title=\"First Input Delay\"\n              value={fidMetric ? `${fidMetric.value.toFixed(0)}ms` : 'N/A'}\n              icon={<Zap className=\"h-4 w-4\" />}\n              color={\n                fidMetric && fidMetric.value > 100\n                  ? 'red'\n                  : fidMetric && fidMetric.value > 50\n                    ? 'yellow'\n                    : 'green'\n              }\n            />\n            <MetricCard\n              title=\"First Contentful Paint\"\n              value={fcpMetric ? `${fcpMetric.value.toFixed(0)}ms` : 'N/A'}\n              icon={<CheckCircle className=\"h-4 w-4\" />}\n              color={\n                fcpMetric && fcpMetric.value > 1800\n                  ? 'red'\n                  : fcpMetric && fcpMetric.value > 1000\n                    ? 'yellow'\n                    : 'green'\n              }\n            />\n            <MetricCard\n              title=\"Avg Resource Time\"\n              value={`${avgResourceTime.toFixed(0)}ms`}\n              icon={<Database className=\"h-4 w-4\" />}\n              color={\n                avgResourceTime > 500\n                  ? 'red'\n                  : avgResourceTime > 200\n                    ? 'yellow'\n                    : 'green'\n              }\n            />\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Core Web Vitals Assessment</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-3\">\n                  <div className=\"text-center\">\n                    <h4 className=\"font-medium mb-2\">LCP</h4>\n                    <div\n                      className={`text-2xl font-bold ${\n                        lcpMetric && lcpMetric.value > 2500\n                          ? 'text-red-500'\n                          : lcpMetric && lcpMetric.value > 1000\n                            ? 'text-yellow-500'\n                            : 'text-green-500'\n                      }`}\n                    >\n                      {lcpMetric ? `${lcpMetric.value.toFixed(0)}ms` : 'N/A'}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {lcpMetric && lcpMetric.value > 2500\n                        ? 'Poor'\n                        : lcpMetric && lcpMetric.value > 1000\n                          ? 'Needs Improvement'\n                          : lcpMetric\n                            ? 'Good'\n                            : 'No Data'}\n                    </div>\n                  </div>\n                  <div className=\"text-center\">\n                    <h4 className=\"font-medium mb-2\">FID</h4>\n                    <div\n                      className={`text-2xl font-bold ${\n                        fidMetric && fidMetric.value > 100\n                          ? 'text-red-500'\n                          : fidMetric && fidMetric.value > 50\n                            ? 'text-yellow-500'\n                            : 'text-green-500'\n                      }`}\n                    >\n                      {fidMetric ? `${fidMetric.value.toFixed(0)}ms` : 'N/A'}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {fidMetric && fidMetric.value > 100\n                        ? 'Poor'\n                        : fidMetric && fidMetric.value > 50\n                          ? 'Needs Improvement'\n                          : fidMetric\n                            ? 'Good'\n                            : 'No Data'}\n                    </div>\n                  </div>\n                  <div className=\"text-center\">\n                    <h4 className=\"font-medium mb-2\">FCP</h4>\n                    <div\n                      className={`text-2xl font-bold ${\n                        fcpMetric && fcpMetric.value > 1800\n                          ? 'text-red-500'\n                          : fcpMetric && fcpMetric.value > 1000\n                            ? 'text-yellow-500'\n                            : 'text-green-500'\n                      }`}\n                    >\n                      {fcpMetric ? `${fcpMetric.value.toFixed(0)}ms` : 'N/A'}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {fcpMetric && fcpMetric.value > 1800\n                        ? 'Poor'\n                        : fcpMetric && fcpMetric.value > 1000\n                          ? 'Needs Improvement'\n                          : fcpMetric\n                            ? 'Good'\n                            : 'No Data'}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Resource Analysis Tab */}\n        <TabsContent value=\"resources\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Resource Performance</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">\n                      Resource Timing Distribution\n                    </h4>\n                    <div className=\"space-y-2\">\n                      {['script', 'stylesheet', 'image', 'font'].map((type) => {\n                        const typeMetrics = resourceMetrics.filter(\n                          (m) => m.tags?.type === type\n                        );\n                        const avgTime =\n                          typeMetrics.length > 0\n                            ? typeMetrics.reduce((sum, m) => sum + m.value, 0) /\n                              typeMetrics.length\n                            : 0;\n\n                        return (\n                          <div\n                            key={type}\n                            className=\"flex items-center justify-between\"\n                          >\n                            <span className=\"capitalize\">{type}</span>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant=\"outline\">\n                                {typeMetrics.length} files\n                              </Badge>\n                              <span className=\"font-mono text-sm\">\n                                {avgTime.toFixed(0)}ms\n                              </span>\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Slow Resources</h4>\n                    <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                      {resourceMetrics\n                        .filter((m) => m.value > 500)\n                        .sort((a, b) => b.value - a.value)\n                        .slice(0, 10)\n                        .map((metric, index) => (\n                          <div\n                            key={index}\n                            className=\"flex items-center justify-between text-sm\"\n                          >\n                            <span className=\"truncate max-w-[200px]\">\n                              {metric.tags?.name || 'Unknown'}\n                            </span>\n                            <Badge\n                              variant={\n                                metric.value > 1000\n                                  ? 'destructive'\n                                  : 'secondary'\n                              }\n                            >\n                              {metric.value.toFixed(0)}ms\n                            </Badge>\n                          </div>\n                        ))}\n                      {resourceMetrics.filter((m) => m.value > 500).length ===\n                        0 && (\n                        <p className=\"text-muted-foreground text-sm\">\n                          No slow resources detected\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default PerformanceDashboard;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\PerformanceMonitor.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":221,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":221,"endColumn":20,"suggestions":[{"fix":{"range":[5736,5781],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from 'recharts';\nimport {\n  Activity,\n  Zap,\n  Clock,\n  Database,\n  AlertTriangle,\n  CheckCircle,\n  Download,\n  RefreshCw,\n  Play,\n  Pause,\n  FileText,\n  BarChart3,\n  Monitor,\n  Gauge,\n  Target,\n  TrendingUp,\n  TrendingDown,\n} from 'lucide-react';\nimport {\n  performanceMonitoringService,\n  type PerformanceReport,\n  type ComponentPerformance,\n} from '@/services/performanceMonitoringService';\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  unit?: string;\n  trend?: 'up' | 'down' | 'neutral';\n  target?: number;\n  actual?: number;\n  icon: React.ReactNode;\n  color?: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({\n  title,\n  value,\n  unit,\n  trend,\n  target,\n  actual,\n  icon,\n  color = 'text-blue-600',\n}) => {\n  const percentage = target && actual ? (actual / target) * 100 : null;\n  const trendColor =\n    trend === 'up'\n      ? 'text-red-600'\n      : trend === 'down'\n        ? 'text-green-600'\n        : 'text-gray-600';\n  const TrendIcon =\n    trend === 'up' ? TrendingUp : trend === 'down' ? TrendingDown : Activity;\n\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <div className={color}>{icon}</div>\n            <div>\n              <p className=\"text-sm font-medium text-muted-foreground\">\n                {title}\n              </p>\n              <p className=\"text-2xl font-bold\">\n                {value}\n                {unit && (\n                  <span className=\"text-sm font-normal text-muted-foreground ml-1\">\n                    {unit}\n                  </span>\n                )}\n              </p>\n            </div>\n          </div>\n          {trend && (\n            <div className={`flex items-center space-x-1 ${trendColor}`}>\n              <TrendIcon className=\"h-4 w-4\" />\n            </div>\n          )}\n        </div>\n        {percentage !== null && (\n          <div className=\"mt-4\">\n            <div className=\"flex justify-between text-sm mb-1\">\n              <span className=\"text-muted-foreground\">Performance</span>\n              <span>{percentage.toFixed(1)}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div\n                className=\"bg-blue-600 h-2 rounded-full\"\n                style={{ width: `${percentage}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\ninterface PerformanceGradeProps {\n  grade: 'A' | 'B' | 'C' | 'D' | 'F';\n  score: number;\n}\n\nconst PerformanceGrade: React.FC<PerformanceGradeProps> = ({\n  grade,\n  score,\n}) => {\n  const gradeColors = {\n    A: 'text-green-600 bg-green-50',\n    B: 'text-blue-600 bg-blue-50',\n    C: 'text-yellow-600 bg-yellow-50',\n    D: 'text-orange-600 bg-orange-50',\n    F: 'text-red-600 bg-red-50',\n  };\n\n  const gradeIcons = {\n    A: CheckCircle,\n    B: CheckCircle,\n    C: AlertTriangle,\n    D: AlertTriangle,\n    F: AlertTriangle,\n  };\n\n  const Icon = gradeIcons[grade];\n\n  return (\n    <div className=\"flex items-center space-x-4\">\n      <div className={`p-3 rounded-full ${gradeColors[grade]}`}>\n        <Icon className=\"h-8 w-8\" />\n      </div>\n      <div>\n        <div className=\"text-3xl font-bold\">{grade}</div>\n        <div className=\"text-sm text-muted-foreground\">\n          Score: {score.toFixed(1)}/100\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PerformanceMonitor: React.FC = () => {\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [currentReport, setCurrentReport] = useState<PerformanceReport | null>(\n    null\n  );\n  const [componentMetrics, setComponentMetrics] = useState<\n    ComponentPerformance[]\n  >([]);\n  const [insights, setInsights] = useState<any>(null);\n  const [activeTab, setActiveTab] = useState('overview');\n\n  useEffect(() => {\n    // Load existing data\n    setComponentMetrics(performanceMonitoringService.getComponentMetrics());\n\n    const latestReport = performanceMonitoringService.getLatestReport();\n    if (latestReport) {\n      setCurrentReport(latestReport);\n    }\n\n    // Get insights\n    setInsights(performanceMonitoringService.getPerformanceInsights());\n\n    // Set up monitoring status\n    setIsMonitoring(true);\n  }, []);\n\n  const startMonitoring = useCallback(() => {\n    performanceMonitoringService.startMonitoring();\n    setIsMonitoring(true);\n  }, []);\n\n  const stopMonitoring = useCallback(() => {\n    performanceMonitoringService.stopMonitoring();\n    setIsMonitoring(false);\n  }, []);\n\n  const generateReport = useCallback(() => {\n    const report = performanceMonitoringService.generateReport();\n    setCurrentReport(report);\n    setInsights(performanceMonitoringService.getPerformanceInsights());\n  }, []);\n\n  const exportData = useCallback(() => {\n    const data = performanceMonitoringService.exportData();\n    const blob = new Blob([data], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `performance-report-${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }, []);\n\n  const runLighthouseAudit = useCallback(async () => {\n    try {\n      // This would require Lighthouse to be available\n      // For now, we'll simulate it\n      console.debug('Running Lighthouse audit...');\n      // const result = await performanceMonitoringService.runLighthouseAudit();\n    } catch (error) {\n      console.error('Lighthouse audit failed:', error);\n    }\n  }, []);\n\n  // Format time values\n  const formatTime = (ms: number): string => {\n    if (ms < 1000) {\n      return `${ms.toFixed(0)}ms`;\n    }\n    return `${(ms / 1000).toFixed(2)}s`;\n  };\n\n  // Format memory values\n  const formatMemory = (bytes: number): string => {\n    const mb = bytes / 1024 / 1024;\n    if (mb < 1024) {\n      return `${mb.toFixed(1)}MB`;\n    }\n    return `${(mb / 1024).toFixed(1)}GB`;\n  };\n\n  if (!currentReport) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <Monitor className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">\n            Generating performance report...\n          </p>\n          <Button onClick={generateReport} className=\"mt-4\">\n            Generate Report\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-3xl font-bold flex items-center gap-2\">\n            <Activity className=\"h-8 w-8\" />\n            Performance Monitor\n          </h2>\n          <p className=\"text-muted-foreground\">\n            Real-time performance monitoring and analysis\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={isMonitoring ? 'destructive' : 'default'}\n            onClick={isMonitoring ? stopMonitoring : startMonitoring}\n          >\n            {isMonitoring ? (\n              <>\n                <Pause className=\"h-4 w-4 mr-2\" />\n                Stop Monitoring\n              </>\n            ) : (\n              <>\n                <Play className=\"h-4 w-4 mr-2\" />\n                Start Monitoring\n              </>\n            )}\n          </Button>\n          <Button onClick={generateReport} variant=\"outline\">\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Generate Report\n          </Button>\n          <Button onClick={exportData} variant=\"outline\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* Performance Grade */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Gauge className=\"h-5 w-5\" />\n            Performance Score\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-between\">\n            <PerformanceGrade\n              grade={currentReport.grade}\n              score={currentReport.score}\n            />\n            <div className=\"text-right\">\n              <div className=\"text-sm text-muted-foreground\">Last Updated</div>\n              <div className=\"text-sm\">\n                {new Date(currentReport.timestamp).toLocaleString()}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabs */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"metrics\">Metrics</TabsTrigger>\n          <TabsTrigger value=\"components\">Components</TabsTrigger>\n          <TabsTrigger value=\"recommendations\">Recommendations</TabsTrigger>\n        </TabsList>\n\n        {/* Overview Tab */}\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          {/* Core Metrics */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <MetricCard\n              title=\"Largest Contentful Paint\"\n              value={formatTime(currentReport.metrics.lcp)}\n              icon={<Target className=\"h-5 w-5\" />}\n              target={2500}\n              actual={currentReport.metrics.lcp}\n              color={\n                currentReport.metrics.lcp < 2500\n                  ? 'text-green-600'\n                  : 'text-red-600'\n              }\n            />\n            <MetricCard\n              title=\"First Input Delay\"\n              value={formatTime(currentReport.metrics.fid)}\n              icon={<Zap className=\"h-5 w-5\" />}\n              target={100}\n              actual={currentReport.metrics.fid}\n              color={\n                currentReport.metrics.fid < 100\n                  ? 'text-green-600'\n                  : 'text-red-600'\n              }\n            />\n            <MetricCard\n              title=\"Cumulative Layout Shift\"\n              value={currentReport.metrics.cls.toFixed(3)}\n              icon={<Activity className=\"h-5 w-5\" />}\n              target={0.1}\n              actual={currentReport.metrics.cls}\n              color={\n                currentReport.metrics.cls < 0.1\n                  ? 'text-green-600'\n                  : 'text-red-600'\n              }\n            />\n            <MetricCard\n              title=\"Memory Usage\"\n              value={formatMemory(\n                currentReport.metrics.memoryUsage * 1024 * 1024\n              )}\n              icon={<Database className=\"h-5 w-5\" />}\n              target={50 * 1024 * 1024}\n              actual={currentReport.metrics.memoryUsage * 1024 * 1024}\n              color={\n                currentReport.metrics.memoryUsage < 50\n                  ? 'text-green-600'\n                  : 'text-orange-600'\n              }\n            />\n          </div>\n\n          {/* Performance Trends */}\n          {insights && insights.trends.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BarChart3 className=\"h-5 w-5\" />\n                  Performance Trends\n                </CardTitle>\n                <CardDescription>Performance metrics over time</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={insights.trends}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis\n                      dataKey=\"timestamp\"\n                      tickFormatter={(value) =>\n                        new Date(value).toLocaleTimeString()\n                      }\n                    />\n                    <YAxis />\n                    <Tooltip\n                      labelFormatter={(value) =>\n                        new Date(value).toLocaleString()\n                      }\n                      formatter={(value: number, name: string) => [\n                        name === 'score'\n                          ? `${value.toFixed(1)}`\n                          : formatTime(value),\n                        name === 'score' ? 'Score' : name.toUpperCase(),\n                      ]}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"score\"\n                      stroke=\"#8884d8\"\n                      strokeWidth={2}\n                      name=\"Performance Score\"\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"lcp\"\n                      stroke=\"#82ca9d\"\n                      strokeWidth={2}\n                      name=\"LCP\"\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        {/* Metrics Tab */}\n        <TabsContent value=\"metrics\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Navigation Timing */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Clock className=\"h-5 w-5\" />\n                  Navigation Timing\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between\">\n                  <span>DOM Content Loaded</span>\n                  <span className=\"font-mono\">\n                    {formatTime(currentReport.metrics.domContentLoaded)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Load Complete</span>\n                  <span className=\"font-mono\">\n                    {formatTime(currentReport.metrics.loadComplete)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Time to First Byte</span>\n                  <span className=\"font-mono\">\n                    {formatTime(currentReport.metrics.ttfb)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>First Contentful Paint</span>\n                  <span className=\"font-mono\">\n                    {formatTime(currentReport.metrics.fcp)}\n                  </span>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Resource Metrics */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Database className=\"h-5 w-5\" />\n                  Resource Metrics\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between\">\n                  <span>Resource Count</span>\n                  <span className=\"font-mono\">\n                    {currentReport.metrics.resourceCount}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Total Size</span>\n                  <span className=\"font-mono\">\n                    {formatMemory(currentReport.metrics.totalResourceSize)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Transfer Size</span>\n                  <span className=\"font-mono\">\n                    {formatMemory(currentReport.metrics.totalTransferSize)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>API Response Time</span>\n                  <span className=\"font-mono\">\n                    {formatTime(currentReport.metrics.apiResponseTime)}\n                  </span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* Components Tab */}\n        <TabsContent value=\"components\" className=\"space-y-6\">\n          {componentMetrics.length > 0 ? (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Monitor className=\"h-5 w-5\" />\n                  Component Performance\n                </CardTitle>\n                <CardDescription>\n                  Performance metrics for React components\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {componentMetrics\n                    .sort((a, b) => b.averageTime - a.averageTime)\n                    .slice(0, 10)\n                    .map((component) => (\n                      <div\n                        key={component.name}\n                        className=\"border rounded-lg p-4\"\n                      >\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-semibold\">{component.name}</h4>\n                          <div\n                            className={`px-2 py-1 rounded text-xs font-medium ${\n                              component.averageTime > 16\n                                ? 'bg-red-100 text-red-800'\n                                : 'bg-green-100 text-green-800'\n                            }`}\n                          >\n                            {component.averageTime.toFixed(2)}ms avg\n                          </div>\n                        </div>\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                          <div>\n                            <span className=\"text-muted-foreground\">\n                              Renders:\n                            </span>\n                            <div className=\"font-semibold\">\n                              {component.renders}\n                            </div>\n                          </div>\n                          <div>\n                            <span className=\"text-muted-foreground\">\n                              Slowest:\n                            </span>\n                            <div className=\"font-semibold\">\n                              {component.slowestRender.toFixed(2)}ms\n                            </div>\n                          </div>\n                          <div>\n                            <span className=\"text-muted-foreground\">\n                              Fastest:\n                            </span>\n                            <div className=\"font-semibold\">\n                              {component.fastestRender === Infinity\n                                ? 'N/A'\n                                : `${component.fastestRender.toFixed(2)}ms`}\n                            </div>\n                          </div>\n                          <div>\n                            <span className=\"text-muted-foreground\">\n                              Mount Time:\n                            </span>\n                            <div className=\"font-semibold\">\n                              {component.mountTime.toFixed(2)}ms\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card>\n              <CardContent className=\"flex items-center justify-center h-32\">\n                <p className=\"text-muted-foreground\">\n                  No component metrics available yet\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        {/* Recommendations Tab */}\n        <TabsContent value=\"recommendations\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Target className=\"h-5 w-5\" />\n                Performance Recommendations\n              </CardTitle>\n              <CardDescription>\n                Actionable suggestions to improve performance\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {currentReport.recommendations.map((recommendation, index) => (\n                  <div\n                    key={index}\n                    className={`p-4 rounded-lg border ${\n                      recommendation.includes('excellent')\n                        ? 'bg-green-50 border-green-200'\n                        : 'bg-yellow-50 border-yellow-200'\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      {recommendation.includes('excellent') ? (\n                        <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5\" />\n                      ) : (\n                        <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5\" />\n                      )}\n                      <p className=\"text-sm\">{recommendation}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Additional Actions */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileText className=\"h-5 w-5\" />\n                Additional Actions\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex flex-wrap gap-4\">\n                <Button onClick={runLighthouseAudit} variant=\"outline\">\n                  <BarChart3 className=\"h-4 w-4 mr-2\" />\n                  Run Lighthouse Audit\n                </Button>\n                <Button onClick={exportData} variant=\"outline\">\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  Export Full Report\n                </Button>\n                <Button\n                  onClick={() => window.open('/stats.html', '_blank')}\n                  variant=\"outline\"\n                >\n                  <Activity className=\"h-4 w-4 mr-2\" />\n                  View Bundle Analysis\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default PerformanceMonitor;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\PerformanceProvider.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[371,385],"text":""},"desc":"Remove unused variable 'userId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, {\n  createContext,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  performanceMonitor,\n  type PerformanceMetric,\n  type LogEntry,\n} from '@/lib/performance-monitor';\n\ninterface PerformanceContextType {\n  metrics: PerformanceMetric[];\n  logs: LogEntry[];\n  sessionId: string;\n  userId: string | null;\n  setUserId: (userId: string) => void;\n  clearUserId: () => void;\n  flush: () => void;\n  getSummary: () => {\n    metricsCount: number;\n    logsCount: number;\n    activeEntriesCount: number;\n    sessionId: string;\n    userId: string | null;\n  };\n}\n\nconst PerformanceContext = createContext<PerformanceContextType | null>(null);\n\ninterface PerformanceProviderProps {\n  children: React.ReactNode;\n  config?: {\n    enableConsoleLogging?: boolean;\n    enableRemoteLogging?: boolean;\n    remoteEndpoint?: string;\n    sampleRate?: number;\n    flushInterval?: number;\n  };\n}\n\nexport function PerformanceProvider({\n  children,\n  config,\n}: PerformanceProviderProps) {\n  const [metrics, setMetrics] = useState<PerformanceMetric[]>([]);\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [userId, setUserIdState] = useState<string | null>(null);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Update performance monitor config if provided\n  useEffect(() => {\n    if (config) {\n      // Note: In a real implementation, you'd need to reinitialize the monitor\n      // For now, we'll just log that config was updated\n      performanceMonitor.info('Performance provider config updated', {\n        config,\n      });\n    }\n  }, [config]);\n\n  // Periodically sync data from monitor\n  useEffect(() => {\n    const syncData = () => {\n      setMetrics(performanceMonitor.getMetrics());\n      setLogs(performanceMonitor.getLogs());\n    };\n\n    // Initial sync\n    syncData();\n\n    // Set up periodic sync\n    intervalRef.current = setInterval(syncData, 5000);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  // Set user ID in monitor when it changes\n  const setUserId = (newUserId: string) => {\n    setUserIdState(newUserId);\n    performanceMonitor.setUserId(newUserId);\n  };\n\n  const clearUserId = () => {\n    setUserIdState(null);\n    performanceMonitor.clearUserId();\n  };\n\n  const flush = () => {\n    performanceMonitor.flushNow();\n    // Update local state after flush\n    setTimeout(() => {\n      setMetrics(performanceMonitor.getMetrics());\n      setLogs(performanceMonitor.getLogs());\n    }, 100);\n  };\n\n  const getSummary = () => performanceMonitor.getSummary();\n\n  const contextValue: PerformanceContextType = {\n    metrics,\n    logs,\n    sessionId: performanceMonitor['sessionId'],\n    userId,\n    setUserId,\n    clearUserId,\n    flush,\n    getSummary,\n  };\n\n  return (\n    <PerformanceContext.Provider value={contextValue}>\n      {children}\n    </PerformanceContext.Provider>\n  );\n}\n\nexport function usePerformanceContext() {\n  const context = useContext(PerformanceContext);\n  if (!context) {\n    throw new Error(\n      'usePerformanceContext must be used within a PerformanceProvider'\n    );\n  }\n  return context;\n}\n\n/**\n * Hook for accessing performance metrics\n */\nexport function usePerformanceMetrics() {\n  const { metrics } = usePerformanceContext();\n  return metrics;\n}\n\n/**\n * Hook for accessing performance logs\n */\nexport function usePerformanceLogs() {\n  const { logs } = usePerformanceContext();\n  return logs;\n}\n\n/**\n * Hook for performance session management\n */\nexport function usePerformanceSession() {\n  const { sessionId, userId, setUserId, clearUserId, flush, getSummary } =\n    usePerformanceContext();\n  return { sessionId, userId, setUserId, clearUserId, flush, getSummary };\n}\n\nexport default PerformanceProvider;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\performance\\ReactPerformanceOptimizer.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":162,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[4631,4644],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":163,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"item"},"fix":{"range":[4674,4682],"text":""},"desc":"Remove unused variable 'item'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":163,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[4681,4696],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":168,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[4819,4832],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":236,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":236,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[6595,6599],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":246,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":246,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[6892,6896],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":249,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":249,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[6963,6967],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":258,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[7252,7256],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":261,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[7324,7328],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":273,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":273,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[7654,7658],"text":""},"desc":"Remove unused variable 'args'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n  useRef,\r\n  memo,\r\n  Profiler,\r\n  type ComponentType,\r\n  type ReactNode,\r\n  type ProfilerOnRenderCallback,\r\n} from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { AlertCircle, Activity, BarChart3 } from 'lucide-react';\r\n\r\n// Performance monitoring types\r\ninterface PerformanceMetrics {\r\n  renderTime: number;\r\n  renderCount: number;\r\n  lastRenderTime: number;\r\n  averageRenderTime: number;\r\n  slowestRender: number;\r\n  fastestRender: number;\r\n}\r\n\r\ninterface ComponentPerformanceData {\r\n  [componentName: string]: PerformanceMetrics;\r\n}\r\n\r\n// Memoized component factory with performance tracking\r\nexport const createMemoizedComponent = <P extends object>(\r\n  Component: ComponentType<P>,\r\n  componentName?: string\r\n): ComponentType<P> => {\r\n  const MemoizedComponent = memo(Component, (prevProps, nextProps) => {\r\n    // Custom comparison function for optimization\r\n    const keys = Object.keys(prevProps) as (keyof P)[];\r\n\r\n    return keys.every((key) => {\r\n      const prev = prevProps[key];\r\n      const next = nextProps[key];\r\n\r\n      // Handle different types of comparisons\r\n      if (typeof prev === 'function' && typeof next === 'function') {\r\n        return prev.toString() === next.toString();\r\n      }\r\n\r\n      if (Array.isArray(prev) && Array.isArray(next)) {\r\n        if (prev.length !== next.length) {\r\n          return false;\r\n        }\r\n        return prev.every((item, index) => item === next[index]);\r\n      }\r\n\r\n      if (\r\n        typeof prev === 'object' &&\r\n        prev !== null &&\r\n        typeof next === 'object' &&\r\n        next !== null\r\n      ) {\r\n        return JSON.stringify(prev) === JSON.stringify(next);\r\n      }\r\n\r\n      return prev === next;\r\n    });\r\n  });\r\n\r\n  MemoizedComponent.displayName = `Memoized(${componentName || Component.displayName || Component.name})`;\r\n\r\n  return MemoizedComponent as ComponentType<P>;\r\n};\r\n\r\n// Performance monitoring HOC\r\nexport const withPerformanceMonitoring = <P extends object>(\r\n  Component: ComponentType<P>,\r\n  componentName?: string\r\n): ComponentType<P> => {\r\n  const name = componentName || Component.displayName || Component.name;\r\n\r\n  const MonitoredComponent = memo((props: P) => {\r\n    const [metrics, setMetrics] = useState<PerformanceMetrics>({\r\n      renderTime: 0,\r\n      renderCount: 0,\r\n      lastRenderTime: 0,\r\n      averageRenderTime: 0,\r\n      slowestRender: 0,\r\n      fastestRender: Infinity,\r\n    });\r\n\r\n    const renderStartTime = useRef<number>(Date.now());\r\n\r\n    const onRender: ProfilerOnRenderCallback = (\r\n      _id,\r\n      _phase,\r\n      actualDuration,\r\n      _baseDuration,\r\n      _startTime,\r\n      _commitTime\r\n    ) => {\r\n      const renderTime = actualDuration;\r\n      renderStartTime.current = Date.now();\r\n\r\n      setMetrics((prev) => {\r\n        const newRenderCount = prev.renderCount + 1;\r\n        const totalTime =\r\n          prev.averageRenderTime * prev.renderCount + renderTime;\r\n        const newAverage = totalTime / newRenderCount;\r\n\r\n        return {\r\n          renderTime,\r\n          renderCount: newRenderCount,\r\n          lastRenderTime: renderTime,\r\n          averageRenderTime: newAverage,\r\n          slowestRender: Math.max(prev.slowestRender, renderTime),\r\n          fastestRender: Math.min(prev.fastestRender, renderTime),\r\n        };\r\n      });\r\n\r\n      // Log performance warnings in development\r\n      if (process.env.NODE_ENV === 'development') {\r\n        if (renderTime > 16) {\r\n          console.warn(\r\n            ` Slow render detected in ${name}: ${renderTime.toFixed(2)}ms`\r\n          );\r\n        }\r\n        if (renderTime > 100) {\r\n          console.error(\r\n            ` Very slow render in ${name}: ${renderTime.toFixed(2)}ms`\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Profiler id={name} onRender={onRender}>\r\n        <Component {...props} />\r\n        {process.env.NODE_ENV === 'development' && (\r\n          <div className=\"fixed bottom-4 right-4 bg-black/80 text-white p-2 rounded text-xs\">\r\n            {name}: {metrics.renderTime.toFixed(2)}ms ({metrics.renderCount}{' '}\r\n            renders)\r\n          </div>\r\n        )}\r\n      </Profiler>\r\n    );\r\n  });\r\n\r\n  MonitoredComponent.displayName = `WithPerformanceMonitoring(${name})`;\r\n  return MonitoredComponent as ComponentType<P>;\r\n};\r\n\r\n// Virtualized List Component\r\ninterface VirtualizedListProps<T> {\r\n  items: T[];\r\n  itemHeight: number | ((index: number) => number);\r\n  renderItem: (item: T, index: number) => ReactNode;\r\n  height: number;\r\n  width?: number;\r\n  overscanCount?: number;\r\n  className?: string;\r\n  estimateSize?: (index: number) => number;\r\n}\r\n\r\nexport const VirtualizedList = <T,>({\r\n  items,\r\n  itemHeight,\r\n  renderItem,\r\n  height,\r\n  width = 300,\r\n  overscanCount = 5,\r\n  className = '',\r\n}: VirtualizedListProps<T>) => {\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n\r\n  const containerHeight = typeof height === 'number' ? height : 400;\r\n  const itemSize = typeof itemHeight === 'function' ? 50 : itemHeight;\r\n\r\n  const startIndex = Math.floor(scrollTop / itemSize);\r\n  const endIndex = Math.min(\r\n    startIndex + Math.ceil(containerHeight / itemSize) + overscanCount,\r\n    items.length\r\n  );\r\n\r\n  const visibleItems = items.slice(startIndex, endIndex);\r\n\r\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\r\n    setScrollTop(e.currentTarget.scrollTop);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        height: containerHeight,\r\n        width,\r\n        overflow: 'auto',\r\n        position: 'relative',\r\n      }}\r\n      onScroll={handleScroll}\r\n    >\r\n      <div style={{ height: items.length * itemSize, position: 'relative' }}>\r\n        {visibleItems.map((item, index) => (\r\n          <div\r\n            key={startIndex + index}\r\n            style={{\r\n              position: 'absolute',\r\n              top: (startIndex + index) * itemSize,\r\n              height: itemSize,\r\n              width: '100%',\r\n            }}\r\n          >\r\n            {renderItem(item, startIndex + index)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Expensive calculation hook\r\nexport const useExpensiveCalculation = <T,>(\r\n  calculation: () => T,\r\n  dependencies: React.DependencyList\r\n): T => {\r\n  return useMemo(calculation, dependencies);\r\n};\r\n\r\n// Stable callback hook\r\nexport const useStableCallback = <T extends (...args: never[]) => unknown>(\r\n  callback: T,\r\n  dependencies: React.DependencyList\r\n): T => {\r\n  return useCallback(callback, dependencies);\r\n};\r\n\r\n// Performance optimization utilities\r\nexport const performanceUtils = {\r\n  // Debounce function for expensive operations\r\n  debounce: <T extends (...args: never[]) => unknown>(\r\n    func: T,\r\n    wait: number\r\n  ): ((...args: Parameters<T>) => void) => {\r\n    let timeout: NodeJS.Timeout;\r\n    return (...args: Parameters<T>) => {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => func(...args), wait);\r\n    };\r\n  },\r\n\r\n  // Throttle function for frequent operations\r\n  throttle: <T extends (...args: never[]) => unknown>(\r\n    func: T,\r\n    limit: number\r\n  ): ((...args: Parameters<T>) => void) => {\r\n    let inThrottle: boolean;\r\n    return (...args: Parameters<T>) => {\r\n      if (!inThrottle) {\r\n        func(...args);\r\n        inThrottle = true;\r\n        setTimeout(() => (inThrottle = false), limit);\r\n      }\r\n    };\r\n  },\r\n\r\n  // Memoize expensive computations\r\n  memoize: <T extends (...args: never[]) => unknown>(func: T): T => {\r\n    const cache = new Map();\r\n    return ((...args: Parameters<T>) => {\r\n      const key = JSON.stringify(args);\r\n      if (cache.has(key)) {\r\n        return cache.get(key);\r\n      }\r\n      const result = func(...args);\r\n      cache.set(key, result);\r\n      return result;\r\n    }) as T;\r\n  },\r\n};\r\n\r\n// Performance Dashboard Component\r\nexport const PerformanceDashboard: React.FC = () => {\r\n  const [performanceData, setPerformanceData] =\r\n    useState<ComponentPerformanceData>({});\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Listen for custom performance events\r\n    const handlePerformanceUpdate = (event: CustomEvent) => {\r\n      setPerformanceData((prev) => ({\r\n        ...prev,\r\n        [event.detail.componentName]: event.detail.metrics,\r\n      }));\r\n    };\r\n\r\n    window.addEventListener(\r\n      'performance-update',\r\n      handlePerformanceUpdate as EventListener\r\n    );\r\n\r\n    return () => {\r\n      window.removeEventListener(\r\n        'performance-update',\r\n        handlePerformanceUpdate as EventListener\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  const getPerformanceGrade = (\r\n    averageTime: number\r\n  ): { grade: string; color: string } => {\r\n    if (averageTime < 10) {\r\n      return { grade: 'A', color: 'text-green-600' };\r\n    }\r\n    if (averageTime < 20) {\r\n      return { grade: 'B', color: 'text-yellow-600' };\r\n    }\r\n    if (averageTime < 50) {\r\n      return { grade: 'C', color: 'text-orange-600' };\r\n    }\r\n    return { grade: 'D', color: 'text-red-600' };\r\n  };\r\n\r\n  const totalRenders = Object.values(performanceData).reduce(\r\n    (sum, metrics) => sum + metrics.renderCount,\r\n    0\r\n  );\r\n  const averageRenderTime =\r\n    Object.values(performanceData).reduce(\r\n      (sum, metrics) => sum + metrics.averageRenderTime,\r\n      0\r\n    ) / Object.keys(performanceData).length || 0;\r\n\r\n  if (!isVisible) {\r\n    return (\r\n      <Button\r\n        onClick={() => setIsVisible(true)}\r\n        variant=\"outline\"\r\n        size=\"sm\"\r\n        className=\"fixed bottom-4 right-4 z-50\"\r\n      >\r\n        <BarChart3 className=\"h-4 w-4 mr-2\" />\r\n        Performance\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"fixed bottom-4 right-4 w-96 max-h-96 overflow-y-auto z-50 shadow-lg\">\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"text-sm flex items-center gap-2\">\r\n            <Activity className=\"h-4 w-4\" />\r\n            Performance Dashboard\r\n          </CardTitle>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsVisible(false)}\r\n            className=\"h-6 w-6 p-0\"\r\n          >\r\n            \r\n          </Button>\r\n        </div>\r\n        <CardDescription className=\"text-xs\">\r\n          Real-time component performance metrics\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-3\">\r\n        {/* Summary Stats */}\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <div className=\"bg-slate-50 dark:bg-slate-800 p-2 rounded\">\r\n            <div className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n              Total Renders\r\n            </div>\r\n            <div className=\"text-lg font-semibold\">{totalRenders}</div>\r\n          </div>\r\n          <div className=\"bg-slate-50 dark:bg-slate-800 p-2 rounded\">\r\n            <div className=\"text-xs text-slate-600 dark:text-slate-400\">\r\n              Avg Time\r\n            </div>\r\n            <div className=\"text-lg font-semibold\">\r\n              {averageRenderTime.toFixed(1)}ms\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Component Details */}\r\n        <div className=\"space-y-2\">\r\n          {Object.entries(performanceData).map(([componentName, metrics]) => {\r\n            const grade = getPerformanceGrade(metrics.averageRenderTime);\r\n\r\n            return (\r\n              <div key={componentName} className=\"border rounded p-2\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <span className=\"text-sm font-medium truncate\">\r\n                    {componentName}\r\n                  </span>\r\n                  <Badge variant=\"outline\" className={grade.color}>\r\n                    {grade.grade}\r\n                  </Badge>\r\n                </div>\r\n                <div className=\"grid grid-cols-3 gap-1 text-xs text-slate-600 dark:text-slate-400\">\r\n                  <div>\r\n                    <div className=\"font-medium\">Renders</div>\r\n                    <div>{metrics.renderCount}</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-medium\">Avg</div>\r\n                    <div>{metrics.averageRenderTime.toFixed(1)}ms</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-medium\">Last</div>\r\n                    <div>{metrics.lastRenderTime.toFixed(1)}ms</div>\r\n                  </div>\r\n                </div>\r\n                {metrics.averageRenderTime > 20 && (\r\n                  <div className=\"mt-1 flex items-center gap-1 text-xs text-orange-600\">\r\n                    <AlertCircle className=\"h-3 w-3\" />\r\n                    <span>Consider optimization</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Performance Tips */}\r\n        <div className=\"border-t pt-2\">\r\n          <div className=\"text-xs text-slate-600 dark:text-slate-400 mb-1\">\r\n            Tips:\r\n          </div>\r\n          <ul className=\"text-xs space-y-1 text-slate-500 dark:text-slate-400\">\r\n            <li> Use React.memo for pure components</li>\r\n            <li> Memoize expensive calculations with useMemo</li>\r\n            <li> Use useCallback for stable function references</li>\r\n            <li> Virtualize large lists with react-window</li>\r\n            <li> Avoid inline objects in render props</li>\r\n          </ul>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Custom hook for performance optimization\r\nexport const usePerformanceOptimization = () => {\r\n  const [metrics, setMetrics] = useState<ComponentPerformanceData>({});\r\n\r\n  const recordPerformance = useCallback(\r\n    (componentName: string, renderTime: number) => {\r\n      setMetrics((prev) => {\r\n        const existing = prev[componentName] || {\r\n          renderTime: 0,\r\n          renderCount: 0,\r\n          lastRenderTime: 0,\r\n          averageRenderTime: 0,\r\n          slowestRender: 0,\r\n          fastestRender: Infinity,\r\n        };\r\n\r\n        const newRenderCount = existing.renderCount + 1;\r\n        const totalTime =\r\n          existing.averageRenderTime * existing.renderCount + renderTime;\r\n        const newAverage = totalTime / newRenderCount;\r\n\r\n        const updated = {\r\n          renderTime,\r\n          renderCount: newRenderCount,\r\n          lastRenderTime: renderTime,\r\n          averageRenderTime: newAverage,\r\n          slowestRender: Math.max(existing.slowestRender, renderTime),\r\n          fastestRender: Math.min(existing.fastestRender, renderTime),\r\n        };\r\n\r\n        // Emit custom event for dashboard\r\n        window.dispatchEvent(\r\n          new CustomEvent('performance-update', {\r\n            detail: { componentName, metrics: updated },\r\n          })\r\n        );\r\n\r\n        return {\r\n          ...prev,\r\n          [componentName]: updated,\r\n        };\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  return { metrics, recordPerformance };\r\n};\r\n\r\nexport default {\r\n  createMemoizedComponent,\r\n  withPerformanceMonitoring,\r\n  VirtualizedList,\r\n  useExpensiveCalculation,\r\n  useStableCallback,\r\n  performanceUtils,\r\n  PerformanceDashboard,\r\n  usePerformanceOptimization,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\profile\\UserProfile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\reports\\CustomReport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\reports\\DailyReport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\reports\\MonthlyReport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\reports\\ReportsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\components\\reports\\WeeklyReport.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[28,41],"text":""},"desc":"Remove unused variable 'useCallback'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  TrendingUp,\n  Users,\n  BookOpen,\n  Download,\n  CheckCircle2,\n  AlertCircle,\n  Star,\n} from 'lucide-react';\nimport { reportsApi } from '@/lib/api';\nimport { exportReportToCSV } from '@/lib/export-utils';\n\ninterface WeeklyStats {\n  weekStart: string;\n  weekEnd: string;\n  summary: {\n    totalVisits: number;\n    uniqueStudents: number;\n    totalCheckouts: number;\n  };\n  popularBooks: Array<{ title: string; count: number }>;\n  popularCategories: Array<{ name: string; count: number }>;\n  dailyBreakdown: Array<{\n    date: string;\n    dayOfWeek: string;\n    visits: number;\n    checkouts: number;\n    uniqueStudents: number;\n  }>;\n}\n\nexport default function WeeklyReport() {\n  const [stats, setStats] = useState<WeeklyStats | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [weekOffset, setWeekOffset] = useState(0);\n  const [message, setMessage] = useState<{\n    type: 'success' | 'error' | null;\n    text: string;\n  }>({ type: null, text: '' });\n\n  useEffect(() => {\n    fetchWeeklyReport();\n  }, [weekOffset]);\n\n  const fetchWeeklyReport = async () => {\n    setLoading(true);\n    try {\n      // Calculate the date for the week based on offset\n      const date = new Date();\n      date.setDate(date.getDate() - weekOffset * 7);\n      const dateStr = date.toISOString().split('T')[0];\n\n      const response = await reportsApi.getWeeklyReport(dateStr);\n      if (response.success && response.data) {\n        setStats(response.data as WeeklyStats);\n      } else {\n        showMessage('error', 'Failed to load weekly report');\n      }\n    } catch (error) {\n      console.error('Failed to fetch weekly report:', error);\n      showMessage('error', 'Failed to load weekly report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportReport = (format: 'pdf' | 'csv') => {\n    if (!stats) {\n      return;\n    }\n\n    if (format === 'csv') {\n      exportReportToCSV(stats, 'weekly');\n      showMessage('success', 'Report exported successfully');\n    } else if (format === 'pdf') {\n      window.print();\n    }\n  };\n\n  const showMessage = (type: 'success' | 'error', text: string) => {\n    setMessage({ type, text });\n    setTimeout(() => {\n      setMessage({ type: null, text: '' });\n    }, 5000);\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"flex items-center justify-center h-64\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">Loading report...</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Messages */}\n      {message.type && (\n        <Alert variant={message.type === 'success' ? 'default' : 'destructive'}>\n          {message.type === 'success' ? (\n            <CheckCircle2 className=\"h-4 w-4\" />\n          ) : (\n            <AlertCircle className=\"h-4 w-4\" />\n          )}\n          <AlertDescription>{message.text}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* Controls */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <TrendingUp className=\"w-5 h-5\" />\n            Weekly Report\n          </CardTitle>\n          <CardDescription>\n            {stats && `${stats.weekStart} to ${stats.weekEnd}`}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setWeekOffset(weekOffset + 1)}\n              >\n                 Previous Week\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setWeekOffset(Math.max(0, weekOffset - 1))}\n                disabled={weekOffset === 0}\n              >\n                Next Week \n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setWeekOffset(0)}\n                disabled={weekOffset === 0}\n              >\n                Current Week\n              </Button>\n            </div>\n            <div className=\"flex gap-2 ml-auto\">\n              <Button variant=\"outline\" onClick={() => exportReport('csv')}>\n                <Download className=\"w-4 h-4 mr-2\" />\n                Export CSV\n              </Button>\n              <Button variant=\"outline\" onClick={() => exportReport('pdf')}>\n                <Download className=\"w-4 h-4 mr-2\" />\n                Export PDF\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {stats && (\n        <>\n          {/* Key Metrics */}\n          <div className=\"grid gap-4 md:grid-cols-4\">\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Total Check-Ins\n                </CardTitle>\n                <Users className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {stats.summary.totalVisits}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">This week</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Unique Students\n                </CardTitle>\n                <Users className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {stats.summary.uniqueStudents}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Different visitors\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Books Circulated\n                </CardTitle>\n                <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {stats.summary.totalCheckouts}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Checked out</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Avg Daily Visits\n                </CardTitle>\n                <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {Math.round(stats.summary.totalVisits / 7)}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Per day average</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Popular Items */}\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Star className=\"w-5 h-5\" />\n                  Popular Books\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {stats.popularBooks.slice(0, 5).map((book, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-center justify-between\"\n                    >\n                      <span className=\"text-sm\">\n                        {index + 1}. {book.title}\n                      </span>\n                      <Badge variant=\"outline\">{book.count}x</Badge>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BookOpen className=\"w-5 h-5\" />\n                  Popular Categories\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {stats.popularCategories.map((cat, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-center justify-between\"\n                    >\n                      <span className=\"text-sm\">{cat.name}</span>\n                      <Badge variant=\"outline\">{cat.count} books</Badge>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Daily Breakdown */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Daily Breakdown</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {stats.dailyBreakdown.map((day) => (\n                  <div\n                    key={day.date}\n                    className=\"flex items-center justify-between p-2 border rounded\"\n                  >\n                    <span className=\"font-medium\">\n                      {day.dayOfWeek} - {day.date}\n                    </span>\n                    <div className=\"flex gap-2\">\n                      <Badge variant=\"outline\">{day.visits} visits</Badge>\n                      <Badge variant=\"outline\">{day.checkouts} checkouts</Badge>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'username' is defined but never used. Allowed unused args must match /^_/u.","line":33,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"username"},"fix":{"range":[638,655],"text":""},"desc":"Remove unused variable 'username'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'password' is defined but never used. Allowed unused args must match /^_/u.","line":34,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"password"},"fix":{"range":[654,677],"text":""},"desc":"Remove unused variable 'password'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'rememberMe' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"rememberMe"},"fix":{"range":[677,704],"text":""},"desc":"Remove unused variable 'rememberMe'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n  type ReactNode,\r\n} from 'react';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { toast } from 'sonner';\r\n\r\nimport {\r\n  apiClient,\r\n  setAccessTokenProvider,\r\n  setUnauthorizedHandler,\r\n  type LoginResponse,\r\n} from '@/lib/api';\r\nimport {\r\n  authKeys,\r\n  clearAuthState,\r\n  fetchCurrentUser,\r\n  primeAuthState,\r\n  type AuthUser,\r\n} from '@/lib/auth-queries';\r\n\r\ninterface AuthContextType {\r\n  user: AuthUser | null;\r\n  token: string | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  login: (\r\n    username: string,\r\n    password: string,\r\n    rememberMe?: boolean\r\n  ) => Promise<boolean>;\r\n  logout: () => void;\r\n  checkAuth: () => Promise<boolean>;\r\n  refreshSession: () => Promise<boolean>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface LogoutOptions {\r\n  message?: string;\r\n  silent?: boolean;\r\n  severity?: 'info' | 'error';\r\n}\r\n\r\nexport function AuthProvider({ children }: AuthProviderProps) {\r\n  const queryClient = useQueryClient();\r\n  const [token, setToken] = useState<string | null>(\r\n    () =>\r\n      localStorage.getItem('clms_token') || sessionStorage.getItem('clms_token')\r\n  );\r\n\r\n  const performLogout = useCallback(\r\n    ({ message, silent, severity = 'info' }: LogoutOptions = {}) => {\r\n      // Clear both localStorage and sessionStorage\r\n      localStorage.removeItem('clms_token');\r\n      localStorage.removeItem('clms_refresh_token');\r\n      localStorage.removeItem('clms_user');\r\n      sessionStorage.removeItem('clms_token');\r\n      sessionStorage.removeItem('clms_refresh_token');\r\n      sessionStorage.removeItem('clms_user');\r\n      setToken(null);\r\n      clearAuthState(queryClient);\r\n\r\n      if (!silent) {\r\n        const text = message ?? 'You have been logged out';\r\n        if (severity === 'error') {\r\n          toast.error(text);\r\n        } else {\r\n          toast.info(text);\r\n        }\r\n      }\r\n    },\r\n    [queryClient]\r\n  );\r\n\r\n  const authQuery = useQuery<AuthUser>({\r\n    queryKey: authKeys.current(),\r\n    queryFn: fetchCurrentUser,\r\n    enabled: Boolean(token),\r\n    staleTime: 5 * 60 * 1000,\r\n    gcTime: 15 * 60 * 1000,\r\n    retry: false,\r\n  });\r\n\r\n  // Handle successful auth query with useEffect (React Query v5 pattern)\r\n  useEffect(() => {\r\n    if (authQuery.data) {\r\n      localStorage.setItem('clms_user', JSON.stringify(authQuery.data));\r\n    }\r\n  }, [authQuery.data]);\r\n\r\n  const logout = useCallback(() => {\r\n    performLogout();\r\n  }, [performLogout]);\r\n\r\n  useEffect(() => {\r\n    setAccessTokenProvider(\r\n      () =>\r\n        localStorage.getItem('clms_token') ||\r\n        sessionStorage.getItem('clms_token')\r\n    );\r\n\r\n    setUnauthorizedHandler(() => {\r\n      performLogout({\r\n        message: 'Please log in to continue',\r\n        severity: 'info',\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      setAccessTokenProvider(() => null);\r\n      setUnauthorizedHandler(null);\r\n    };\r\n  }, [performLogout]);\r\n\r\n  const login = useCallback(\r\n    async (username: string, password: string, rememberMe: boolean = false) => {\r\n      try {\r\n        // console.log removed(' Starting login attempt for:', username);\r\n\r\n        const response = await apiClient.post<LoginResponse>(\r\n          '/api/auth/login',\r\n          {\r\n            username,\r\n            password,\r\n            rememberMe,\r\n          }\r\n        );\r\n\r\n        // console.log removed(' Login response:', response);\r\n\r\n        if (response.success && response.data) {\r\n          const { accessToken, refreshToken, user } = response.data;\r\n\r\n          // console.log removed\r\n          // console.log removed(' User:', user);\r\n\r\n          // Store token in localStorage or sessionStorage based on rememberMe\r\n          if (rememberMe) {\r\n            localStorage.setItem('clms_token', accessToken);\r\n            localStorage.setItem('clms_refresh_token', refreshToken);\r\n            localStorage.setItem('clms_user', JSON.stringify(user));\r\n          } else {\r\n            // For session-only, use sessionStorage\r\n            sessionStorage.setItem('clms_token', accessToken);\r\n            sessionStorage.setItem('clms_refresh_token', refreshToken);\r\n            sessionStorage.setItem('clms_user', JSON.stringify(user));\r\n          }\r\n\r\n          setToken(accessToken);\r\n\r\n          queryClient.setQueryData(authKeys.current(), user);\r\n\r\n          // Update the access token provider immediately so interceptors can use it\r\n          setAccessTokenProvider(() => accessToken);\r\n\r\n          // console.log removed(' Calling primeAuthState...');\r\n\r\n          try {\r\n            await primeAuthState(queryClient);\r\n            // console.log removed(' primeAuthState completed successfully');\r\n          } catch (primeError) {\r\n            console.error(\r\n              ' Failed to prime auth state after login:',\r\n              primeError\r\n            );\r\n          }\r\n\r\n          toast.success(`Welcome back, ${user.username}!`);\r\n          return true;\r\n        }\r\n\r\n        // console.log removed(' Login failed - response.success is false or no data');\r\n        const errorData = response as unknown as Record<string, unknown>;\r\n        const error = errorData.error;\r\n        toast.error(\r\n          typeof error === 'string'\r\n            ? error\r\n            : error &&\r\n                typeof error === 'object' &&\r\n                'message' in error &&\r\n                typeof error.message === 'string'\r\n              ? error.message\r\n              : 'Login failed'\r\n        );\r\n        return false;\r\n      } catch (error) {\r\n        console.error(' Login error:', error);\r\n        toast.error('An error occurred during login');\r\n        return false;\r\n      }\r\n    },\r\n    [queryClient]\r\n  );\r\n\r\n  const checkAuth = useCallback(async (): Promise<boolean> => {\r\n    const storedToken =\r\n      localStorage.getItem('clms_token') ||\r\n      sessionStorage.getItem('clms_token');\r\n\r\n    if (!storedToken) {\r\n      performLogout({ silent: true });\r\n      return false;\r\n    }\r\n\r\n    setToken(storedToken);\r\n\r\n    try {\r\n      const currentUser: AuthUser = await primeAuthState(queryClient);\r\n      queryClient.setQueryData(authKeys.current(), currentUser);\r\n      return true;\r\n    } catch (error: any) {\r\n      // Only fall back to cache if it's a network error (offline), NOT if it's an auth error (401/403)\r\n      const isAuthError =\r\n        error?.response?.status === 401 ||\r\n        error?.response?.status === 403 ||\r\n        error?.status === 401 ||\r\n        error?.status === 403;\r\n\r\n      // Don't log 401/403 errors - they're expected when not logged in\r\n      if (!isAuthError) {\r\n        console.error('Auth check failed:', error);\r\n        try {\r\n          const cached =\r\n            localStorage.getItem('clms_user') ||\r\n            sessionStorage.getItem('clms_user');\r\n          if (cached) {\r\n            const cachedUser = JSON.parse(cached) as AuthUser;\r\n            queryClient.setQueryData(authKeys.current(), cachedUser);\r\n            // Don't return true here, just set data. Let the user decide if they want to trust stale data.\r\n            // Actually for offline support we might want to return true, but for now let's be safe.\r\n            // If we return true, we mask the error.\r\n            // Let's return true ONLY if we are sure it's not an auth error.\r\n            return true;\r\n          }\r\n        } catch {\r\n          // Ignore JSON parsing errors for invalid cache data\r\n        }\r\n      }\r\n\r\n      performLogout({ message: 'Please log in to continue', severity: 'info' });\r\n      return false;\r\n    }\r\n  }, [performLogout, queryClient]);\r\n\r\n  // Manually refresh the session token\r\n  const refreshSession = useCallback(async (): Promise<boolean> => {\r\n    try {\r\n      const storedRefreshToken =\r\n        localStorage.getItem('clms_refresh_token') ||\r\n        sessionStorage.getItem('clms_refresh_token');\r\n\r\n      if (!storedRefreshToken) {\r\n        return false;\r\n      }\r\n\r\n      const response = await apiClient.post<LoginResponse>(\r\n        '/api/auth/refresh',\r\n        { refreshToken: storedRefreshToken }\r\n      );\r\n\r\n      if (response.data?.accessToken) {\r\n        const newToken = response.data.accessToken;\r\n        const storage = localStorage.getItem('clms_token')\r\n          ? localStorage\r\n          : sessionStorage;\r\n        storage.setItem('clms_token', newToken);\r\n        setToken(newToken);\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Manual refresh failed:', error);\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  // Call checkAuth only once on mount\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []); // Empty dependency array to run only once on mount\r\n\r\n  const user: AuthUser | null = authQuery.data || null;\r\n  const isAuthenticated = Boolean(token);\r\n  const isLoading = false;\r\n\r\n  // T053: Auto-refresh token before expiration\r\n  useEffect(() => {\r\n    if (!token || !user) {\r\n      return;\r\n    }\r\n\r\n    // Refresh token 5 minutes before expiration (assuming 1 hour token lifetime)\r\n    const REFRESH_INTERVAL = 55 * 60 * 1000; // 55 minutes in milliseconds\r\n\r\n    const refreshTimer = setInterval(async () => {\r\n      try {\r\n        const storedRefreshToken =\r\n          localStorage.getItem('clms_refresh_token') ||\r\n          sessionStorage.getItem('clms_refresh_token');\r\n\r\n        if (!storedRefreshToken) {\r\n          throw new Error('Missing refresh token');\r\n        }\r\n\r\n        const response = await apiClient.post<LoginResponse>(\r\n          '/api/auth/refresh',\r\n          { refreshToken: storedRefreshToken },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        );\r\n\r\n        if (response.data?.accessToken) {\r\n          const newToken = response.data.accessToken;\r\n          const storage = localStorage.getItem('clms_token')\r\n            ? localStorage\r\n            : sessionStorage;\r\n          storage.setItem('clms_token', newToken);\r\n          setToken(newToken);\r\n\r\n          // Silent refresh - no console log in production\r\n        }\r\n      } catch (error) {\r\n        // If refresh fails, the unauthorized handler will logout the user\r\n        console.error('Auto-refresh failed:', error);\r\n      }\r\n    }, REFRESH_INTERVAL);\r\n\r\n    return () => clearInterval(refreshTimer);\r\n  }, [token, user]);\r\n\r\n  const value = useMemo<AuthContextType>(\r\n    () => ({\r\n      user,\r\n      token,\r\n      isAuthenticated,\r\n      isLoading,\r\n      login,\r\n      logout,\r\n      checkAuth,\r\n      refreshSession,\r\n    }),\r\n    [\r\n      checkAuth,\r\n      isAuthenticated,\r\n      isLoading,\r\n      login,\r\n      logout,\r\n      refreshSession,\r\n      token,\r\n      user,\r\n    ]\r\n  );\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth(): AuthContextType {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default AuthContext;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\contexts\\ThemeContext.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'theme' is defined but never used. Allowed unused args must match /^_/u.","line":9,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[260,272],"text":""},"desc":"Remove unused variable 'theme'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ntype Theme = 'light' | 'dark' | 'system';\r\ntype ResolvedTheme = 'light' | 'dark';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  resolvedTheme: ResolvedTheme;\r\n  setTheme: (theme: Theme) => void;\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const [resolvedTheme] = useState<ResolvedTheme>('dark');\r\n\r\n  // Apply theme to document\r\n  const applyTheme = () => {\r\n    const root = document.documentElement;\r\n    root.classList.add('dark');\r\n\r\n    // Update meta theme-color for mobile browsers\r\n    const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\r\n    if (metaThemeColor) {\r\n      metaThemeColor.setAttribute('content', '#141b2e');\r\n    }\r\n  };\r\n\r\n  // Toggle between light and dark (Disabled - Permanent Dark Mode)\r\n  const toggleTheme = () => {\r\n    // No-op: Dark mode is permanent\r\n    console.warn('Theme switching is disabled. Permanent dark mode enforced.');\r\n  };\r\n\r\n  // Initialize theme on mount\r\n  useEffect(() => {\r\n    applyTheme();\r\n    // Ensure it stays dark even if something tries to change it\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (\r\n          mutation.type === 'attributes' &&\r\n          mutation.attributeName === 'class'\r\n        ) {\r\n          if (!document.documentElement.classList.contains('dark')) {\r\n            document.documentElement.classList.add('dark');\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(document.documentElement, {\r\n      attributes: true,\r\n      attributeFilter: ['class'],\r\n    });\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    <ThemeContext.Provider\r\n      value={{ theme: 'dark', resolvedTheme, setTheme: () => {}, toggleTheme }}\r\n    >\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\contexts\\WebSocketContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\AttendancePage.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'CardSkeleton' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardSkeleton"},"fix":{"range":[73,87],"text":""},"desc":"Remove unused variable 'CardSkeleton'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tabs' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tabs"},"fix":{"range":[135,140],"text":""},"desc":"Remove unused variable 'Tabs'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsContent"},"fix":{"range":[139,152],"text":""},"desc":"Remove unused variable 'TabsContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsList' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsList"},"fix":{"range":[152,162],"text":""},"desc":"Remove unused variable 'TabsList'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsTrigger"},"fix":{"range":[162,175],"text":""},"desc":"Remove unused variable 'TabsTrigger'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Users"},"fix":{"range":[217,223],"text":""},"desc":"Remove unused variable 'Users'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[222,229],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[229,239],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[239,249],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'activeTab' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"activeTab"},"fix":{"range":[429,438],"text":""},"desc":"Remove unused variable 'activeTab'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setActiveTab' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setActiveTab"},"fix":{"range":[438,452],"text":""},"desc":"Remove unused variable 'setActiveTab'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Suspense, lazy, useState } from 'react';\r\nimport { TableSkeleton, CardSkeleton } from '@/components/LoadingStates';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Users, Clock, Download, Calendar } from 'lucide-react';\r\n\r\nconst AttendanceTracker = lazy(\r\n  () => import('@/components/attendance/AttendanceTracker')\r\n);\r\n\r\nexport default function AttendancePage() {\r\n  const [activeTab, setActiveTab] = useState('today');\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">Attendance Management</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            View and export student check-in/check-out records\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <Suspense fallback={<TableSkeleton rows={10} columns={6} />}>\r\n        <AttendanceTracker />\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\BooksPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\DashboardPage.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unused-vars').","line":6,"column":3,"severity":1,"nodeType":null,"fix":{"range":[206,248],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { Suspense } from 'react';\r\nimport DashboardOverview from '@/components/dashboard/DashboardOverview';\r\nimport { CardSkeleton } from '@/components/LoadingStates';\r\n\r\ninterface DashboardPageProps {\r\n  // eslint-disable-next-line no-unused-vars\r\n  onTabChange?: (_tab: string) => void;\r\n}\r\n\r\nexport default function DashboardPage({ onTabChange }: DashboardPageProps) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Suspense fallback={<CardSkeleton className=\"h-96\" />}>\r\n        <DashboardOverview onTabChange={onTabChange} />\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\EquipmentPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\Kiosk.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\PrintingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\ScanStationPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\SettingsAdminPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\StudentsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\jmbar\\Desktop\\ALL REPOS\\Pia_REPOS\\CLMS\\Frontend\\src\\pages\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
